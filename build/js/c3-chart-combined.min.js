!function(){function o(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function s(t){return null===t?NaN:+t}function u(t){return!isNaN(t)}function t(a){return{left:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;a(t[r],e)<0?n=1+r:i=r}return n},right:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;0<a(t[r],e)?i=r:n=1+r}return n}}}function c(t){return t.length}function e(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function y(){this._=Object.create(null)}function n(t){return(t+="")===na||t[0]===ia?ia+t:t}function i(t){return(t+="")[0]===ia?t.slice(1):t}function r(t){return n(t)in this._}function a(t){return(t=n(t))in this._&&delete this._[t]}function l(){var t=[];for(var e in this._)t.push(i(e));return t}function h(){var t=0;for(var e in this._)++t;return t}function d(){for(var t in this._)return!1;return!0}function f(){this._=Object.create(null)}function g(e,n,i){return function(){var t=i.apply(n,arguments);return t===n?e:t}}function p(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=ra.length;n<i;++n){var r=ra[n]+e;if(r in t)return r}}function _(){}function x(){}function v(r){function t(){for(var t,e=a,n=-1,i=e.length;++n<i;)(t=e[n].on)&&t.apply(this,arguments);return r}var a=[],o=new y;return t.on=function(t,e){var n,i=o.get(t);return arguments.length<2?i&&i.on:(i&&(i.on=null,a=a.slice(0,n=a.indexOf(i)).concat(a.slice(n+1)),o.remove(t)),e&&a.push(o.set(t,{on:e})),r)},t}function R(){Br.event.preventDefault()}function m(){for(var t,e=Br.event;t=e.sourceEvent;)e=t;return e}function k(r){for(var a=new x,t=0,e=arguments.length;++t<e;)a[arguments[t]]=v(a);return a.of=function(n,i){return function(t){try{var e=t.sourceEvent=Br.event;t.target=r,Br.event=t,a[t.type].apply(n,i)}finally{Br.event=e}}},a}function S(t){return oa(t,ha),t}function b(t){return"function"==typeof t?t:function(){return sa(t,this)}}function A(t){return"function"==typeof t?t:function(){return ua(t,this)}}function T(e,n){return e=Br.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function w(t){return t.trim().replace(/\s+/g," ")}function P(t){return new RegExp("(?:^|\\s+)"+Br.requote(t)+"(?:\\s+|$)","g")}function C(t){return(t+"").trim().split(/^|\s+/)}function L(n,i){var r=(n=C(n).map(M)).length;return"function"==typeof i?function(){for(var t=-1,e=i.apply(this,arguments);++t<r;)n[t](this,e)}:function(){for(var t=-1;++t<r;)n[t](this,i)}}function M(i){var r=P(i);return function(t,e){if(n=t.classList)return e?n.add(i):n.remove(i);var n=t.getAttribute("class")||"";e?(r.lastIndex=0,r.test(n)||t.setAttribute("class",w(n+" "+i))):t.setAttribute("class",w(n.replace(r," ")))}}function E(e,n,i){return null==n?function(){this.style.removeProperty(e)}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}:function(){this.style.setProperty(e,n,i)}}function V(e,n){return null==n?function(){delete this[e]}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}:function(){this[e]=n}}function G(t){return"function"==typeof t?t:(t=Br.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function I(){var t=this.parentNode;t&&t.removeChild(this)}function O(t){return{__data__:t}}function D(t){return function(){return la(this,t)}}function N(t,e){for(var n=0,i=t.length;n<i;n++)for(var r,a=t[n],o=0,s=a.length;o<s;o++)(r=a[o])&&e(r,o,n);return t}function F(t){return oa(t,fa),t}function z(t){var e=t.__transition__;e&&++e.active}function X(r,e,n){function i(){var t=this[a];t&&(this.removeEventListener(r,t,t.$),delete this[a])}var a="__on"+r,t=r.indexOf("."),o=H;0<t&&(r=r.slice(0,t));var s=pa.get(r);return s&&(r=s,o=B),t?e?function(){var t=o(e,jr(arguments));i.call(this),this.addEventListener(r,this[a]=t,t.$=n),t._=e}:i:e?_:function(){var t,e=new RegExp("^__on([^.]+)"+Br.requote(r)+"$");for(var n in this)if(t=n.match(e)){var i=this[n];this.removeEventListener(t[1],i,i.$),delete this[n]}}}function H(n,i){return function(t){var e=Br.event;Br.event=t,i[0]=this.__data__;try{n.apply(this,i)}finally{Br.event=e}}}function B(t,e){var n=H(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function Y(){var n=".dragsuppress-"+ ++_a,i="click"+n,r=Br.select(Wr).on("touchmove"+n,R).on("dragstart"+n,R).on("selectstart"+n,R);if(xa){var a=qr.style,o=a[xa];a[xa]="none"}return function(t){if(r.on(n,null),xa&&(a[xa]=o),t){function e(){r.on(i,null)}r.on(i,function(){R(),e()},!0),setTimeout(e,0)}}}function j(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(ya<0&&(Wr.scrollX||Wr.scrollY)){var r=(n=Br.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();ya=!(r.f||r.e),n.remove()}return ya?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function U(){return Br.event.changedTouches[0].identifier}function q(){return Br.event.target}function W(){return Wr}function Q(t){return 0<t?1:t<0?-1:0}function Z(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function K(t){return 1<t?0:t<-1?Sa:Math.acos(t)}function $(t){return 1<t?Ta:t<-1?-Ta:Math.asin(t)}function J(t){return((t=Math.exp(t))+1/t)/2}function tt(t){return(t=Math.sin(t/2))*t}function et(){}function nt(t,e,n){return this instanceof nt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof nt?new nt(t.h,t.s,t.l):xt(""+t,_t,nt):new nt(t,e,n)}function it(t,e,n){function i(t){return Math.round(255*function(t){return 360<t?t-=360:t<0&&(t+=360),t<60?r+(a-r)*t/60:t<180?a:t<240?r+(a-r)*(240-t)/60:r}(t))}var r,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:1<e?1:e,r=2*(n=n<0?0:1<n?1:n)-(a=n<=.5?n*(1+e):n+e-n*e),new dt(i(t+120),i(t),i(t-120))}function rt(t,e,n){return this instanceof rt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof rt?new rt(t.h,t.c,t.l):ut(t instanceof ot?t.l:(t=yt((t=Br.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new rt(t,e,n)}function at(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ot(n,Math.cos(t*=wa)*e,Math.sin(t)*e)}function ot(t,e,n){return this instanceof ot?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ot?new ot(t.l,t.a,t.b):t instanceof rt?at(t.h,t.c,t.l):yt((t=dt(t)).r,t.g,t.b):new ot(t,e,n)}function st(t,e,n){var i=(t+16)/116,r=i+e/500,a=i-n/200;return new dt(ht(3.2404542*(r=ct(r)*ka)-1.5371385*(i=ct(i)*Ia)-.4985314*(a=ct(a)*Oa)),ht(-.969266*r+1.8760108*i+.041556*a),ht(.0556434*r-.2040259*i+1.0572252*a))}function ut(t,e,n){return 0<t?new rt(Math.atan2(n,e)*Pa,Math.sqrt(e*e+n*n),t):new rt(NaN,NaN,t)}function ct(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function lt(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function ht(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function dt(t,e,n){return this instanceof dt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof dt?new dt(t.r,t.g,t.b):xt(""+t,dt,it):new dt(t,e,n)}function ft(t){return new dt(t>>16,255&t>>8,255&t)}function gt(t){return ft(t)+""}function pt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function xt(t,e,n){var i,r,a,o=0,s=0,u=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(mt(r[0]),mt(r[1]),mt(r[2]))}return(a=Fa.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,u=15&a,u|=u<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,u=255&a)),e(o,s,u))}function _t(t,e,n){var i,r,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,u=(o+a)/2;return s?(r=u<.5?s/(o+a):s/(2-o-a),i=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=0<u&&u<1?0:i),new nt(i,r,u)}function yt(t,e,n){var i=lt((.4124564*(t=vt(t))+.3575761*(e=vt(e))+.1804375*(n=vt(n)))/ka),r=lt((.2126729*t+.7151522*e+.072175*n)/Ia);return ot(116*r-16,500*(i-r),200*(r-lt((.0193339*t+.119192*e+.9503041*n)/Oa)))}function vt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function mt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function St(t){return"function"==typeof t?t:function(){return t}}function bt(t){return t}function At(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),Tt(t,e,i,n)}}function Tt(r,a,n,t){function e(){var t,e=c.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(c)||200<=e&&e<300||304===e){try{t=n.call(o,c)}catch(t){return void s.error.call(o,t)}s.load.call(o,t)}else s.error.call(o,c)}var o={},s=Br.dispatch("beforesend","progress","load","error"),u={},c=new XMLHttpRequest,l=null;return!Wr.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(r)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=e:c.onreadystatechange=function(){3<c.readyState&&e()},c.onprogress=function(t){var e=Br.event;Br.event=t;try{s.progress.call(o,c)}finally{Br.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(a=null==t?null:t+"",o):a},o.responseType=function(t){return arguments.length?(l=t,o):l},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(jr(arguments)))}}),o.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),c.open(t,r,!0),null==a||"accept"in u||(u.accept=a+",*/*"),c.setRequestHeader)for(var i in u)c.setRequestHeader(i,u[i]);return null!=a&&c.overrideMimeType&&c.overrideMimeType(a),null!=l&&(c.responseType=l),null!=n&&o.on("error",n).on("load",function(t){n(null,t)}),s.beforesend.call(o,c),c.send(null==e?null:e),o},o.abort=function(){return c.abort(),o},Br.rebind(o,s,"on"),null==t?o:o.get(function(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}(t))}function wt(){var t=Pt(),e=Ct()-t;24<e?(isFinite(e)&&(clearTimeout(Ba),Ba=setTimeout(wt,e)),Ha=0):(Ha=1,ja(wt))}function Pt(){var t=Date.now();for(Ya=za;Ya;)t>=Ya.t&&(Ya.f=Ya.c(t-Ya.t)),Ya=Ya.n;return t}function Ct(){for(var t,e=za,n=1/0;e;)e=e.f?t?t.n=e.n:za=e.n:(e.t<n&&(n=e.t),(t=e).n);return Xa=t,n}function Lt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Mt(t){return t+""}function Et(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Vt(i,a,o){function t(t){var e=i(t),n=r(e,1);return t-e<n-t?e:n}function s(t){return a(t=i(new Za(t-1)),1),t}function r(t,e){return a(t=new Za(+t),e),t}function u(t,e,n){var i=s(t),r=[];if(1<n)for(;i<e;)o(i)%n||r.push(new Date(+i)),a(i,1);else for(;i<e;)r.push(new Date(+i)),a(i,1);return r}(i.floor=i).round=t,i.ceil=s,i.offset=r,i.range=u;var e=i.utc=Gt(i);return(e.floor=e).round=Gt(t),e.ceil=Gt(s),e.offset=Gt(r),e.range=function(t,e,n){try{var i=new(Za=Et);return i._=t,u(i,e,n)}finally{Za=Date}},i}function Gt(i){return function(t,e){try{var n=new(Za=Et);return n._=t,i(n,e)._}finally{Za=Date}}}function Rt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function kt(t){return new RegExp("^(?:"+t.map(Br.requote).join("|")+")","i")}function It(t){for(var e=new y,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Ot(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Dt(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Nt(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Ft(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function zt(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n,n+2));return i?(t.y=function(t){return t+(68<t?1900:2e3)}(+i[0]),n+i[0].length):-1}function Xt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ht(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Bt(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Yt(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function jt(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Ut(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function qt(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Wt(t,e,n){Ja.lastIndex=0;var i=Ja.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Qt(t){var e=t.getTimezoneOffset(),n=0<e?"-":"+",i=0|ea(e)/60,r=ea(e)%60;return n+Rt(i,"0",2)+Rt(r,"0",2)}function Zt(t,e,n){to.lastIndex=0;var i=to.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Kt(i){for(var t=i.length,e=-1;++e<t;)i[e][0]=this(i[e][0]);return function(t){for(var e=0,n=i[e];!n[1](t);)n=i[++e];return n[0](t)}}function $t(){}function Jt(t,e,n){var i=n.s=t+e,r=i-t,a=i-r;n.t=t-a+(e-r)}function te(t,e){t&&ro.hasOwnProperty(t.type)&&ro[t.type](t,e)}function ee(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function ne(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)ee(t[n],e,1);e.polygonEnd()}function ie(){function n(t,e){e=e*wa/2+Sa/4;var n=(t*=wa)-l,i=0<=n?1:-1,r=i*n,a=Math.cos(e),o=Math.sin(e),s=d*o,u=h*a+s*Math.cos(r),c=s*i*Math.sin(r);vo.add(Math.atan2(c,u)),l=t,h=a,d=o}var i,r,l,h,d;mo.point=function(t,e){mo.point=n,l=(i=t)*wa,h=Math.cos(e=(r=e)*wa/2+Sa/4),d=Math.sin(e)},mo.lineEnd=function(){n(i,r)}}function re(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function ae(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function oe(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function se(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ue(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ce(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function le(t){return[Math.atan2(t[1],t[0]),$(t[2])]}function he(t,e){return ea(t[0]-e[0])<va&&ea(t[1]-e[1])<va}function de(t,e){t*=wa;var n=Math.cos(e*=wa);fe(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function fe(t,e,n){Ro+=(t-Ro)/++Vo,ko+=(e-ko)/Vo,Io+=(n-Io)/Vo}function ge(){function i(t,e){t*=wa;var n=Math.cos(e*=wa),i=n*Math.cos(t),r=n*Math.sin(t),a=Math.sin(e),o=Math.atan2(Math.sqrt((o=u*a-c*r)*o+(o=c*i-s*a)*o+(o=s*r-u*i)*o),s*i+u*r+c*a);Go+=o,Oo+=o*(s+(s=i)),Do+=o*(u+(u=r)),No+=o*(c+(c=a)),fe(s,u,c)}var s,u,c;Ho.point=function(t,e){t*=wa;var n=Math.cos(e*=wa);s=n*Math.cos(t),u=n*Math.sin(t),c=Math.sin(e),Ho.point=i,fe(s,u,c)}}function pe(){Ho.point=de}function xe(){function i(t,e){t*=wa;var n=Math.cos(e*=wa),i=n*Math.cos(t),r=n*Math.sin(t),a=Math.sin(e),o=g*a-p*r,s=p*i-f*a,u=f*r-g*i,c=Math.sqrt(o*o+s*s+u*u),l=f*i+g*r+p*a,h=c&&-K(l)/c,d=Math.atan2(c,l);Fo+=h*o,zo+=h*s,Xo+=h*u,Go+=d,Oo+=d*(f+(f=i)),Do+=d*(g+(g=r)),No+=d*(p+(p=a)),fe(f,g,p)}var r,a,f,g,p;Ho.point=function(t,e){r=t,a=e,Ho.point=i,t*=wa;var n=Math.cos(e*=wa);f=n*Math.cos(t),g=n*Math.sin(t),p=Math.sin(e),fe(f,g,p)},Ho.lineEnd=function(){i(r,a),Ho.lineEnd=pe,Ho.point=de}}function _e(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function ye(){return!0}function ve(t,e,n,i,s){var u=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(he(n,i)){s.lineStart();for(var r=0;r<e;++r)s.point((n=t[r])[0],n[1]);return void s.lineEnd()}var a=new Se(n,t,null,!0),o=new Se(n,null,a,!1);a.o=o,u.push(a),c.push(o),o=new Se(i,null,a=new Se(i,t,null,!1),!0),a.o=o,u.push(a),c.push(o)}}),c.sort(e),me(u),me(c),u.length){for(var r=0,a=n,o=c.length;r<o;++r)c[r].e=a=!a;for(var l,h,d=u[0];;){for(var f=d,g=!0;f.v;)if((f=f.n)===d)return;l=f.z,s.lineStart();do{if(f.v=f.o.v=!0,f.e){if(g)for(r=0,o=l.length;r<o;++r)s.point((h=l[r])[0],h[1]);else i(f.x,f.n.x,1,s);f=f.n}else{if(g)for(r=(l=f.p.z).length-1;0<=r;--r)s.point((h=l[r])[0],h[1]);else i(f.x,f.p.x,-1,s);f=f.p}l=(f=f.o).z,g=!g}while(!f.v);s.lineEnd()}}}function me(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Se(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function be(y,v,m,S){return function(i,o){function e(t,e){var n=i(t,e);y(t=n[0],e=n[1])&&o.point(t,e)}function t(t,e){var n=i(t,e);d.point(n[0],n[1])}function n(){g.point=t,d.lineStart()}function r(){g.point=e,d.lineEnd()}function s(t,e){h.push([t,e]);var n=i(t,e);x.point(n[0],n[1])}function a(){x.lineStart(),h=[]}function u(){s(h[0][0],h[0][1]),x.lineEnd();var t,e=x.clean(),n=p.buffer(),i=n.length;if(h.pop(),l.push(h),h=null,i)if(1&e){var r,a=-1;if(0<(i=(t=n[0]).length-1)){for(_||(o.polygonStart(),_=!0),o.lineStart();++a<i;)o.point((r=t[a])[0],r[1]);o.lineEnd()}}else 1<i&&2&e&&n.push(n.pop().concat(n.shift())),c.push(n.filter(Ae))}var c,l,h,d=v(o),f=i.invert(S[0],S[1]),g={point:e,lineStart:n,lineEnd:r,polygonStart:function(){g.point=s,g.lineStart=a,g.lineEnd=u,c=[],l=[]},polygonEnd:function(){g.point=e,g.lineStart=n,g.lineEnd=r,c=Br.merge(c);var t=function(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;vo.reset();for(var s=0,u=e.length;s<u;++s){var c=e[s],l=c.length;if(l)for(var h=c[0],d=h[0],f=h[1]/2+Sa/4,g=Math.sin(f),p=Math.cos(f),x=1;;){x===l&&(x=0);var _=(t=c[x])[0],y=t[1]/2+Sa/4,v=Math.sin(y),m=Math.cos(y),S=_-d,b=0<=S?1:-1,A=b*S,T=Sa<A,w=g*v;if(vo.add(Math.atan2(w*b*Math.sin(A),p*m+w*Math.cos(A))),a+=T?S+b*ba:S,T^n<=d^n<=_){var P=oe(re(h),re(t));ce(P);var C=oe(r,P);ce(C);var L=(T^0<=S?-1:1)*$(C[2]);(L<i||i===L&&(P[0]||P[1]))&&(o+=T^0<=S?1:-1)}if(!x++)break;d=_,g=v,p=m,h=t}}return(a<-va||a<va&&vo<0)^1&o}(f,l);c.length?(_||(o.polygonStart(),_=!0),ve(c,we,t,m,o)):t&&(_||(o.polygonStart(),_=!0),o.lineStart(),m(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),c=l=null},sphere:function(){o.polygonStart(),o.lineStart(),m(null,null,1,o),o.lineEnd(),o.polygonEnd()}},p=Te(),x=v(p),_=!1;return g}}function Ae(t){return 1<t.length}function Te(){var n,e=[];return{lineStart:function(){e.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:_,buffer:function(){var t=e;return e=[],n=null,t},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function we(t,e){return((t=t.x)[0]<0?t[1]-Ta-va:Ta-t[1])-((e=e.x)[0]<0?e[1]-Ta-va:Ta-e[1])}function Pe(l,h,d,f){return function(t){var e,n=t.a,i=t.b,r=n.x,a=n.y,o=0,s=1,u=i.x-r,c=i.y-a;if(e=l-r,u||!(0<e)){if(e/=u,u<0){if(e<o)return;e<s&&(s=e)}else if(0<u){if(s<e)return;o<e&&(o=e)}if(e=d-r,u||!(e<0)){if(e/=u,u<0){if(s<e)return;o<e&&(o=e)}else if(0<u){if(e<o)return;e<s&&(s=e)}if(e=h-a,c||!(0<e)){if(e/=c,c<0){if(e<o)return;e<s&&(s=e)}else if(0<c){if(s<e)return;o<e&&(o=e)}if(e=f-a,c||!(e<0)){if(e/=c,c<0){if(s<e)return;o<e&&(o=e)}else if(0<c){if(e<o)return;e<s&&(s=e)}return 0<o&&(t.a={x:r+o*u,y:a+o*c}),s<1&&(t.b={x:r+s*u,y:a+s*c}),t}}}}}}function Ce(m,S,b,A){function T(t,e){return ea(t[0]-m)<va?0<e?0:3:ea(t[0]-b)<va?0<e?2:1:ea(t[1]-S)<va?0<e?1:0:0<e?3:2}function w(t,e){return P(t.x,e.x)}function P(t,e){var n=T(t,1),i=T(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){function i(t,e,n,i){var r=0,a=0;if(null==t||(r=T(t,n))!==(a=T(e,n))||P(t,e)<0^0<n)for(;i.point(0===r||3===r?m:b,1<r?A:S),(r=(r+n+4)%4)!==a;);else i.point(e[0],e[1])}function a(t,e){return m<=t&&t<=b&&S<=e&&e<=A}function t(t,e){a(t,e)&&r.point(t,e)}function e(t,e){var n=a(t=Math.max(-Yo,Math.min(Yo,t)),e=Math.max(-Yo,Math.min(Yo,e)));if(l&&s.push([t,e]),p)u=t,c=e,p=!1,(h=n)&&(r.lineStart(),r.point(t,e));else if(n&&g)r.point(t,e);else{var i={a:{x:d,y:f},b:{x:t,y:e}};y(i)?(g||(r.lineStart(),r.point(i.a.x,i.a.y)),r.point(i.b.x,i.b.y),n||r.lineEnd(),x=!1):n&&(r.lineStart(),r.point(t,e),x=!1)}d=t,f=e,g=n}var o,l,s,u,c,h,d,f,g,p,x,_=r,n=Te(),y=Pe(m,S,b,A),v={point:t,lineStart:function(){v.point=e,l&&l.push(s=[]),g=!(p=!0),d=f=NaN},lineEnd:function(){o&&(e(u,c),h&&g&&n.rejoin(),o.push(n.buffer())),v.point=t,g&&r.lineEnd()},polygonStart:function(){r=n,o=[],l=[],x=!0},polygonEnd:function(){r=_,o=Br.merge(o);var t=function(t){for(var e=0,n=l.length,i=t[1],r=0;r<n;++r)for(var a,o=1,s=l[r],u=s.length,c=s[0];o<u;++o)a=s[o],c[1]<=i?a[1]>i&&0<Z(c,a,t)&&++e:a[1]<=i&&Z(c,a,t)<0&&--e,c=a;return 0!==e}([m,A]),e=x&&t,n=o.length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),i(null,null,1,r),r.lineEnd()),n&&ve(o,w,t,i,r),r.polygonEnd()),o=l=s=null}};return v}}function Le(t){var e=0,n=Sa/3,i=He(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Sa/180,n=t[1]*Sa/180):[e/Sa*180,n/Sa*180]},r}function Me(t,e){function n(t,e){var n=Math.sqrt(a-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,a=1+i*(2*r-i),o=Math.sqrt(a)/r;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,$((a-(t*t+n*n)*r*r)/(2*r))]},n}function Ee(){function n(t,e){Uo+=o*t-a*e,a=t,o=e}var i,r,a,o;Ko.point=function(t,e){Ko.point=n,i=a=t,r=o=e},Ko.lineEnd=function(){n(i,r)}}function Ve(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function i(){s.point=t}function r(){o.push("Z")}var a=Ge(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return a=Ge(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}function Ge(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Re(t,e){Ro+=t,ko+=e,++Io}function ke(){function n(t,e){var n=t-a,i=e-o,r=Math.sqrt(n*n+i*i);Oo+=r*(a+t)/2,Do+=r*(o+e)/2,No+=r,Re(a=t,o=e)}var a,o;Jo.point=function(t,e){Jo.point=n,Re(a=t,o=e)}}function Ie(){Jo.point=Re}function Oe(){function n(t,e){var n=t-a,i=e-o,r=Math.sqrt(n*n+i*i);Oo+=r*(a+t)/2,Do+=r*(o+e)/2,No+=r,Fo+=(r=o*t-a*e)*(a+t),zo+=r*(o+e),Xo+=3*r,Re(a=t,o=e)}var i,r,a,o;Jo.point=function(t,e){Jo.point=n,Re(i=a=t,r=o=e)},Jo.lineEnd=function(){n(i,r)}}function De(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,ba)}function e(t,e){n.moveTo(t,e),s.point=i}function i(t,e){n.lineTo(t,e)}function r(){s.point=t}function a(){n.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return o=t,s},result:_};return s}function Ne(M){function e(t){return(S?function(r){function t(t,e){t=M(t,e),r.point(t[0],t[1])}function e(){p=NaN,m.point=n,r.lineStart()}function n(t,e){var n=re([t,e]),i=M(t,e);E(p,x,g,_,y,v,p=i[0],x=i[1],g=t,_=n[0],y=n[1],v=n[2],S,r),r.point(p,x)}function i(){m.point=t,r.lineEnd()}function a(){e(),m.point=o,m.lineEnd=s}function o(t,e){n(u=t,e),c=p,l=x,h=_,d=y,f=v,m.point=n}function s(){E(p,x,g,_,y,v,c,l,u,h,d,f,S,r),(m.lineEnd=i)()}var u,c,l,h,d,f,g,p,x,_,y,v,m={point:t,lineStart:e,lineEnd:i,polygonStart:function(){r.polygonStart(),m.lineStart=a},polygonEnd:function(){r.polygonEnd(),m.lineStart=e}};return m}:function(n){return ze(n,function(t,e){t=M(t,e),n.point(t[0],t[1])})})(t)}function E(t,e,n,i,r,a,o,s,u,c,l,h,d,f){var g=o-t,p=s-e,x=g*g+p*p;if(4*V<x&&d--){var _=i+c,y=r+l,v=a+h,m=Math.sqrt(_*_+y*y+v*v),S=Math.asin(v/=m),b=ea(ea(v)-1)<va||ea(n-u)<va?(n+u)/2:Math.atan2(y,_),A=M(b,S),T=A[0],w=A[1],P=T-t,C=w-e,L=p*P-g*C;(V<L*L/x||.3<ea((g*P+p*C)/x-.5)||i*c+r*l+a*h<G)&&(E(t,e,n,i,r,a,T,w,b,_/=m,y/=m,v,d,f),f.point(T,w),E(T,w,b,_,y,v,o,s,u,c,l,h,d,f))}}var V=.5,G=Math.cos(30*wa),S=16;return e.precision=function(t){return arguments.length?(S=0<(V=t*t)&&16,e):Math.sqrt(V)},e}function Fe(t){this.stream=t}function ze(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Xe(t){return He(function(){return t})()}function He(t){function e(t){return[(t=s(t[0]*wa,t[1]*wa))[0]*d+u,c-t[1]*d]}function n(t){return(t=s.invert((t[0]-u)/d,(c-t[1])/d))&&[t[0]*Pa,t[1]*Pa]}function i(){s=_e(o=Ue(_,y,v),a);var t=a(p,x);return u=f-t[0]*d,c=g+t[1]*d,r()}function r(){return l&&(l.valid=!1,l=null),e}var a,o,s,u,c,l,h=Ne(function(t,e){return[(t=a(t,e))[0]*d+u,c-t[1]*d]}),d=150,f=480,g=250,p=0,x=0,_=0,y=0,v=0,m=Bo,S=bt,b=null,A=null;return e.stream=function(t){return l&&(l.valid=!1),(l=Be(m(o,h(S(t))))).valid=!0,l},e.clipAngle=function(t){return arguments.length?(m=null==t?(b=t,Bo):function(r){function f(t,e){return Math.cos(t)*Math.cos(e)>P}function g(t,e,n){var i=[1,0,0],r=oe(re(t),re(e)),a=ae(r,r),o=r[0],s=a-o*o;if(!s)return!n&&t;var u=P*a/s,c=-P*o/s,l=oe(i,r),h=ue(i,u);se(h,ue(r,c));var d=l,f=ae(h,d),g=ae(d,d),p=f*f-g*(ae(h,h)-1);if(!(p<0)){var x=Math.sqrt(p),_=ue(d,(-f-x)/g);if(se(_,h),_=le(_),!n)return _;var y,v=t[0],m=e[0],S=t[1],b=e[1];m<v&&(y=v,v=m,m=y);var A=m-v,T=ea(A-Sa)<va;if(!T&&b<S&&(y=S,S=b,b=y),T||A<va?T?0<S+b^_[1]<(ea(_[0]-v)<va?S:b):S<=_[1]&&_[1]<=b:Sa<A^(v<=_[0]&&_[0]<=m)){var w=ue(d,(-f+x)/g);return se(w,h),[_,le(w)]}}}function p(t,e){var n=x?r:Sa-r,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}var P=Math.cos(r),x=0<P,_=ea(P)>va;return be(f,function(s){var u,c,l,h,d;return{lineStart:function(){h=l=!1,d=1},point:function(t,e){var n,i=[t,e],r=f(t,e),a=x?r?0:p(t,e):r?p(t+(t<0?Sa:-Sa),e):0;if(!u&&(h=l=r)&&s.lineStart(),r!==l&&(n=g(u,i),(he(u,n)||he(i,n))&&(i[0]+=va,i[1]+=va,r=f(i[0],i[1]))),r!==l)d=0,r?(s.lineStart(),n=g(i,u),s.point(n[0],n[1])):(n=g(u,i),s.point(n[0],n[1]),s.lineEnd()),u=n;else if(_&&u&&x^r){var o;a&c||!(o=g(i,u,!0))||(d=0,x?(s.lineStart(),s.point(o[0][0],o[0][1]),s.point(o[1][0],o[1][1]),s.lineEnd()):(s.point(o[1][0],o[1][1]),s.lineEnd(),s.lineStart(),s.point(o[0][0],o[0][1])))}!r||u&&he(u,i)||s.point(i[0],i[1]),u=i,l=r,c=a},lineEnd:function(){l&&s.lineEnd(),u=null},clean:function(){return d|(h&&l)<<1}}},Ze(r,6*wa),x?[0,-r]:[-Sa,r-Sa])}((b=+t)*wa),r()):b},e.clipExtent=function(t){return arguments.length?(S=(A=t)?Ce(t[0][0],t[0][1],t[1][0],t[1][1]):bt,r()):A},e.scale=function(t){return arguments.length?(d=+t,i()):d},e.translate=function(t){return arguments.length?(f=+t[0],g=+t[1],i()):[f,g]},e.center=function(t){return arguments.length?(p=t[0]%360*wa,x=t[1]%360*wa,i()):[p*Pa,x*Pa]},e.rotate=function(t){return arguments.length?(_=t[0]%360*wa,y=t[1]%360*wa,v=2<t.length?t[2]%360*wa:0,i()):[_*Pa,y*Pa,v*Pa]},Br.rebind(e,h,"precision"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function Be(n){return ze(n,function(t,e){n.point(t*wa,e*wa)})}function Ye(t,e){return[t,e]}function je(t,e){return[Sa<t?t-ba:t<-Sa?t+ba:t,e]}function Ue(t,e,n){return t?e||n?_e(We(t),Qe(e,n)):We(t):e||n?Qe(e,n):je}function qe(n){return function(t,e){return[Sa<(t+=n)?t-ba:t<-Sa?t+ba:t,e]}}function We(t){var e=qe(t);return e.invert=qe(-t),e}function Qe(t,e){function n(t,e){var n=Math.cos(e),i=Math.cos(t)*n,r=Math.sin(t)*n,a=Math.sin(e),o=a*s+i*u;return[Math.atan2(r*c-o*l,i*s-a*u),$(o*c+r*l)]}var s=Math.cos(t),u=Math.sin(t),c=Math.cos(e),l=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),i=Math.cos(t)*n,r=Math.sin(t)*n,a=Math.sin(e),o=a*c-r*l;return[Math.atan2(r*c+a*l,i*s+o*u),$(o*s-i*u)]},n}function Ze(s,u){var c=Math.cos(s),l=Math.sin(s);return function(t,e,n,i){var r=n*u;null!=t?(t=Ke(c,t),e=Ke(c,e),(0<n?t<e:e<t)&&(t+=n*ba)):(t=s+n*ba,e=s-.5*r);for(var a,o=t;0<n?e<o:o<e;o-=r)i.point((a=le([c,-l*Math.cos(o),-l*Math.sin(o)]))[0],a[1])}}function Ke(t,e){var n=re(e);n[0]-=t,ce(n);var i=K(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-va)%(2*Math.PI)}function $e(t,e,n){var i=Br.range(t,e-va,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function Je(t,e,n){var i=Br.range(t,e-va,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function tn(t){return t.source}function en(t){return t.target}function nn(a,o){function t(t,e){var n=Math.cos(t),i=Math.cos(e),r=a(n*i);return[r*i*Math.sin(t),r*Math.sin(e)]}return t.invert=function(t,e){var n=Math.sqrt(t*t+e*e),i=o(n),r=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*r,n*a),Math.asin(n&&e*r/n)]},t}function rn(t,e){function n(t,e){0<o?e<-Ta+va&&(e=-Ta+va):Ta-va<e&&(e=Ta-va);var n=o/Math.pow(i(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}function i(t){return Math.tan(Sa/4+t/2)}var r=Math.cos(t),a=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),o=r*Math.pow(i(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,i=Q(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/i,1/a))-Ta]},n):on}function an(t,e){function n(t,e){var n=a-e;return[n*Math.sin(r*t),a-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),a=i/r+t;return ea(r)<va?Ye:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,a-Q(r)*Math.sqrt(t*t+n*n)]},n)}function on(t,e){return[t,Math.log(Math.tan(Sa/4+e/2))]}function sn(t){var r,a=Xe(t),o=a.scale,s=a.translate,u=a.clipExtent;return a.scale=function(){var t=o.apply(a,arguments);return t===a?r?a.clipExtent(null):a:t},a.translate=function(){var t=s.apply(a,arguments);return t===a?r?a.clipExtent(null):a:t},a.clipExtent=function(t){var e=u.apply(a,arguments);if(e===a){if(r=null==t){var n=Sa*o(),i=s();u([[i[0]-n,i[1]-n],[i[0]+n,i[1]+n]])}}else r&&(e=null);return e},a.clipExtent(null)}function un(t,e){return[Math.log(Math.tan(Sa/4+e/2)),-t]}function cn(t){return t[0]}function ln(t){return t[1]}function hn(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;r++){for(;1<i&&Z(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function dn(t,e){return t[0]-e[0]||t[1]-e[1]}function fn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function gn(t,e,n,i){var r=t[0],a=n[0],o=e[0]-r,s=i[0]-a,u=t[1],c=n[1],l=e[1]-u,h=i[1]-c,d=(s*(u-c)-h*(r-a))/(h*o-s*l);return[r+d*o,u+d*l]}function pn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function xn(){kn(this),this.edge=this.site=this.circle=null}function _n(t){var e=fs.pop()||new xn;return e.site=t,e}function yn(t){Cn(t),ls.remove(t),fs.push(t),kn(t)}function vn(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},a=t.P,o=t.N,s=[t];yn(t);for(var u=a;u.circle&&ea(n-u.circle.x)<va&&ea(i-u.circle.cy)<va;)a=u.P,s.unshift(u),yn(u),u=a;s.unshift(u),Cn(u);for(var c=o;c.circle&&ea(n-c.circle.x)<va&&ea(i-c.circle.cy)<va;)o=c.N,s.push(c),yn(c),c=o;s.push(c),Cn(c);var l,h=s.length;for(l=1;l<h;++l)c=s[l],u=s[l-1],Vn(c.edge,u.site,c.site,r);u=s[0],(c=s[h-1]).edge=En(u.site,c.site,null,r),Pn(u),Pn(c)}function mn(t){for(var e,n,i,r,a=t.x,o=t.y,s=ls._;s;)if(i=Sn(s,o)-a,va<i)s=s.L;else{if(r=a-bn(s,o),!(va<r)){-va<i?(e=s.P,n=s):-va<r?n=(e=s).N:e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=_n(t);if(ls.insert(e,u),e||n){if(e===n)return Cn(e),n=_n(e.site),ls.insert(u,n),u.edge=n.edge=En(e.site,u.site),Pn(e),void Pn(n);if(!n)return void(u.edge=En(e.site,u.site));Cn(e),Cn(n);var c=e.site,l=c.x,h=c.y,d=t.x-l,f=t.y-h,g=n.site,p=g.x-l,x=g.y-h,_=2*(d*x-f*p),y=d*d+f*f,v=p*p+x*x,m={x:(x*y-f*v)/_+l,y:(d*v-p*y)/_+h};Vn(n.edge,c,g,m),u.edge=En(c,t,null,m),n.edge=En(t,g,null,m),Pn(e),Pn(n)}}function Sn(t,e){var n=t.site,i=n.x,r=n.y,a=r-e;if(!a)return i;var o=t.P;if(!o)return-1/0;var s=(n=o.site).x,u=n.y,c=u-e;if(!c)return s;var l=s-i,h=1/a-1/c,d=l/c;return h?(-d+Math.sqrt(d*d-2*h*(l*l/(-2*c)-u+c/2+r-a/2)))/h+i:(i+s)/2}function bn(t,e){var n=t.N;if(n)return Sn(n,e);var i=t.site;return i.y===e?i.x:1/0}function An(t){this.site=t,this.edges=[]}function Tn(t,e){return e.angle-t.angle}function wn(){kn(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pn(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,a=n.site;if(i!==a){var o=r.x,s=r.y,u=i.x-o,c=i.y-s,l=a.x-o,h=2*(u*(x=a.y-s)-c*l);if(!(-ma<=h)){var d=u*u+c*c,f=l*l+x*x,g=(x*d-c*f)/h,p=(u*f-l*d)/h,x=p+s,_=gs.pop()||new wn;_.arc=t,_.site=r,_.x=g+o,_.y=x+Math.sqrt(g*g+p*p),_.cy=x,t.circle=_;for(var y=null,v=ds._;v;)if(_.y<v.y||_.y===v.y&&_.x<=v.x){if(!v.L){y=v.P;break}v=v.L}else{if(!v.R){y=v;break}v=v.R}ds.insert(y,_),y||(hs=_)}}}}function Cn(t){var e=t.circle;e&&(e.P||(hs=e.N),ds.remove(e),gs.push(e),kn(e),t.circle=null)}function Ln(t,e){var n=t.b;if(n)return!0;var i,r,a=t.a,o=e[0][0],s=e[1][0],u=e[0][1],c=e[1][1],l=t.l,h=t.r,d=l.x,f=l.y,g=h.x,p=h.y,x=(d+g)/2,_=(f+p)/2;if(p===f){if(x<o||s<=x)return;if(g<d){if(a){if(a.y>=c)return}else a={x:x,y:u};n={x:x,y:c}}else{if(a){if(a.y<u)return}else a={x:x,y:c};n={x:x,y:u}}}else if(r=_-(i=(d-g)/(p-f))*x,i<-1||1<i)if(g<d){if(a){if(a.y>=c)return}else a={x:(u-r)/i,y:u};n={x:(c-r)/i,y:c}}else{if(a){if(a.y<u)return}else a={x:(c-r)/i,y:c};n={x:(u-r)/i,y:u}}else if(f<p){if(a){if(a.x>=s)return}else a={x:o,y:i*o+r};n={x:s,y:i*s+r}}else{if(a){if(a.x<o)return}else a={x:s,y:i*s+r};n={x:o,y:i*o+r}}return t.a=a,t.b=n,!0}function Mn(t,e){this.l=t,this.r=e,this.a=this.b=null}function En(t,e,n,i){var r=new Mn(t,e);return us.push(r),n&&Vn(r,t,e,n),i&&Vn(r,e,t,i),cs[t.i].edges.push(new Gn(r,t,e)),cs[e.i].edges.push(new Gn(r,e,t)),r}function Vn(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Gn(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function Rn(){this._=null}function kn(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function In(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function On(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Dn(t){for(;t.L;)t=t.L;return t}function Nn(t,e){var n,i,r,a=t.sort(Fn).pop();for(us=[],cs=new Array(t.length),ls=new Rn,ds=new Rn;;)if(r=hs,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))a.x===n&&a.y===i||(cs[a.i]=new An(a),mn(a),n=a.x,i=a.y),a=t.pop();else{if(!r)break;vn(r.arc)}e&&(function(t){for(var e,n=us,i=Pe(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)Ln(e=n[r],t)&&i(e)&&!(ea(e.a.x-e.b.x)<va&&ea(e.a.y-e.b.y)<va)||(e.a=e.b=null,n.splice(r,1))}(e),function(t){for(var e,n,i,r,a,o,s,u,c,l,h=t[0][0],d=t[1][0],f=t[0][1],g=t[1][1],p=cs,x=p.length;x--;)if((a=p[x])&&a.prepare())for(u=(s=a.edges).length,o=0;o<u;)i=(l=s[o].end()).x,r=l.y,e=(c=s[++o%u].start()).x,n=c.y,(ea(i-e)>va||ea(r-n)>va)&&(s.splice(o,0,new Gn((_=a.site,y=l,v=ea(i-h)<va&&va<g-r?{x:h,y:ea(e-h)<va?n:g}:ea(r-g)<va&&va<d-i?{x:ea(n-g)<va?e:d,y:g}:ea(i-d)<va&&va<r-f?{x:d,y:ea(e-d)<va?n:f}:ea(r-f)<va&&va<i-h?{x:ea(n-f)<va?e:h,y:f}:null,m=void 0,(m=new Mn(_,null)).a=y,m.b=v,us.push(m),m),a.site,null)),++u);var _,y,v,m}(e));var o={cells:cs,edges:us};return ls=ds=us=cs=null,o}function Fn(t,e){return e.y-t.y||e.x-t.x}function zn(t){return t.x}function Xn(t){return t.y}function Hn(t,e){t=Br.rgb(t),e=Br.rgb(e);var n=t.r,i=t.g,r=t.b,a=e.r-n,o=e.g-i,s=e.b-r;return function(t){return"#"+pt(Math.round(n+a*t))+pt(Math.round(i+o*t))+pt(Math.round(r+s*t))}}function Bn(t,e){var n,i={},r={};for(n in t)n in e?i[n]=Un(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function Yn(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function jn(t,i){var e,n,r,a=xs.lastIndex=_s.lastIndex=0,o=-1,s=[],u=[];for(t+="",i+="";(e=xs.exec(t))&&(n=_s.exec(i));)(r=n.index)>a&&(r=i.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(e=e[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:Yn(e,n)})),a=_s.lastIndex;return a<i.length&&(r=i.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?u[0]?(i=u[0].x,function(t){return i(t)+""}):function(){return i}:(i=u.length,function(t){for(var e,n=0;n<i;++n)s[(e=u[n]).i]=e.x(t);return s.join("")})}function Un(t,e){for(var n,i=Br.interpolators.length;0<=--i&&!(n=Br.interpolators[i](t,e)););return n}function qn(t,e){var n,i=[],r=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)i.push(Un(t[n],e[n]));for(;n<a;++n)r[n]=t[n];for(;n<o;++n)r[n]=e[n];return function(t){for(n=0;n<s;++n)r[n]=i[n](t);return r}}function Wn(e){return function(t){return 1-e(1-t)}}function Qn(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Zn(t){return t*t}function Kn(t){return t*t*t}function $n(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Jn(t){return 1-Math.cos(t*Ta)}function ti(t){return Math.pow(2,10*(t-1))}function ei(t){return 1-Math.sqrt(1-t*t)}function ni(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function ii(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function ri(t){var e=[t.a,t.b],n=[t.c,t.d],i=oi(e),r=ai(e,n),a=oi(function(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Pa,this.translate=[t.e,t.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*Pa:0}function ai(t,e){return t[0]*e[0]+t[1]*e[1]}function oi(t){var e=Math.sqrt(ai(t,t));return e&&(t[0]/=e,t[1]/=e),e}function si(t,e){var i,r=[],a=[],n=Br.transform(t),o=Br.transform(e),s=n.translate,u=o.translate,c=n.rotate,l=o.rotate,h=n.skew,d=o.skew,f=n.scale,g=o.scale;return s[0]!=u[0]||s[1]!=u[1]?(r.push("translate(",null,",",null,")"),a.push({i:1,x:Yn(s[0],u[0])},{i:3,x:Yn(s[1],u[1])})):u[0]||u[1]?r.push("translate("+u+")"):r.push(""),c!=l?(180<c-l?l+=360:180<l-c&&(c+=360),a.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:Yn(c,l)})):l&&r.push(r.pop()+"rotate("+l+")"),h!=d?a.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:Yn(h,d)}):d&&r.push(r.pop()+"skewX("+d+")"),f[0]!=g[0]||f[1]!=g[1]?(i=r.push(r.pop()+"scale(",null,",",null,")"),a.push({i:i-4,x:Yn(f[0],g[0])},{i:i-2,x:Yn(f[1],g[1])})):1==g[0]&&1==g[1]||r.push(r.pop()+"scale("+g+")"),i=a.length,function(t){for(var e,n=-1;++n<i;)r[(e=a[n]).i]=e.x(t);return r.join("")}}function ui(e,n){return n=(n-=e=+e)||1/n,function(t){return(t-e)/n}}function ci(e,n){return n=(n-=e=+e)||1/n,function(t){return Math.max(0,Math.min(1,(t-e)/n))}}function li(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;for(var n=hi(t),i=hi(e),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function hi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),n=(t=n).parent;return e.push(t),e}function di(t){t.fixed|=2}function fi(t){t.fixed&=-7}function gi(t){t.fixed|=4,t.px=t.x,t.py=t.y}function pi(t){t.fixed&=-5}function xi(t,e){return Br.rebind(t,e,"sort","children","value"),(t.nodes=t).links=bi,t}function _i(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;0<=--i;)n.push(r[i])}function yi(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(a=t.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(t=i.pop());)e(t)}function vi(t){return t.children}function mi(t){return t.value}function Si(t,e){return e.value-t.value}function bi(t){return Br.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Ai(t){return t.x}function Ti(t){return t.y}function wi(t,e,n){t.y0=e,t.y=n}function Pi(t){return Br.range(t.length)}function Ci(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function Li(t){for(var e,n=1,i=0,r=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function Mi(t){return t.reduce(Ei,0)}function Ei(t,e){return t+e[1]}function Vi(t,e){return Gi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Gi(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,a=[];++n<=e;)a[n]=r*n+i;return a}function Ri(t){return[Br.min(t),Br.max(t)]}function ki(t,e){return t.value-e.value}function Ii(t,e){var n=t._pack_next;(t._pack_next=e)._pack_prev=t,(e._pack_next=n)._pack_prev=e}function Oi(t,e){(t._pack_next=e)._pack_prev=t}function Di(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return n*n+i*i<.999*r*r}function Ni(t){function e(t){l=Math.min(t.x-t.r,l),h=Math.max(t.x+t.r,h),d=Math.min(t.y-t.r,d),f=Math.max(t.y+t.r,f)}if((n=t.children)&&(c=n.length)){var n,i,r,a,o,s,u,c,l=1/0,h=-1/0,d=1/0,f=-1/0;if(n.forEach(Fi),(i=n[0]).x=-i.r,i.y=0,e(i),1<c&&((r=n[1]).x=r.r,r.y=0,e(r),2<c))for(Xi(i,r,a=n[2]),e(a),Ii(i,a),Ii(i._pack_prev=a,r),r=i._pack_next,o=3;o<c;o++){Xi(i,r,a=n[o]);var g=0,p=1,x=1;for(s=r._pack_next;s!==r;s=s._pack_next,p++)if(Di(s,a)){g=1;break}if(1==g)for(u=i._pack_prev;u!==s._pack_prev&&!Di(u,a);u=u._pack_prev,x++);g?(p<x||p==x&&r.r<i.r?Oi(i,r=s):Oi(i=u,r),o--):(Ii(i,a),e(r=a))}var _=(l+h)/2,y=(d+f)/2,v=0;for(o=0;o<c;o++)(a=n[o]).x-=_,a.y-=y,v=Math.max(v,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=v,n.forEach(zi)}}function Fi(t){t._pack_next=t._pack_prev=t}function zi(t){delete t._pack_next,delete t._pack_prev}function Xi(t,e,n){var i=t.r+n.r,r=e.x-t.x,a=e.y-t.y;if(i&&(r||a)){var o=e.r+n.r,s=r*r+a*a,u=.5+((i*=i)-(o*=o))/(2*s),c=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=t.x+u*r+c*a,n.y=t.y+u*a-c*r}else n.x=t.x+i,n.y=t.y}function Hi(t,e){return t.parent==e.parent?1:2}function Bi(t){var e=t.children;return e.length?e[0]:t.t}function Yi(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function ji(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Ui(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return r<0&&(n+=r/2,r=0),a<0&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function qi(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Wi(t){return t.rangeExtent?t.rangeExtent():qi(t.range())}function Qi(t,e,n,i){var r=n(t[0],t[1]),a=i(e[0],e[1]);return function(t){return a(r(t))}}function Zi(t,e){var n,i=0,r=t.length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function Ki(n,t,e,i){var r=[],a=[],o=0,s=Math.min(n.length,t.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=s;)r.push(e(n[o-1],n[o])),a.push(i(t[o-1],t[o]));return function(t){var e=Br.bisect(n,t,1,s)-1;return a[e](r[e](t))}}function $i(t,e){return Br.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ji(t,e){return Zi(t,function(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Ls}(tr(t,e)[2]))}function tr(t,e){null==e&&(e=10);var n=qi(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),a=e/i*r;return a<=.15?r*=10:a<=.35?r*=5:a<=.75&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function er(t,e){return Br.range.apply(Br,tr(t,e))}function nr(t,e,n){var i=tr(t,e);if(n){var r=qa.exec(n);if(r.shift(),"s"===r[8]){var a=Br.formatPrefix(Math.max(ea(i[0]),ea(i[1])));return r[7]||(r[7]="."+ir(a.scale(i[2]))),r[8]="f",n=Br.format(r.join("")),function(t){return n(a.scale(t))+a.symbol}}r[7]||(r[7]="."+function(t,e){var n=ir(e[2]);return t in Ms?Math.abs(n-ir(Math.max(ea(e[0]),ea(e[1]))))+ +("e"!==t):n-2*("%"===t)}(r[8],i)),n=r.join("")}else n=",."+ir(i[2])+"f";return Br.format(n)}function ir(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function rr(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ar(){return 0}function or(t){return t.innerRadius}function sr(t){return t.outerRadius}function ur(t){return t.startAngle}function cr(t){return t.endAngle}function lr(t){return t&&t.padAngle}function hr(t,e,n,i){return 0<(t-n)*e-(e-i)*t?0:1}function dr(t,e,n,i,r){var a=t[0]-e[0],o=t[1]-e[1],s=(r?i:-i)/Math.sqrt(a*a+o*o),u=s*o,c=-s*a,l=t[0]+u,h=t[1]+c,d=e[0]+u,f=e[1]+c,g=(l+d)/2,p=(h+f)/2,x=d-l,_=f-h,y=x*x+_*_,v=n-i,m=l*f-d*h,S=(_<0?-1:1)*Math.sqrt(v*v*y-m*m),b=(m*_-x*S)/y,A=(-m*x-_*S)/y,T=(m*_+x*S)/y,w=(-m*x+_*S)/y,P=b-g,C=A-p,L=T-g,M=w-p;return L*L+M*M<P*P+C*C&&(b=T,A=w),[[b-u,A-c],[b*n/v,A*n/v]]}function fr(c){function e(t){function e(){i.push("M",f(c(r),g))}for(var n,i=[],r=[],a=-1,o=t.length,s=St(l),u=St(h);++a<o;)d.call(this,n=t[a],a)?r.push([+s.call(this,n,a),+u.call(this,n,a)]):r.length&&(e(),r=[]);return r.length&&e(),i.length?i.join(""):null}var l=cn,h=ln,d=ye,f=gr,n=f.key,g=.7;return e.x=function(t){return arguments.length?(l=t,e):l},e.y=function(t){return arguments.length?(h=t,e):h},e.defined=function(t){return arguments.length?(d=t,e):d},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?f=t:(f=Ds.get(t)||gr).key,e):n},e.tension=function(t){return arguments.length?(g=t,e):g},e}function gr(t){return t.join("L")}function pr(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function xr(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function _r(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return gr(t);var n=t.length!=e.length,i="",r=t[0],a=t[1],o=e[0],s=o,u=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=t[1],u=2),1<e.length){s=e[1],a=t[u],u++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<e.length;c++,u++)a=t[u],s=e[c],i+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var l=t[u];i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+l[0]+","+l[1]}return i}function yr(t,e){for(var n,i=[],r=(1-e)/2,a=t[0],o=t[1],s=1,u=t.length;++s<u;)n=a,a=o,o=t[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function vr(t){if(t.length<3)return gr(t);var e=1,n=t.length,i=t[0],r=i[0],a=i[1],o=[r,r,r,(i=t[1])[0]],s=[a,a,a,i[1]],u=[r,",",a,"L",mr(zs,o),",",mr(zs,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Sr(u,o,s);return t.pop(),u.push("L",i),u.join("")}function mr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Sr(t,e,n){t.push("C",mr(Ns,e),",",mr(Ns,n),",",mr(Fs,e),",",mr(Fs,n),",",mr(zs,e),",",mr(zs,n))}function br(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ar(t){for(var e,n,i,r,a=[],o=function(t){for(var e=0,n=t.length-1,i=[],r=t[0],a=t[1],o=i[0]=br(r,a);++e<n;)i[e]=(o+(o=br(r=a,a=t[e+1])))/2;return i[e]=o,i}(t),s=-1,u=t.length-1;++s<u;)e=br(t[s],t[s+1]),ea(e)<va?o[s]=o[s+1]=0:9<(r=(n=o[s]/e)*n+(i=o[s+1]/e)*i)&&(r=3*e/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i);for(s=-1;++s<=u;)r=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function Tr(t){for(var e,n,i,r=-1,a=t.length;++r<a;)n=(e=t[r])[0],i=e[1]-Ta,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function wr(g){function e(t){function e(){a.push("M",m(g(s),A),b,S(g(o.reverse()),A),"Z")}for(var n,i,r,a=[],o=[],s=[],u=-1,c=t.length,l=St(p),h=St(_),d=p===x?function(){return i}:St(x),f=_===y?function(){return r}:St(y);++u<c;)v.call(this,n=t[u],u)?(o.push([i=+l.call(this,n,u),r=+h.call(this,n,u)]),s.push([+d.call(this,n,u),+f.call(this,n,u)])):o.length&&(e(),o=[],s=[]);return o.length&&e(),a.length?a.join(""):null}var p=cn,x=cn,_=0,y=ln,v=ye,m=gr,n=m.key,S=m,b="L",A=.7;return e.x=function(t){return arguments.length?(p=x=t,e):x},e.x0=function(t){return arguments.length?(p=t,e):p},e.x1=function(t){return arguments.length?(x=t,e):x},e.y=function(t){return arguments.length?(_=y=t,e):y},e.y0=function(t){return arguments.length?(_=t,e):_},e.y1=function(t){return arguments.length?(y=t,e):y},e.defined=function(t){return arguments.length?(v=t,e):v},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?m=t:(m=Ds.get(t)||gr).key,S=m.reverse||m,b=m.closed?"M":"L",e):n},e.tension=function(t){return arguments.length?(A=t,e):A},e}function Pr(t){return t.radius}function Cr(t){return[t.x,t.y]}function Lr(){return 64}function Mr(){return"circle"}function Er(t){var e=Math.sqrt(t/Sa);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Vr(t,e,n){return oa(t,Us),t.namespace=e,t.id=n,t}function Gr(t,i,r,a){var o=t.id,s=t.namespace;return N(t,"function"==typeof r?function(t,e,n){t[s][o].tween.set(i,a(r.call(t,t.__data__,e,n)))}:(r=a(r),function(t){t[s][o].tween.set(i,r)}))}function Rr(t){return null==t&&(t=""),function(){this.textContent=t}}function kr(t){return null==t?"__transition__":"__transition_"+t+"__"}function Ir(l,h,d,f,t){var g=l[d]||(l[d]={active:0,count:0}),p=g[f];if(!p){var x=t.time;p=g[f]={tween:new y,time:x,delay:t.delay,duration:t.duration,ease:t.ease},t=null,++g.count,Br.timer(function(t){function e(t){return g.active>f?r(!1):(g.active=f,p.event&&p.event.start.call(l,i,h),p.tween.forEach(function(t,e){(e=e.call(l,i,h))&&c.push(e)}),o=p.ease,a=p.duration,void Br.timer(function(){return u.c=n(t||1)?ye:n,1},0,x))}function n(t){if(g.active!==f)return r(!1);for(var e=t/a,n=o(e),i=c.length;0<i;)c[--i].call(l,n);return 1<=e?r(!0):void 0}function r(t){return p.event&&p.event[t?"end":"interrupt"].call(l,i,h),--g.count?delete g[f]:delete l[d],1}var a,o,i=l.__data__,s=p.delay,u=Ya,c=[];return u.t=s+x,s<=t?e(t-s):void(u.c=e)},0,x)}}function Or(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate("+(isFinite(e)?e:i(t))+",0)"})}function Dr(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate(0,"+(isFinite(e)?e:i(t))+")"})}function Nr(t){return t.toISOString()}function Fr(e,r,t){function o(t){return e(t)}function s(t,e){var n=(t[1]-t[0])/e,i=Br.bisect(eu,n);return i==eu.length?[r.year,tr(t.map(function(t){return t/31536e6}),e)[2]]:i?r[n/eu[i-1]<eu[i]/n?i-1:i]:[ru,tr(t,e)[2]]}return o.invert=function(t){return zr(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain(t),o):e.domain().map(zr)},o.nice=function(e,n){function i(t){return!isNaN(t)&&!e.range(t,zr(+t+1),n).length}var t=o.domain(),r=qi(t),a=null==e?s(r,10):"number"==typeof e&&s(r,e);return a&&(e=a[0],n=a[1]),o.domain(Zi(t,1<n?{floor:function(t){for(;i(t=e.floor(t));)t=zr(t-1);return t},ceil:function(t){for(;i(t=e.ceil(t));)t=zr(+t+1);return t}}:e))},o.ticks=function(t,e){var n=qi(o.domain()),i=null==t?s(n,10):"number"==typeof t?s(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],zr(+n[1]+1),e<1?1:e)},o.tickFormat=function(){return t},o.copy=function(){return Fr(e.copy(),r,t)},$i(o,e)}function zr(t){return new Date(t)}function Xr(t){return JSON.parse(t.responseText)}function Hr(t){var e=Ur.createRange();return e.selectNode(Ur.body),e.createContextualFragment(t.responseText)}var Br={version:"3.5.0"};Date.now||(Date.now=function(){return+new Date});var Yr=[].slice,jr=function(t){return Yr.call(t)},Ur=document,qr=Ur.documentElement,Wr=window;try{jr(qr.childNodes)[0].nodeType}catch(t){jr=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{Ur.createElement("div").style.setProperty("opacity",0,"")}catch(t){var Qr=Wr.Element.prototype,Zr=Qr.setAttribute,Kr=Qr.setAttributeNS,$r=Wr.CSSStyleDeclaration.prototype,Jr=$r.setProperty;Qr.setAttribute=function(t,e){Zr.call(this,t,e+"")},Qr.setAttributeNS=function(t,e,n){Kr.call(this,t,e,n+"")},$r.setProperty=function(t,e,n){Jr.call(this,t,e+"",n)}}Br.ascending=o,Br.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},Br.min=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i<=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&i<n&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&i<n&&(n=i)}return n},Br.max=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i<=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&n<i&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&n<i&&(n=i)}return n},Br.extent=function(t,e){var n,i,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=t[a])&&i<=i){n=r=i;break}for(;++a<o;)null!=(i=t[a])&&(i<n&&(n=i),r<i&&(r=i))}else{for(;++a<o;)if(null!=(i=e.call(t,t[a],a))&&i<=i){n=r=i;break}for(;++a<o;)null!=(i=e.call(t,t[a],a))&&(i<n&&(n=i),r<i&&(r=i))}return[n,r]},Br.sum=function(t,e){var n,i=0,r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)u(n=+t[a])&&(i+=n);else for(;++a<r;)u(n=+e.call(t,t[a],a))&&(i+=n);return i},Br.mean=function(t,e){var n,i=0,r=t.length,a=-1,o=r;if(1===arguments.length)for(;++a<r;)u(n=s(t[a]))?i+=n:--o;else for(;++a<r;)u(n=s(e.call(t,t[a],a)))?i+=n:--o;return o?i/o:void 0},Br.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],a=n-i;return a?r+a*(t[i]-r):r},Br.median=function(t,e){var n,i=[],r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)u(n=s(t[a]))&&i.push(n);else for(;++a<r;)u(n=s(e.call(t,t[a],a)))&&i.push(n);return i.length?Br.quantile(i.sort(o),.5):void 0};var ta=t(o);Br.bisectLeft=ta.left,Br.bisect=Br.bisectRight=ta.right,Br.bisector=function(n){return t(1===n.length?function(t,e){return o(n(t),e)}:n)},Br.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2&&(e=0));for(var i,r,a=n-e;a;)r=0|Math.random()*a--,i=t[a+e],t[a+e]=t[r+e],t[r+e]=i;return t},Br.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},Br.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(n<0?0:n);e<n;)r[e]=[i,i=t[++e]];return r},Br.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=Br.min(arguments,c),n=new Array(e);++t<e;)for(var i,r=-1,a=n[t]=new Array(i);++r<i;)a[r]=arguments[r][t];return n},Br.transpose=function(t){return Br.zip.apply(Br,t)},Br.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Br.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Br.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Br.merge=function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);0<=--r;)for(e=(i=t[r]).length;0<=--e;)n[--o]=i[e];return n};var ea=Math.abs;Br.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),1/0==(e-t)/n)throw new Error("infinite range");var i,r=[],a=function(t){for(var e=1;t*e%1;)e*=10;return e}(ea(n)),o=-1;if(t*=a,e*=a,(n*=a)<0)for(;(i=t+n*++o)>e;)r.push(i/a);else for(;(i=t+n*++o)<e;)r.push(i/a);return r},Br.map=function(t,e){var n=new y;if(t instanceof y)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(1===arguments.length)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e.call(t,i=t[r],r),i)}else for(var o in t)n.set(o,t[o]);return n};var na="__proto__",ia="\0";e(y,{has:r,get:function(t){return this._[n(t)]},set:function(t,e){return this._[n(t)]=e},remove:a,keys:l,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:i(e),value:this._[e]});return t},size:h,empty:d,forEach:function(t){for(var e in this._)t.call(this,i(e),this._[e])}}),Br.nest=function(){function h(n,t,i){if(i>=p.length)return f?f.call(g,t):d?t.sort(d):t;for(var e,r,a,o,s=-1,u=t.length,c=p[i++],l=new y;++s<u;)(o=l.get(e=c(r=t[s])))?o.push(r):l.set(e,[r]);return a=n?(r=n(),function(t,e){r.set(t,h(n,e,i))}):(r={},function(t,e){r[t]=h(n,e,i)}),l.forEach(a),r}var d,f,g={},p=[],e=[];return g.map=function(t,e){return h(e,t,0)},g.entries=function(t){return function n(t,i){if(i>=p.length)return t;var r=[],a=e[i++];return t.forEach(function(t,e){r.push({key:t,values:n(e,i)})}),a?r.sort(function(t,e){return a(t.key,e.key)}):r}(h(Br.map,t,0),0)},g.key=function(t){return p.push(t),g},g.sortKeys=function(t){return e[p.length-1]=t,g},g.sortValues=function(t){return d=t,g},g.rollup=function(t){return f=t,g},g},Br.set=function(t){var e=new f;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},e(f,{has:r,add:function(t){return this._[n(t+="")]=!0,t},remove:a,values:l,size:h,empty:d,forEach:function(t){for(var e in this._)t.call(this,i(e))}}),Br.behavior={},Br.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=g(t,e,e[n]);return t};var ra=["webkit","ms","moz","Moz","o","O"];Br.dispatch=function(){for(var t=new x,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=v(t);return t},x.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(0<=n&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},Br.event=null,Br.requote=function(t){return t.replace(aa,"\\$&")};var aa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,oa={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},sa=function(t,e){return e.querySelector(t)},ua=function(t,e){return e.querySelectorAll(t)},ca=qr.matches||qr[p(qr,"matchesSelector")],la=function(t,e){return ca.call(t,e)};"function"==typeof Sizzle&&(sa=function(t,e){return Sizzle(t,e)[0]||null},ua=Sizzle,la=Sizzle.matchesSelector),Br.selection=function(){return ga};var ha=Br.selection.prototype=[];ha.select=function(t){var e,n,i,r,a=[];t=b(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(i=this[o]).parentNode;for(var u=-1,c=i.length;++u<c;)(r=i[u])?(e.push(n=t.call(r,r.__data__,u,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return S(a)},ha.selectAll=function(t){var e,n,i=[];t=A(t);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],s=-1,u=o.length;++s<u;)(n=o[s])&&(i.push(e=jr(t.call(n,n.__data__,s,r))),e.parentNode=n);return S(i)};var da={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Br.ns={prefix:da,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&(n=t.slice(0,e),t=t.slice(e+1)),da.hasOwnProperty(n)?{space:da[n],local:t}:t}},ha.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=Br.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(T(e,t[e]));return this}return this.each(T(t,e))},ha.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=C(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!P(t[r]).test(e))return!1;return!0}for(e in t)this.each(L(e,t[e]));return this}return this.each(L(t,e))},ha.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(E(n,t[n],e));return this}if(i<2)return Wr.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(E(t,e,n))},ha.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(V(e,t[e]));return this}return this.each(V(t,e))},ha.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},ha.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},ha.append=function(t){return t=G(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ha.insert=function(t,e){return t=G(t),e=b(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},ha.remove=function(){return this.each(I)},ha.data=function(t,g){function e(t,e){var n,i,r,a=t.length,o=e.length,s=Math.min(a,o),u=new Array(o),c=new Array(o),l=new Array(a);if(g){var h,d=new y,f=new Array(a);for(n=-1;++n<a;)d.has(h=g.call(i=t[n],i.__data__,n))?l[n]=i:d.set(h,i),f[n]=h;for(n=-1;++n<o;)(i=d.get(h=g.call(e,r=e[n],n)))?!0!==i&&((u[n]=i).__data__=r):c[n]=O(r),d.set(h,!0);for(n=-1;++n<a;)!0!==d.get(f[n])&&(l[n]=t[n])}else{for(n=-1;++n<s;)i=t[n],r=e[n],i?(i.__data__=r,u[n]=i):c[n]=O(r);for(;n<o;++n)c[n]=O(e[n]);for(;n<a;++n)l[n]=t[n]}c.update=u,c.parentNode=u.parentNode=l.parentNode=t.parentNode,p.push(c),x.push(u),_.push(l)}var n,i,r=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++r<a;)(i=n[r])&&(t[r]=i.__data__);return t}var p=F([]),x=S([]),_=S([]);if("function"==typeof t)for(;++r<a;)e(n=this[r],t.call(n,n.parentNode.__data__,r));else for(;++r<a;)e(n=this[r],t);return x.enter=function(){return p},x.exit=function(){return _},x},ha.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ha.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=D(t));for(var a=0,o=this.length;a<o;a++){r.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;s<u;s++)(i=n[s])&&t.call(i,i.__data__,s,a)&&e.push(i)}return S(r)},ha.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,a=i[r];0<=--r;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},ha.sort=function(t){t=function(n){return arguments.length||(n=o),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},ha.each=function(i){return N(this,function(t,e,n){i.call(t,t.__data__,e,n)})},ha.call=function(t){var e=jr(arguments);return t.apply(e[0]=this,e),this},ha.empty=function(){return!this.node()},ha.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,r=n.length;i<r;i++){var a=n[i];if(a)return a}return null},ha.size=function(){var t=0;return N(this,function(){++t}),t};var fa=[];Br.selection.enter=F,(Br.selection.enter.prototype=fa).append=ha.append,fa.empty=ha.empty,fa.node=ha.node,fa.call=ha.call,fa.size=ha.size,fa.select=function(t){for(var e,n,i,r,a,o=[],s=-1,u=this.length;++s<u;){i=(r=this[s]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var c=-1,l=r.length;++c<l;)(a=r[c])?(e.push(i[c]=n=t.call(r.parentNode,a.__data__,c,s)),n.__data__=a.__data__):e.push(null)}return S(o)},fa.insert=function(t,e){return arguments.length<2&&(e=function(o){var s,u;return function(t,e,n){var i,r=o[n].update,a=r.length;for(n!=u&&(u=n,s=0),s<=e&&(s=e+1);!(i=r[s])&&++s<a;);return i}}(this)),ha.insert.call(this,t,e)},ha.transition=function(t){for(var e,n,i=Hs||++qs,r=kr(t),a=[],o=Bs||{time:Date.now(),ease:$n,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(e=[]);for(var c=this[s],l=-1,h=c.length;++l<h;)(n=c[l])&&Ir(n,l,r,i,o),e.push(n)}return Vr(a,r,i)},ha.interrupt=function(t){var e=kr(t);return this.each(function(){var t=this[e];t&&++t.active})},Br.select=function(t){var e=["string"==typeof t?sa(t,Ur):t];return e.parentNode=qr,S([e])},Br.selectAll=function(t){var e=jr("string"==typeof t?ua(t,Ur):t);return e.parentNode=qr,S([e])};var ga=Br.select(qr);ha.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(X(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(X(t,e,n))};var pa=Br.map({mouseenter:"mouseover",mouseleave:"mouseout"});pa.forEach(function(t){"on"+t in Ur&&pa.remove(t)});var xa="onselectstart"in Ur?null:p(qr.style,"userSelect"),_a=0;Br.mouse=function(t){return j(t,m())};var ya=/WebKit/.test(Wr.navigator.userAgent)?-1:0;Br.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=m().changedTouches),e)for(var i,r=0,a=e.length;r<a;++r)if((i=e[r]).identifier===n)return j(t,i)},Br.behavior.drag=function(){function e(){this.on("mousedown.drag",n).on("touchstart.drag",i)}function t(l,h,d,f,g){return function(){var i,t=Br.event.target,r=this.parentNode,a=p.of(this,arguments),o=0,s=l(),e=".drag"+(null==s?"":"-"+s),n=Br.select(d()).on(f+e,function(){var t,e,n=h(r,s);n&&(t=n[0]-c[0],e=n[1]-c[1],o|=t|e,a({type:"drag",x:(c=n)[0]+i[0],y:n[1]+i[1],dx:t,dy:e}))}).on(g+e,function(){h(r,s)&&(n.on(f+e,null).on(g+e,null),u(o&&Br.event.target===t),a({type:"dragend"}))}),u=Y(),c=h(r,s);i=x?[(i=x.apply(this,arguments)).x-c[0],i.y-c[1]]:[0,0],a({type:"dragstart"})}}var p=k(e,"drag","dragstart","dragend"),x=null,n=t(_,Br.mouse,W,"mousemove","mouseup"),i=t(U,Br.touch,q,"touchmove","touchend");return e.origin=function(t){return arguments.length?(x=t,e):x},Br.rebind(e,p,"on")},Br.touches=function(n,t){return arguments.length<2&&(t=m().touches),t?jr(t).map(function(t){var e=j(n,t);return e.identifier=t.identifier,e}):[]};var va=1e-6,ma=va*va,Sa=Math.PI,ba=2*Sa,Aa=ba-va,Ta=Sa/2,wa=Sa/180,Pa=180/Sa,Ca=Math.SQRT2;Br.interpolateZoom=function(t,e){function n(t){var e=t*_;if(x){var n=J(p),i=o/(2*d)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Ca*e+p)-function(t){return((t=Math.exp(t))-1/t)/2}(p));return[r+i*c,a+i*l,o*n/J(Ca*e+p)]}return[r+t*c,a+t*l,o*Math.exp(Ca*e)]}var r=t[0],a=t[1],o=t[2],i=e[0],s=e[1],u=e[2],c=i-r,l=s-a,h=c*c+l*l,d=Math.sqrt(h),f=(u*u-o*o+4*h)/(2*o*2*d),g=(u*u-o*o-4*h)/(2*u*2*d),p=Math.log(Math.sqrt(f*f+1)-f),x=Math.log(Math.sqrt(g*g+1)-g)-p,_=(x||Math.log(u/o))/Ca;return n.duration=1e3*_,n},Br.behavior.zoom=function(){function r(t){t.on(M,w).on(Ea+".zoom",n).on("dblclick.zoom",i).on(V,P)}function s(t){return[(t[0]-L.x)/L.k,(t[1]-L.y)/L.k]}function m(t){L.k=Math.max(x[0],Math.min(x[1],t))}function S(t,e){e=function(t){return[t[0]*L.k+L.x,t[1]*L.k+L.y]}(e),L.x+=t[0]-e[0],L.y+=t[1]-e[1]}function b(t,e,n,i){t.__chart__={x:L.x,y:L.y,k:L.k},m(Math.pow(2,i)),S(c=e,n),t=Br.select(t),0<_&&(t=t.transition().duration(_)),t.call(r.event)}function e(){d&&d.domain(h.range().map(function(t){return(t-L.x)/L.k}).map(h.invert)),g&&g.domain(f.range().map(function(t){return(t-L.y)/L.k}).map(f.invert))}function u(t){y++||t({type:"zoomstart"})}function A(t){e(),t({type:"zoom",scale:L.k,translate:[L.x,L.y]})}function T(t){--y||t({type:"zoomend"}),c=null}function w(){var t=this,e=Br.event.target,n=G.of(t,arguments),i=0,r=Br.select(Wr).on(v,function(){i=1,S(Br.mouse(t),a),A(n)}).on(E,function(){r.on(v,null).on(E,null),o(i&&Br.event.target===e),T(n)}),a=s(Br.mouse(t)),o=Y();z(t),u(n)}function P(){function l(){var t=Br.touches(f);return c=L.k,t.forEach(function(t){t.identifier in p&&(p[t.identifier]=s(t))}),t}function t(){var t=Br.event.target;Br.select(t).on(_,h).on(y,d),v.push(t);for(var e=Br.event.changedTouches,n=0,i=e.length;n<i;++n)p[e[n].identifier]=null;var r=l(),a=Date.now();if(1===r.length){if(a-C<500){var o=r[0];b(f,o,p[o.identifier],Math.floor(Math.log(L.k)/Math.LN2)+1),R()}C=a}else if(1<r.length){o=r[0];var s=r[1],u=o[0]-s[0],c=o[1]-s[1];x=u*u+c*c}}function h(){var t,e,n,i,r=Br.touches(f);z(f);for(var a=0,o=r.length;a<o;++a,i=null)if(n=r[a],i=p[n.identifier]){if(e)break;t=n,e=i}if(i){var s=(s=n[0]-t[0])*s+(s=n[1]-t[1])*s,u=x&&Math.sqrt(s/x);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],m(u*c)}C=null,S(t,e),A(g)}function d(){if(Br.event.touches.length){for(var t=Br.event.changedTouches,e=0,n=t.length;e<n;++e)delete p[t[e].identifier];for(var i in p)return void l()}Br.selectAll(v).on(r,null),a.on(M,w).on(V,P),o(),T(g)}var c,f=this,g=G.of(f,arguments),p={},x=0,r=".zoom-"+Br.event.changedTouches[0].identifier,_="touchmove"+r,y="touchend"+r,v=[],a=Br.select(f),o=Y();t(),u(g),a.on(M,null).on(V,t)}function n(){var t=G.of(this,arguments);l?clearTimeout(l):(a=s(c=o||Br.mouse(this)),z(this),u(t)),l=setTimeout(function(){l=null,T(t)},50),R(),m(Math.pow(2,.002*La())*L.k),S(c,a),A(t)}function i(){var t=Br.mouse(this),e=Math.log(L.k)/Math.LN2;b(this,t,s(t),Br.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var a,c,o,l,C,h,d,f,g,L={x:0,y:0,k:1},p=[960,500],x=Ma,_=250,y=0,M="mousedown.zoom",v="mousemove.zoom",E="mouseup.zoom",V="touchstart.zoom",G=k(r,"zoomstart","zoom","zoomend");return r.event=function(t){t.each(function(){var s=G.of(this,arguments),e=L;Hs?Br.select(this).transition().each("start.zoom",function(){L=this.__chart__||{x:0,y:0,k:1},u(s)}).tween("zoom:zoom",function(){var i=p[0],t=p[1],r=c?c[0]:i/2,a=c?c[1]:t/2,o=Br.interpolateZoom([(r-L.x)/L.k,(a-L.y)/L.k,i/L.k],[(r-e.x)/e.k,(a-e.y)/e.k,i/e.k]);return function(t){var e=o(t),n=i/e[2];this.__chart__=L={x:r-e[0]*n,y:a-e[1]*n,k:n},A(s)}}).each("interrupt.zoom",function(){T(s)}).each("end.zoom",function(){T(s)}):(this.__chart__=L,u(s),A(s),T(s))})},r.translate=function(t){return arguments.length?(L={x:+t[0],y:+t[1],k:L.k},e(),r):[L.x,L.y]},r.scale=function(t){return arguments.length?(L={x:L.x,y:L.y,k:+t},e(),r):L.k},r.scaleExtent=function(t){return arguments.length?(x=null==t?Ma:[+t[0],+t[1]],r):x},r.center=function(t){return arguments.length?(o=t&&[+t[0],+t[1]],r):o},r.size=function(t){return arguments.length?(p=t&&[+t[0],+t[1]],r):p},r.duration=function(t){return arguments.length?(_=+t,r):_},r.x=function(t){return arguments.length?(h=(d=t).copy(),L={x:0,y:0,k:1},r):d},r.y=function(t){return arguments.length?(f=(g=t).copy(),L={x:0,y:0,k:1},r):g},Br.rebind(r,G,"on")};var La,Ma=[0,1/0],Ea="onwheel"in Ur?(La=function(){return-Br.event.deltaY*(Br.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ur?(La=function(){return Br.event.wheelDelta},"mousewheel"):(La=function(){return-Br.event.detail},"MozMousePixelScroll");(Br.color=et).prototype.toString=function(){return this.rgb()+""};var Va=(Br.hsl=nt).prototype=new et;Va.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new nt(this.h,this.s,this.l/t)},Va.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new nt(this.h,this.s,t*this.l)},Va.rgb=function(){return it(this.h,this.s,this.l)};var Ga=(Br.hcl=rt).prototype=new et;Ga.brighter=function(t){return new rt(this.h,this.c,Math.min(100,this.l+Ra*(arguments.length?t:1)))},Ga.darker=function(t){return new rt(this.h,this.c,Math.max(0,this.l-Ra*(arguments.length?t:1)))},Ga.rgb=function(){return at(this.h,this.c,this.l).rgb()},Br.lab=ot;var Ra=18,ka=.95047,Ia=1,Oa=1.08883,Da=ot.prototype=new et;Da.brighter=function(t){return new ot(Math.min(100,this.l+Ra*(arguments.length?t:1)),this.a,this.b)},Da.darker=function(t){return new ot(Math.max(0,this.l-Ra*(arguments.length?t:1)),this.a,this.b)},Da.rgb=function(){return st(this.l,this.a,this.b)};var Na=(Br.rgb=dt).prototype=new et;Na.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b;return e||n||i?(e&&e<30&&(e=30),n&&n<30&&(n=30),i&&i<30&&(i=30),new dt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new dt(30,30,30)},Na.darker=function(t){return new dt((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},Na.hsl=function(){return _t(this.r,this.g,this.b)},Na.toString=function(){return"#"+pt(this.r)+pt(this.g)+pt(this.b)};var Fa=Br.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Fa.forEach(function(t,e){Fa.set(t,ft(e))}),Br.functor=St,Br.xhr=At(bt),Br.dsv=function(r,a){function o(t,e,n){arguments.length<3&&(n=e,e=null);var i=Tt(t,a,null==e?s:u(e),n);return i.row=function(t){return arguments.length?i.response(null==(e=t)?s:u(t)):e},i}function s(t){return o.parse(t.responseText)}function u(e){return function(t){return o.parse(t.responseText,e)}}function e(t){return t.map(c).join(r)}function c(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var n=new RegExp('["'+r+"\n]"),d=r.charCodeAt(0);return o.parse=function(t,i){var r;return o.parseRows(t,function(t,e){if(r)return r(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=i?function(t,e){return i(n(t),e)}:n})},o.parseRows=function(r,t){function e(){if(u<=c)return s;if(a)return a=!1,o;var t=c;if(34===r.charCodeAt(t)){for(var e=t;e++<u;)if(34===r.charCodeAt(e)){if(34!==r.charCodeAt(e+1))break;++e}return c=e+2,13===(n=r.charCodeAt(e+1))?(a=!0,10===r.charCodeAt(e+2)&&++c):10===n&&(a=!0),r.slice(t+1,e).replace(/""/g,'"')}for(;c<u;){var n,i=1;if(10===(n=r.charCodeAt(c++)))a=!0;else if(13===n)a=!0,10===r.charCodeAt(c)&&(++c,++i);else if(n!==d)continue;return r.slice(t,c-i)}return r.slice(t)}for(var n,a,o={},s={},i=[],u=r.length,c=0,l=0;(n=e())!==s;){for(var h=[];n!==o&&n!==s;)h.push(n),n=e();t&&null==(h=t(h,l++))||i.push(h)}return i},o.format=function(t){if(Array.isArray(t[0]))return o.formatRows(t);var n=new f,i=[];return t.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(c).join(r)].concat(t.map(function(e){return i.map(function(t){return c(e[t])}).join(r)})).join("\n")},o.formatRows=function(t){return t.map(e).join("\n")},o},Br.csv=Br.dsv(",","text/csv"),Br.tsv=Br.dsv("\t","text/tab-separated-values");var za,Xa,Ha,Ba,Ya,ja=Wr[p(Wr,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Br.timer=function(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var r={c:t,t:n+e,f:!1,n:null};Xa?Xa.n=r:za=r,Xa=r,Ha||(Ba=clearTimeout(Ba),Ha=1,ja(wt))},Br.timer.flush=function(){Pt(),Ct()},Br.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ua=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*ea(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}});Br.formatPrefix=function(t,e){var n=0;return t&&(t<0&&(t*=-1),e&&(t=Br.round(t,Lt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ua[8+n/3]};var qa=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Wa=Br.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Br.round(t,Lt(t,e))).toFixed(Math.max(0,Math.min(20,Lt(t*(1+1e-15),e))))}}),Qa=Br.time={},Za=Date;Et.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ka.setUTCDate.apply(this._,arguments)},setDay:function(){Ka.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ka.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ka.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ka.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ka.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ka.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ka.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ka.setTime.apply(this._,arguments)}};var Ka=Date.prototype;Qa.year=Vt(function(t){return(t=Qa.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Qa.years=Qa.year.range,Qa.years.utc=Qa.year.utc.range,Qa.day=Vt(function(t){var e=new Za(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Qa.days=Qa.day.range,Qa.days.utc=Qa.day.utc.range,Qa.dayOfYear=function(t){var e=Qa.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=Qa[t]=Vt(function(t){return(t=Qa.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=Qa.year(t).getDay();return Math.floor((Qa.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});Qa[t+"s"]=e.range,Qa[t+"s"].utc=e.utc.range,Qa[t+"OfYear"]=function(t){var e=Qa.year(t).getDay();return Math.floor((Qa.dayOfYear(t)+(e+n)%7)/7)}}),Qa.week=Qa.sunday,Qa.weeks=Qa.sunday.range,Qa.weeks.utc=Qa.sunday.utc.range,Qa.weekOfYear=Qa.sundayOfYear;var $a={"-":"",_:" ",0:"0"},Ja=/^\s*\d+/,to=/^%/;Br.locale=function(t){return{numberFormat:function(t){var T=t.decimal,s=t.thousands,u=t.grouping,i=t.currency,w=u&&s?function(t,e){for(var n=t.length,i=[],r=0,a=u[0],o=0;0<n&&0<a&&(e<o+a+1&&(a=Math.max(1,e-o)),i.push(t.substring(n-=a,n+a)),!((o+=a+1)>e));)a=u[r=(r+1)%u.length];return i.reverse().join(s)}:bt;return function(t){var e=qa.exec(t),l=e[1]||" ",h=e[2]||">",d=e[3]||"-",n=e[4]||"",f=e[5],g=+e[6],p=e[7],x=e[8],_=e[9],y=1,v="",m="",S=!1,b=!0;switch(x=x&&+x.substring(1),(f||"0"===l&&"="===h)&&(f=l="0",h="="),_){case"n":p=!0,_="g";break;case"%":y=100,m="%",_="f";break;case"p":y=100,m="%",_="r";break;case"b":case"o":case"x":case"X":"#"===n&&(v="0"+_.toLowerCase());case"c":b=!1;case"d":S=!0,x=0;break;case"s":y=-1,_="r"}"$"===n&&(v=i[0],m=i[1]),"r"!=_||x||(_="g"),null!=x&&("g"==_?x=Math.max(1,Math.min(21,x)):"e"!=_&&"f"!=_||(x=Math.max(0,Math.min(20,x)))),_=Wa.get(_)||Mt;var A=f&&p;return function(t){var e=m;if(S&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===d?"":d;if(y<0){var i=Br.formatPrefix(t,x);t=i.scale(t),e=i.symbol+m}else t*=y;var r,a,o=(t=_(t,x)).lastIndexOf(".");if(o<0){var s=b?t.lastIndexOf("e"):-1;a=s<0?(r=t,""):(r=t.substring(0,s),t.substring(s))}else r=t.substring(0,o),a=T+t.substring(o+1);!f&&p&&(r=w(r,1/0));var u=v.length+r.length+a.length+(A?0:n.length),c=u<g?new Array(u=g-u+1).join(l):"";return A&&(r=w(c+r,c.length?g-a.length:1/0)),n+=v,t=r+a,("<"===h?n+t+c:">"===h?c+n+t:"^"===h?c.substring(0,u>>=1)+n+t+c.substring(u):n+(A?t:c+t))+e}}}(t),timeFormat:function(t){function i(s){function t(t){for(var e,n,i,r=[],a=-1,o=0;++a<u;)37===s.charCodeAt(a)&&(r.push(s.slice(o,a)),null!=(n=$a[e=s.charAt(++a)])&&(e=s.charAt(++a)),(i=m[e])&&(e=i(t,null==n?"e"===e?" ":"0":n)),r.push(e),o=a+1);return r.push(s.slice(o,a)),r.join("")}var u=s.length;return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(r(e,s,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var n=null!=e.Z&&Za!==Et,i=new(n?Et:Za);return"j"in e?i.setFullYear(e.y,0,e.j):"w"in e&&("W"in e||"U"in e)?(i.setFullYear(e.y,0,1),i.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(i.getDay()+5)%7:e.w+7*e.U-(i.getDay()+6)%7)):i.setFullYear(e.y,e.m,e.d),i.setHours(e.H+(0|e.Z/100),e.M+e.Z%100,e.S,e.L),n?i._:i},t.toString=function(){return s},t}function r(t,e,n,i){for(var r,a,o,s=0,u=e.length,c=n.length;s<u;){if(c<=i)return-1;if(37===(r=e.charCodeAt(s++))){if(o=e.charAt(s++),!(a=S[o in $a?e.charAt(s++):o])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}var e=t.dateTime,n=t.date,a=t.time,o=t.periods,s=t.days,u=t.shortDays,c=t.months,l=t.shortMonths;i.multi=(i.utc=function(t){function e(t){try{var e=new(Za=Et);return e._=t,n(e)}finally{Za=Date}}var n=i(t);return e.parse=function(t){try{Za=Et;var e=n.parse(t);return e&&e._}finally{Za=Date}},e.toString=n.toString,e}).multi=Kt;var h=Br.map(),d=kt(s),f=It(s),g=kt(u),p=It(u),x=kt(c),_=It(c),y=kt(l),v=It(l);o.forEach(function(t,e){h.set(t.toLowerCase(),e)});var m={a:function(t){return u[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return c[t.getMonth()]},c:i(e),d:function(t,e){return Rt(t.getDate(),e,2)},e:function(t,e){return Rt(t.getDate(),e,2)},H:function(t,e){return Rt(t.getHours(),e,2)},I:function(t,e){return Rt(t.getHours()%12||12,e,2)},j:function(t,e){return Rt(1+Qa.dayOfYear(t),e,3)},L:function(t,e){return Rt(t.getMilliseconds(),e,3)},m:function(t,e){return Rt(t.getMonth()+1,e,2)},M:function(t,e){return Rt(t.getMinutes(),e,2)},p:function(t){return o[+(12<=t.getHours())]},S:function(t,e){return Rt(t.getSeconds(),e,2)},U:function(t,e){return Rt(Qa.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Rt(Qa.mondayOfYear(t),e,2)},x:i(n),X:i(a),y:function(t,e){return Rt(t.getFullYear()%100,e,2)},Y:function(t,e){return Rt(t.getFullYear()%1e4,e,4)},Z:Qt,"%":function(){return"%"}},S={a:function(t,e,n){g.lastIndex=0;var i=g.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){d.lastIndex=0;var i=d.exec(e.slice(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){y.lastIndex=0;var i=y.exec(e.slice(n));return i?(t.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){x.lastIndex=0;var i=x.exec(e.slice(n));return i?(t.m=_.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,n){return r(t,m.c.toString(),e,n)},d:Bt,e:Bt,H:jt,I:jt,j:Yt,L:Wt,m:Ht,M:Ut,p:function(t,e,n){var i=h.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:qt,U:Dt,w:Ot,W:Nt,x:function(t,e,n){return r(t,m.x.toString(),e,n)},X:function(t,e,n){return r(t,m.X.toString(),e,n)},y:zt,Y:Ft,Z:Xt,"%":Zt};return i}(t)}};var eo=Br.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Br.format=eo.numberFormat,Br.geo={},$t.prototype={s:0,t:0,add:function(t){Jt(t,this.t,no),Jt(no.s,this.s,this),this.s?this.t+=no.t:this.s=no.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var no=new $t;Br.geo.stream=function(t,e){t&&io.hasOwnProperty(t.type)?io[t.type](t,e):te(t,e)};var io={Feature:function(t,e){te(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)te(n[i].geometry,e)}},ro={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){ee(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ee(n[i],e,0)},Polygon:function(t,e){ne(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ne(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)te(n[i],e)}};Br.geo.area=function(t){return ao=0,Br.geo.stream(t,mo),ao};var ao,oo,so,uo,co,lo,ho,fo,go,po,xo,_o,yo,vo=new $t,mo={sphere:function(){ao+=4*Sa},point:_,lineStart:_,lineEnd:_,polygonStart:function(){vo.reset(),mo.lineStart=ie},polygonEnd:function(){var t=2*vo;ao+=t<0?4*Sa+t:t,mo.lineStart=mo.lineEnd=mo.point=_}};function So(t,e){xo.push(_o=[oo=t,uo=t]),e<so&&(so=e),co<e&&(co=e)}function bo(t,e){var n=re([t*wa,e*wa]);if(go){var i=oe(go,n),r=oe([i[1],-i[0],0],i);ce(r),r=le(r);var a=t-lo,o=0<a?1:-1,s=r[0]*Pa*o,u=180<ea(a);if(u^(o*lo<s&&s<o*t)){var c=r[1]*Pa;co<c&&(co=c)}else if(u^(o*lo<(s=(s+360)%360-180)&&s<o*t)){(c=-r[1]*Pa)<so&&(so=c)}else e<so&&(so=e),co<e&&(co=e);u?t<lo?Lo(oo,t)>Lo(oo,uo)&&(uo=t):Lo(t,uo)>Lo(oo,uo)&&(oo=t):oo<=uo?(t<oo&&(oo=t),uo<t&&(uo=t)):lo<t?Lo(oo,t)>Lo(oo,uo)&&(uo=t):Lo(t,uo)>Lo(oo,uo)&&(oo=t)}else So(t,e);go=n,lo=t}function Ao(){yo.point=bo}function To(){_o[0]=oo,_o[1]=uo,yo.point=So,go=null}function wo(t,e){if(go){var n=t-lo;po+=180<ea(n)?n+(0<n?360:-360):n}else ho=t,fo=e;mo.point(t,e),bo(t,e)}function Po(){mo.lineStart()}function Co(){wo(ho,fo),mo.lineEnd(),ea(po)>va&&(oo=-(uo=180)),_o[0]=oo,_o[1]=uo,go=null}function Lo(t,e){return(e-=t)<0?e+360:e}function Mo(t,e){return t[0]-e[0]}function Eo(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}Br.geo.bounds=(yo={point:So,lineStart:Ao,lineEnd:To,polygonStart:function(){yo.point=wo,yo.lineStart=Po,yo.lineEnd=Co,po=0,mo.polygonStart()},polygonEnd:function(){mo.polygonEnd(),yo.point=So,yo.lineStart=Ao,yo.lineEnd=To,vo<0?(oo=-(uo=180),so=-(co=90)):va<po?co=90:po<-va&&(so=-90),_o[0]=oo,_o[1]=uo}},function(t){if(co=uo=-(oo=so=1/0),xo=[],Br.geo.stream(t,yo),a=xo.length){xo.sort(Mo);for(var e=1,n=[s=xo[0]];e<a;++e)Eo((r=xo[e])[0],s)||Eo(r[1],s)?(Lo(s[0],r[1])>Lo(s[0],s[1])&&(s[1]=r[1]),Lo(r[0],s[1])>Lo(s[0],s[1])&&(s[0]=r[0])):n.push(s=r);for(var i,r,a,o=-1/0,s=(e=0,n[a=n.length-1]);e<=a;s=r,++e)r=n[e],(i=Lo(s[1],r[0]))>o&&(o=i,oo=r[0],uo=s[1])}return xo=_o=null,1/0===oo||1/0===so?[[NaN,NaN],[NaN,NaN]]:[[oo,so],[uo,co]]}),Br.geo.centroid=function(t){Vo=Go=Ro=ko=Io=Oo=Do=No=Fo=zo=Xo=0,Br.geo.stream(t,Ho);var e=Fo,n=zo,i=Xo,r=e*e+n*n+i*i;return r<ma&&(e=Oo,n=Do,i=No,Go<va&&(e=Ro,n=ko,i=Io),(r=e*e+n*n+i*i)<ma)?[NaN,NaN]:[Math.atan2(n,e)*Pa,$(i/Math.sqrt(r))*Pa]};var Vo,Go,Ro,ko,Io,Oo,Do,No,Fo,zo,Xo,Ho={sphere:_,point:de,lineStart:ge,lineEnd:pe,polygonStart:function(){Ho.lineStart=xe},polygonEnd:function(){Ho.lineStart=ge}},Bo=be(ye,function(r){var a,o=NaN,s=NaN,u=NaN;return{lineStart:function(){r.lineStart(),a=1},point:function(t,e){var n=0<t?Sa:-Sa,i=ea(t-o);ea(i-Sa)<va?(r.point(o,s=0<(s+e)/2?Ta:-Ta),r.point(u,s),r.lineEnd(),r.lineStart(),r.point(n,s),r.point(t,s),a=0):u!==n&&Sa<=i&&(ea(o-u)<va&&(o-=u*va),ea(t-n)<va&&(t-=n*va),s=function(t,e,n,i){var r,a,o=Math.sin(t-n);return ea(o)>va?Math.atan((Math.sin(e)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*a*o)):(e+i)/2}(o,s,t,e),r.point(u,s),r.lineEnd(),r.lineStart(),r.point(n,s),a=0),r.point(o=t,s=e),u=n},lineEnd:function(){r.lineEnd(),o=s=NaN},clean:function(){return 2-a}}},function(t,e,n,i){var r;if(null==t)r=n*Ta,i.point(-Sa,r),i.point(0,r),i.point(Sa,r),i.point(Sa,0),i.point(Sa,-r),i.point(0,-r),i.point(-Sa,-r),i.point(-Sa,0),i.point(-Sa,r);else if(ea(t[0]-e[0])>va){var a=t[0]<e[0]?Sa:-Sa;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])},[-Sa,-Sa/2]),Yo=1e9;Br.geo.clipExtent=function(){var e,n,i,r,a,o,s={stream:function(t){return a&&(a.valid=!1),(a=o(t)).valid=!0,a},extent:function(t){return arguments.length?(o=Ce(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),a&&(a.valid=!1,a=null),s):[[e,n],[i,r]]}};return s.extent([[0,0],[960,500]])},(Br.geo.conicEqualArea=function(){return Le(Me)}).raw=Me,Br.geo.albers=function(){return Br.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Br.geo.albersUsa=function(){function r(t){var e=t[0],n=t[1];return i=null,a(e,n),i||(o(e,n),i)||s(e,n),i}var i,a,o,s,u=Br.geo.albers(),c=Br.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Br.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){i=[t,e]}};return r.invert=function(t){var e=u.scale(),n=u.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(.12<=r&&r<.234&&-.425<=i&&i<-.214?c:.166<=r&&r<.234&&-.214<=i&&i<-.115?l:u).invert(t)},r.stream=function(t){var n=u.stream(t),i=c.stream(t),r=l.stream(t);return{point:function(t,e){n.point(t,e),i.point(t,e),r.point(t,e)},sphere:function(){n.sphere(),i.sphere(),r.sphere()},lineStart:function(){n.lineStart(),i.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),i.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),i.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),i.polygonEnd(),r.polygonEnd()}}},r.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),l.precision(t),r):u.precision()},r.scale=function(t){return arguments.length?(u.scale(t),c.scale(.35*t),l.scale(t),r.translate(u.translate())):u.scale()},r.translate=function(t){if(!arguments.length)return u.translate();var e=u.scale(),n=+t[0],i=+t[1];return a=u.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(h).point,o=c.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+va,i+.12*e+va],[n-.214*e-va,i+.234*e-va]]).stream(h).point,s=l.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+va,i+.166*e+va],[n-.115*e-va,i+.234*e-va]]).stream(h).point,r},r.scale(1070)};var jo,Uo,qo,Wo,Qo,Zo,Ko={point:_,lineStart:_,lineEnd:_,polygonStart:function(){Uo=0,Ko.lineStart=Ee},polygonEnd:function(){Ko.lineStart=Ko.lineEnd=Ko.point=_,jo+=ea(Uo/2)}},$o={point:function(t,e){t<qo&&(qo=t),Qo<t&&(Qo=t),e<Wo&&(Wo=e),Zo<e&&(Zo=e)},lineStart:_,lineEnd:_,polygonStart:_,polygonEnd:_},Jo={point:Re,lineStart:ke,lineEnd:Ie,polygonStart:function(){Jo.lineStart=Oe},polygonEnd:function(){Jo.point=Re,Jo.lineStart=ke,Jo.lineEnd=Ie}};Br.geo.path=function(){function e(t){return t&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),s&&s.valid||(s=a(o)),Br.geo.stream(t,s)),o.result()}function n(){return s=null,e}var i,r,a,o,s,u=4.5;return e.area=function(t){return jo=0,Br.geo.stream(t,a(Ko)),jo},e.centroid=function(t){return Ro=ko=Io=Oo=Do=No=Fo=zo=Xo=0,Br.geo.stream(t,a(Jo)),Xo?[Fo/Xo,zo/Xo]:No?[Oo/No,Do/No]:Io?[Ro/Io,ko/Io]:[NaN,NaN]},e.bounds=function(t){return Qo=Zo=-(qo=Wo=1/0),Br.geo.stream(t,a($o)),[[qo,Wo],[Qo,Zo]]},e.projection=function(t){return arguments.length?(a=(i=t)?t.stream||function(n){var e=Ne(function(t,e){return n([t*Pa,e*Pa])});return function(t){return Be(e(t))}}(t):bt,n()):i},e.context=function(t){return arguments.length?(o=null==(r=t)?new Ve:new De(t),"function"!=typeof u&&o.pointRadius(u),n()):r},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(o.pointRadius(+t),+t),e):u},e.projection(Br.geo.albersUsa()).context(null)},Br.geo.transform=function(i){return{stream:function(t){var e=new Fe(t);for(var n in i)e[n]=i[n];return e}}},Fe.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Br.geo.projection=Xe,Br.geo.projectionMutator=He,(Br.geo.equirectangular=function(){return Xe(Ye)}).raw=Ye.invert=Ye,Br.geo.rotation=function(e){function t(t){return(t=e(t[0]*wa,t[1]*wa))[0]*=Pa,t[1]*=Pa,t}return e=Ue(e[0]%360*wa,e[1]*wa,2<e.length?e[2]*wa:0),t.invert=function(t){return(t=e.invert(t[0]*wa,t[1]*wa))[0]*=Pa,t[1]*=Pa,t},t},je.invert=Ye,Br.geo.circle=function(){function e(){var t="function"==typeof a?a.apply(this,arguments):a,n=Ue(-t[0]*wa,-t[1]*wa,0).invert,i=[];return r(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=Pa,t[1]*=Pa}}),{type:"Polygon",coordinates:[i]}}var n,r,a=[0,0],i=6;return e.origin=function(t){return arguments.length?(a=t,e):a},e.angle=function(t){return arguments.length?(r=Ze((n=+t)*wa,i*wa),e):n},e.precision=function(t){return arguments.length?(r=Ze(n*wa,(i=+t)*wa),e):i},e.angle(90)},Br.geo.distance=function(t,e){var n,i=(e[0]-t[0])*wa,r=t[1]*wa,a=e[1]*wa,o=Math.sin(i),s=Math.cos(i),u=Math.sin(r),c=Math.cos(r),l=Math.sin(a),h=Math.cos(a);return Math.atan2(Math.sqrt((n=h*o)*n+(n=c*l-u*h*s)*n),u*l+c*h*s)},Br.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Br.range(Math.ceil(a/x)*x,r,x).map(d).concat(Br.range(Math.ceil(c/_)*_,u,_).map(f)).concat(Br.range(Math.ceil(i/g)*g,n,g).filter(function(t){return ea(t%x)>va}).map(l)).concat(Br.range(Math.ceil(s/p)*p,o,p).filter(function(t){return ea(t%_)>va}).map(h))}var n,i,r,a,o,s,u,c,l,h,d,f,g=10,p=g,x=90,_=360,y=2.5;return e.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(f(u).slice(1),d(r).reverse().slice(1),f(c).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],r=+t[1][0],c=+t[0][1],u=+t[1][1],r<a&&(t=a,a=r,r=t),u<c&&(t=c,c=u,u=t),e.precision(y)):[[a,c],[r,u]]},e.minorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],n<i&&(t=i,i=n,n=t),o<s&&(t=s,s=o,o=t),e.precision(y)):[[i,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(x=+t[0],_=+t[1],e):[x,_]},e.minorStep=function(t){return arguments.length?(g=+t[0],p=+t[1],e):[g,p]},e.precision=function(t){return arguments.length?(y=+t,l=$e(s,o,90),h=Je(i,n,y),d=$e(c,u,90),f=Je(a,r,y),e):y},e.majorExtent([[-180,-90+va],[180,90-va]]).minorExtent([[-180,-80-va],[180,80+va]])},Br.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),i||a.apply(this,arguments)]}}var n,i,r=tn,a=en;return e.distance=function(){return Br.geo.distance(n||r.apply(this,arguments),i||a.apply(this,arguments))},e.source=function(t){return arguments.length?(n="function"==typeof(r=t)?null:t,e):r},e.target=function(t){return arguments.length?(i="function"==typeof(a=t)?null:t,e):a},e.precision=function(){return arguments.length?e:0},e},Br.geo.interpolate=function(t,e){return function(t,e,n,i){var r=Math.cos(e),o=Math.sin(e),a=Math.cos(i),s=Math.sin(i),u=r*Math.cos(t),c=r*Math.sin(t),l=a*Math.cos(n),h=a*Math.sin(n),d=2*Math.asin(Math.sqrt(tt(i-e)+r*a*tt(n-t))),f=1/Math.sin(d),g=d?function(t){var e=Math.sin(t*=d)*f,n=Math.sin(d-t)*f,i=n*u+e*l,r=n*c+e*h,a=n*o+e*s;return[Math.atan2(r,i)*Pa,Math.atan2(a,Math.sqrt(i*i+r*r))*Pa]}:function(){return[t*Pa,e*Pa]};return g.distance=d,g}(t[0]*wa,t[1]*wa,e[0]*wa,e[1]*wa)},Br.geo.length=function(t){return ts=0,Br.geo.stream(t,es),ts};var ts,es={sphere:_,point:_,lineStart:function(){function n(t,e){var n=Math.sin(e*=wa),i=Math.cos(e),r=ea((t*=wa)-o),a=Math.cos(r);ts+=Math.atan2(Math.sqrt((r=i*Math.sin(r))*r+(r=u*n-s*i*a)*r),s*n+u*i*a),o=t,s=n,u=i}var o,s,u;es.point=function(t,e){o=t*wa,s=Math.sin(e*=wa),u=Math.cos(e),es.point=n},es.lineEnd=function(){es.point=es.lineEnd=_}},lineEnd:_,polygonStart:_,polygonEnd:_},ns=nn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Br.geo.azimuthalEqualArea=function(){return Xe(ns)}).raw=ns;var is=nn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},bt);(Br.geo.azimuthalEquidistant=function(){return Xe(is)}).raw=is,(Br.geo.conicConformal=function(){return Le(rn)}).raw=rn,(Br.geo.conicEquidistant=function(){return Le(an)}).raw=an;var rs=nn(function(t){return 1/t},Math.atan);(Br.geo.gnomonic=function(){return Xe(rs)}).raw=rs,on.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ta]},(Br.geo.mercator=function(){return sn(on)}).raw=on;var as=nn(function(){return 1},Math.asin);(Br.geo.orthographic=function(){return Xe(as)}).raw=as;var os=nn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Br.geo.stereographic=function(){return Xe(os)}).raw=os,un.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ta]},(Br.geo.transverseMercator=function(){var t=sn(un),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=un,Br.geom={},Br.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,n=St(d),i=St(f),r=t.length,a=[],o=[];for(e=0;e<r;e++)a.push([+n.call(this,t[e],e),+i.call(this,t[e],e),e]);for(a.sort(dn),e=0;e<r;e++)o.push([a[e][0],-a[e][1]]);var s=hn(a),u=hn(o),c=u[0]===s[0],l=u[u.length-1]===s[s.length-1],h=[];for(e=s.length-1;0<=e;--e)h.push(t[a[s[e]][2]]);for(e=+c;e<u.length-l;++e)h.push(t[a[u[e]][2]]);return h}var d=cn,f=ln;return arguments.length?e(t):(e.x=function(t){return arguments.length?(d=t,e):d},e.y=function(t){return arguments.length?(f=t,e):f},e)},Br.geom.polygon=function(t){return oa(t,ss),t};var ss=Br.geom.polygon.prototype=[];ss.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},ss.centroid=function(t){var e,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},ss.clip=function(t){for(var e,n,i,r,a,o,s=pn(t),u=-1,c=this.length-pn(this),l=this[c-1];++u<c;){for(e=t.slice(),t.length=0,r=this[u],a=e[(i=e.length-s)-1],n=-1;++n<i;)fn(o=e[n],l,r)?(fn(a,l,r)||t.push(gn(a,o,l,r)),t.push(o)):fn(a,l,r)&&t.push(gn(a,o,l,r)),a=o;s&&t.push(t[0]),l=r}return t};var us,cs,ls,hs,ds,fs=[],gs=[];An.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Tn),e.length},Gn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Rn.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=Dn(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(In(this,n),n=(t=n).U),n.C=!1,i.C=!0,On(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(On(this,n),n=(t=n).U),n.C=!1,i.C=!0,In(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,a=t.L,o=t.R;if(n=a?o?Dn(o):a:o,r?r.L===t?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=t.C,((n.L=a).U=n)!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,(n.R=o).U=n):(n.U=r,t=(r=n).R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,In(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,On(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,In(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,On(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,In(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,On(this,r),t=this._;break}e.C=!0,r=(t=r).U}while(!t.C);t&&(t.C=!1)}}},Br.geom.voronoi=function(t){function e(r){var a=new Array(r.length),o=l[0][0],s=l[0][1],u=l[1][0],c=l[1][1];return Nn(n(r),l).cells.forEach(function(t,e){var n=t.edges,i=t.site;(a[e]=n.length?n.map(function(t){var e=t.start();return[e.x,e.y]}):i.x>=o&&i.x<=u&&i.y>=s&&i.y<=c?[[o,c],[u,c],[u,s],[o,s]]:[]).point=r[e]}),a}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/va)*va,y:Math.round(o(t,e)/va)*va,i:e}})}var i=cn,r=ln,a=i,o=r,l=ps;return t?e(t):(e.links=function(e){return Nn(n(e)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},e.triangles=function(d){var f=[];return Nn(n(d)).cells.forEach(function(t,e){for(var n,i=t.site,r=t.edges.sort(Tn),a=-1,o=r.length,s=r[o-1].edge,u=s.l===i?s.r:s.l;++a<o;)s,n=u,u=(s=r[a].edge).l===i?s.r:s.l,e<n.i&&e<u.i&&(l=n,h=u,((c=i).x-h.x)*(l.y-c.y)-(c.x-l.x)*(h.y-c.y)<0)&&f.push([d[e],d[n.i],d[u.i]]);var c,l,h}),f},e.x=function(t){return arguments.length?(a=St(i=t),e):i},e.y=function(t){return arguments.length?(o=St(r=t),e):r},e.clipExtent=function(t){return arguments.length?(l=null==t?ps:t,e):l===ps?null:l},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):l===ps?null:l&&l[1]},e)};var ps=[[-1e6,-1e6],[1e6,1e6]];Br.geom.delaunay=function(t){return Br.geom.voronoi().triangles(t)},Br.geom.quadtree=function(t,v,m,S,b){function e(t){function f(t,e,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(ea(u-n)+ea(c-i)<.01)h(t,e,n,i,r,a,o,s);else{var l=t.point;t.x=t.y=t.point=null,h(t,l,u,c,r,a,o,s),h(t,e,n,i,r,a,o,s)}else t.x=n,t.y=i,t.point=e}else h(t,e,n,i,r,a,o,s)}function h(t,e,n,i,r,a,o,s){var u=.5*(r+o),c=.5*(a+s),l=u<=n,h=c<=i,d=h<<1|l;t.leaf=!1,l?r=u:o=u,h?a=c:s=c,f(t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,i,r,a,o,s)}var e,n,i,r,a,o,s,u,c,l=St(T),d=St(w);if(null!=v)o=v,s=m,u=S,c=b;else if(u=c=-(o=s=1/0),n=[],i=[],a=t.length,A)for(r=0;r<a;++r)(e=t[r]).x<o&&(o=e.x),e.y<s&&(s=e.y),e.x>u&&(u=e.x),e.y>c&&(c=e.y),n.push(e.x),i.push(e.y);else for(r=0;r<a;++r){var g=+l(e=t[r],r),p=+d(e,r);g<o&&(o=g),p<s&&(s=p),u<g&&(u=g),c<p&&(c=p),n.push(g),i.push(p)}var x=u-o,_=c-s;_<x?c=s+x:u=o+_;var y={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){f(y,t,+l(t,++r),+d(t,r),o,s,u,c)}};if(y.visit=function(t){!function t(e,n,i,r,a,o){if(!e(n,i,r,a,o)){var s=.5*(i+a),u=.5*(r+o),c=n.nodes;c[0]&&t(e,c[0],i,r,s,u),c[1]&&t(e,c[1],s,r,a,u),c[2]&&t(e,c[2],i,u,s,o),c[3]&&t(e,c[3],s,u,a,o)}}(t,y,o,s,u,c)},y.find=function(t){return function(t,x,_,y,v,m,S){var b,A=1/0;return function t(e,n,i,r,a){if(!(m<n||S<i||r<y||a<v)){if(o=e.point){var o,s=x-o[0],u=_-o[1],c=s*s+u*u;if(c<A){var l=Math.sqrt(A=c);y=x-l,v=_-l,m=x+l,S=_+l,b=o}}for(var h=e.nodes,d=.5*(n+r),f=.5*(i+a),g=(f<=_)<<1|d<=x,p=g+4;g<p;++g)if(e=h[3&g])switch(3&g){case 0:t(e,n,i,d,f);break;case 1:t(e,d,i,r,f);break;case 2:t(e,n,f,d,a);break;case 3:t(e,d,f,r,a)}}}(t,y,v,m,S),b}(y,t[0],t[1],o,s,u,c)},r=-1,null==v){for(;++r<a;)f(y,t[r],n[r],i[r],o,s,u,c);--r}else t.forEach(y.add);return n=i=t=e=null,y}var A,T=cn,w=ln;return(A=arguments.length)?(T=zn,w=Xn,3===A&&(b=m,S=v,m=v=0),e(t)):(e.x=function(t){return arguments.length?(T=t,e):T},e.y=function(t){return arguments.length?(w=t,e):w},e.extent=function(t){return arguments.length?(null==t?v=m=S=b=null:(v=+t[0][0],m=+t[0][1],S=+t[1][0],b=+t[1][1]),e):null==v?null:[[v,m],[S,b]]},e.size=function(t){return arguments.length?(null==t?v=m=S=b=null:(v=m=0,S=+t[0],b=+t[1]),e):null==v?null:[S-v,b-m]},e)},Br.interpolateRgb=Hn,Br.interpolateObject=Bn,Br.interpolateNumber=Yn,Br.interpolateString=jn;var xs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_s=new RegExp(xs.source,"g");Br.interpolate=Un,Br.interpolators=[function(t,e){var n=typeof e;return("string"==n?Fa.has(e)||/^(#|rgb\(|hsl\()/.test(e)?Hn:jn:e instanceof et?Hn:Array.isArray(e)?qn:"object"==n&&isNaN(e)?Bn:Yn)(t,e)}],Br.interpolateArray=qn;function ys(){return bt}var vs=Br.map({linear:ys,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return Zn},cubic:function(){return Kn},sin:function(){return Jn},exp:function(){return ti},circle:function(){return ei},elastic:function(e,n){var i;return arguments.length<2&&(n=.45),i=arguments.length?n/ba*Math.asin(1/e):(e=1,n/4),function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-i)*ba/n)}},back:function(e){return e=e||1.70158,function(t){return t*t*((e+1)*t-e)}},bounce:function(){return ni}}),ms=Br.map({in:bt,out:Wn,"in-out":Qn,"out-in":function(t){return Qn(Wn(t))}});Br.ease=function(t){var e=t.indexOf("-"),n=0<=e?t.slice(0,e):t,i=0<=e?t.slice(e+1):"in";return n=vs.get(n)||ys,function(e){return function(t){return t<=0?0:1<=t?1:e(t)}}((i=ms.get(i)||bt)(n.apply(null,Yr.call(arguments,1))))},Br.interpolateHcl=function(t,e){t=Br.hcl(t),e=Br.hcl(e);var n=t.h,i=t.c,r=t.l,a=e.h-n,o=e.c-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.c:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):180<a?a-=360:a<-180&&(a+=360),function(t){return at(n+a*t,i+o*t,r+s*t)+""}},Br.interpolateHsl=function(t,e){t=Br.hsl(t),e=Br.hsl(e);var n=t.h,i=t.s,r=t.l,a=e.h-n,o=e.s-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.s:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):180<a?a-=360:a<-180&&(a+=360),function(t){return it(n+a*t,i+o*t,r+s*t)+""}},Br.interpolateLab=function(t,e){t=Br.lab(t),e=Br.lab(e);var n=t.l,i=t.a,r=t.b,a=e.l-n,o=e.a-i,s=e.b-r;return function(t){return st(n+a*t,i+o*t,r+s*t)+""}},Br.interpolateRound=ii,Br.transform=function(t){var n=Ur.createElementNS(Br.ns.prefix.svg,"g");return(Br.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new ri(e?e.matrix:Ss)})(t)},ri.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ss={a:1,b:0,c:0,d:1,e:0,f:0};Br.interpolateTransform=si,Br.layout={},Br.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(li(t[n]));return e}},Br.layout.chord=function(){function t(){var t,e,n,i,r,a={},o=[],s=Br.range(m),u=[];for(_=[],y=[],t=0,i=-1;++i<m;){for(e=0,r=-1;++r<m;)e+=v[i][r];o.push(e),u.push(Br.range(m)),t+=e}for(S&&s.sort(function(t,e){return S(o[t],o[e])}),b&&u.forEach(function(t,n){t.sort(function(t,e){return b(v[n][t],v[n][e])})}),t=(ba-T*m)/t,e=0,i=-1;++i<m;){for(n=e,r=-1;++r<m;){var c=s[i],l=u[c][r],h=v[c][l],d=e,f=e+=h*t;a[c+"-"+l]={index:c,subindex:l,startAngle:d,endAngle:f,value:h}}y[c]={index:c,startAngle:n,endAngle:e,value:(e-n)/t},e+=T}for(i=-1;++i<m;)for(r=i-1;++r<m;){var g=a[i+"-"+r],p=a[r+"-"+i];(g.value||p.value)&&_.push(g.value<p.value?{source:p,target:g}:{source:g,target:p})}A&&x()}function x(){_.sort(function(t,e){return A((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var _,y,v,m,S,b,A,e={},T=0;return e.matrix=function(t){return arguments.length?(m=(v=t)&&v.length,_=y=null,e):v},e.padding=function(t){return arguments.length?(T=t,_=y=null,e):T},e.sortGroups=function(t){return arguments.length?(S=t,_=y=null,e):S},e.sortSubgroups=function(t){return arguments.length?(b=t,_=null,e):b},e.sortChords=function(t){return arguments.length?(A=t,_&&x(),e):A},e.chords=function(){return _||t(),_},e.groups=function(){return y||t(),y},e},Br.layout.force=function(){function h(c){return function(t,e,n,i){if(t.point!==c){var r=t.cx-c.x,a=t.cy-c.y,o=i-e,s=r*r+a*a;if(o*o/b<s){if(s<m){var u=t.charge/s;c.px-=r*u,c.py-=a*u}return!0}if(t.point&&s&&s<m){u=t.pointCharge/s;c.px-=r*u,c.py-=a*u}}return!t.charge}}function t(t){t.px=Br.event.x,t.py=Br.event.y,a.resume()}var e,d,f,g,p,a={},x=Br.dispatch("start","tick","end"),_=[1,1],y=.9,o=bs,l=As,v=-30,m=Ts,S=.1,b=.64,A=[],T=[];return a.tick=function(){if((d*=.99)<.005)return x.end({type:"end",alpha:d=0}),!0;var t,e,n,i,r,a,o,s,u,c=A.length,l=T.length;for(e=0;e<l;++e)i=(n=T[e]).source,(a=(s=(r=n.target).x-i.x)*s+(u=r.y-i.y)*u)&&(s*=a=d*g[e]*((a=Math.sqrt(a))-f[e])/a,u*=a,r.x-=s*(o=i.weight/(r.weight+i.weight)),r.y-=u*o,i.x+=s*(o=1-o),i.y+=u*o);if((o=d*S)&&(s=_[0]/2,u=_[1]/2,e=-1,o))for(;++e<c;)(n=A[e]).x+=(s-n.x)*o,n.y+=(u-n.y)*o;if(v)for(function t(e,n,i){var r=0,a=0;if(e.charge=0,!e.leaf)for(var o,s=e.nodes,u=s.length,c=-1;++c<u;)null!=(o=s[c])&&(t(o,n,i),e.charge+=o.charge,r+=o.charge*o.cx,a+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var l=n*i[e.point.index];e.charge+=e.pointCharge=l,r+=l*e.point.x,a+=l*e.point.y}e.cx=r/e.charge,e.cy=a/e.charge}(t=Br.geom.quadtree(A),d,p),e=-1;++e<c;)(n=A[e]).fixed||t.visit(h(n));for(e=-1;++e<c;)(n=A[e]).fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*y,n.y-=(n.py-(n.py=n.y))*y);x.tick({type:"tick",alpha:d})},a.nodes=function(t){return arguments.length?(A=t,a):A},a.links=function(t){return arguments.length?(T=t,a):T},a.size=function(t){return arguments.length?(_=t,a):_},a.linkDistance=function(t){return arguments.length?(o="function"==typeof t?t:+t,a):o},a.distance=a.linkDistance,a.linkStrength=function(t){return arguments.length?(l="function"==typeof t?t:+t,a):l},a.friction=function(t){return arguments.length?(y=+t,a):y},a.charge=function(t){return arguments.length?(v="function"==typeof t?t:+t,a):v},a.chargeDistance=function(t){return arguments.length?(m=t*t,a):Math.sqrt(m)},a.gravity=function(t){return arguments.length?(S=+t,a):S},a.theta=function(t){return arguments.length?(b=t*t,a):Math.sqrt(b)},a.alpha=function(t){return arguments.length?(t=+t,d?d=0<t?t:0:0<t&&(x.start({type:"start",alpha:d=t}),Br.timer(a.tick)),a):d},a.start=function(){function t(t,e){if(!u){for(u=new Array(c),a=0;a<c;++a)u[a]=[];for(a=0;a<o;++a){var n=T[a];u[n.source.index].push(n.target),u[n.target.index].push(n.source)}}for(var i,r=u[s],a=-1,o=r.length;++a<o;)if(!isNaN(i=r[a][t]))return i;return Math.random()*e}var s,u,e,c=A.length,n=T.length,i=_[0],r=_[1];for(s=0;s<c;++s)(e=A[s]).index=s,e.weight=0;for(s=0;s<n;++s)"number"==typeof(e=T[s]).source&&(e.source=A[e.source]),"number"==typeof e.target&&(e.target=A[e.target]),++e.source.weight,++e.target.weight;for(s=0;s<c;++s)e=A[s],isNaN(e.x)&&(e.x=t("x",i)),isNaN(e.y)&&(e.y=t("y",r)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(f=[],"function"==typeof o)for(s=0;s<n;++s)f[s]=+o.call(this,T[s],s);else for(s=0;s<n;++s)f[s]=o;if(g=[],"function"==typeof l)for(s=0;s<n;++s)g[s]=+l.call(this,T[s],s);else for(s=0;s<n;++s)g[s]=l;if(p=[],"function"==typeof v)for(s=0;s<c;++s)p[s]=+v.call(this,A[s],s);else for(s=0;s<c;++s)p[s]=v;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e=e||Br.behavior.drag().origin(bt).on("dragstart.force",di).on("drag.force",t).on("dragend.force",fi),arguments.length?void this.on("mouseover.force",gi).on("mouseout.force",pi).call(e):e},Br.rebind(a,x,"on")};var bs=20,As=1,Ts=1/0;Br.layout.hierarchy=function(){function s(t){var e,n=[t],i=[];for(t.depth=0;null!=(e=n.pop());)if(i.push(e),(a=c.call(s,e,e.depth))&&(r=a.length)){for(var r,a,o;0<=--r;)n.push(o=a[r]),o.parent=e,o.depth=e.depth+1;l&&(e.value=0),e.children=a}else l&&(e.value=+l.call(s,e,e.depth)||0),delete e.children;return yi(t,function(t){var e,n;u&&(e=t.children)&&e.sort(u),l&&(n=t.parent)&&(n.value+=t.value)}),i}var u=Si,c=vi,l=mi;return s.sort=function(t){return arguments.length?(u=t,s):u},s.children=function(t){return arguments.length?(c=t,s):c},s.value=function(t){return arguments.length?(l=t,s):l},s.revalue=function(t){return l&&(_i(t,function(t){t.children&&(t.value=0)}),yi(t,function(t){var e;t.children||(t.value=+l.call(s,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},s},Br.layout.partition=function(){function e(t,e){var n=i.call(this,t,e);return function t(e,n,i,r){var a=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,a&&(o=a.length)){var o,s,u,c=-1;for(i=e.value?i/e.value:0;++c<o;)t(s=a[c],n,u=s.value*i,r),n+=u}}(n[0],0,r[0],r[1]/function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,t(n[a]));return 1+i}(n[0])),n}var i=Br.layout.hierarchy(),r=[1,1];return e.size=function(t){return arguments.length?(r=t,e):r},xi(e,i)},Br.layout.pie=function(){function h(n){var e,t=n.length,i=n.map(function(t,e){return+d.call(h,t,e)}),r=+("function"==typeof g?g.apply(this,arguments):g),a=("function"==typeof p?p.apply(this,arguments):p)-r,o=Math.min(Math.abs(a)/t,+("function"==typeof x?x.apply(this,arguments):x)),s=o*(a<0?-1:1),u=(a-t*s)/Br.sum(i),c=Br.range(t),l=[];return null!=f&&c.sort(f===ws?function(t,e){return i[e]-i[t]}:function(t,e){return f(n[t],n[e])}),c.forEach(function(t){l[t]={data:n[t],value:e=i[t],startAngle:r,endAngle:r+=e*u+s,padAngle:o}}),l}var d=Number,f=ws,g=0,p=ba,x=0;return h.value=function(t){return arguments.length?(d=t,h):d},h.sort=function(t){return arguments.length?(f=t,h):f},h.startAngle=function(t){return arguments.length?(g=t,h):g},h.endAngle=function(t){return arguments.length?(p=t,h):p},h.padAngle=function(t){return arguments.length?(x=t,h):x},h};var ws={};Br.layout.stack=function(){function h(t,e){if(!(a=t.length))return t;var n=t.map(function(t,e){return d.call(h,t,e)}),i=n.map(function(t){return t.map(function(t,e){return[x.call(h,t,e),_.call(h,t,e)]})}),r=f.call(h,i,e);n=Br.permute(n,r),i=Br.permute(i,r);var a,o,s,u,c=g.call(h,i,e),l=n[0].length;for(s=0;s<l;++s)for(p.call(h,n[0][s],u=c[s],i[0][s][1]),o=1;o<a;++o)p.call(h,n[o][s],u+=i[o-1][s][1],i[o][s][1]);return t}var d=bt,f=Pi,g=Ci,p=wi,x=Ai,_=Ti;return h.values=function(t){return arguments.length?(d=t,h):d},h.order=function(t){return arguments.length?(f="function"==typeof t?t:Ps.get(t)||Pi,h):f},h.offset=function(t){return arguments.length?(g="function"==typeof t?t:Cs.get(t)||Ci,h):g},h.x=function(t){return arguments.length?(x=t,h):x},h.y=function(t){return arguments.length?(_=t,h):_},h.out=function(t){return arguments.length?(p=t,h):p},h};var Ps=Br.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(Li),a=t.map(Mi),o=Br.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,u=0,c=[],l=[];for(e=0;e<i;++e)n=o[e],s<u?(s+=a[n],c.push(n)):(u+=a[n],l.push(n));return l.reverse().concat(c)},reverse:function(t){return Br.range(t.length).reverse()},default:Pi}),Cs=Br.map({silhouette:function(t){var e,n,i,r=t.length,a=t[0].length,o=[],s=0,u=[];for(n=0;n<a;++n){for(i=e=0;e<r;e++)i+=t[e][n][1];s<i&&(s=i),o.push(i)}for(n=0;n<a;++n)u[n]=(s-o[n])/2;return u},wiggle:function(t){var e,n,i,r,a,o,s,u,c,l=t.length,h=t[0],d=h.length,f=[];for(f[0]=u=c=0,n=1;n<d;++n){for(r=e=0;e<l;++e)r+=t[e][n][1];for(a=e=0,s=h[n][0]-h[n-1][0];e<l;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);i<e;++i)o+=(t[i][n][1]-t[i][n-1][1])/s;a+=o*t[e][n][1]}f[n]=u-=r?a/r*s:0,u<c&&(c=u)}for(n=0;n<d;++n)f[n]-=c;return f},expand:function(t){var e,n,i,r=t.length,a=t[0].length,o=1/r,s=[];for(n=0;n<a;++n){for(i=e=0;e<r;e++)i+=t[e][n][1];if(i)for(e=0;e<r;e++)t[e][n][1]/=i;else for(e=0;e<r;e++)t[e][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:Ci});Br.layout.histogram=function(){function n(t,e){for(var n,i,r=[],a=t.map(d,this),o=f.call(this,a,e),s=g.call(this,o,a,e),u=(e=-1,a.length),c=s.length-1,l=h?1:1/u;++e<c;)(n=r[e]=[]).dx=s[e+1]-(n.x=s[e]),n.y=0;if(0<c)for(e=-1;++e<u;)(i=a[e])>=o[0]&&i<=o[1]&&((n=r[Br.bisect(s,i,1,c)-1]).y+=l,n.push(t[e]));return r}var h=!0,d=Number,f=Ri,g=Vi;return n.value=function(t){return arguments.length?(d=t,n):d},n.range=function(t){return arguments.length?(f=St(t),n):f},n.bins=function(e){return arguments.length?(g="number"==typeof e?function(t){return Gi(t,e)}:St(e),n):g},n.frequency=function(t){return arguments.length?(h=!!t,n):h},n},Br.layout.pack=function(){function e(t,e){var n=c.call(this,t,e),i=n[0],r=h[0],a=h[1],o=null==u?Math.sqrt:"function"==typeof u?u:function(){return u};if(i.x=i.y=0,yi(i,function(t){t.r=+o(t.value)}),yi(i,Ni),l){var s=l*(u?1:Math.max(2*i.r/r,2*i.r/a))/2;yi(i,function(t){t.r+=s}),yi(i,Ni),yi(i,function(t){t.r-=s})}return function t(e,n,i,r){var a=e.children;if(e.x=n+=r*e.x,e.y=i+=r*e.y,e.r*=r,a)for(var o=-1,s=a.length;++o<s;)t(a[o],n,i,r)}(i,r/2,a/2,u?1:1/Math.max(2*i.r/r,2*i.r/a)),n}var u,c=Br.layout.hierarchy().sort(ki),l=0,h=[1,1];return e.size=function(t){return arguments.length?(h=t,e):h},e.radius=function(t){return arguments.length?(u=null==t||"function"==typeof t?t:+t,e):u},e.padding=function(t){return arguments.length?(l=+t,e):l},xi(e,c)},Br.layout.tree=function(){function e(t,e){var n=g.call(this,t,e),i=n[0],r=function(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,a=e.children,o=0,s=a.length;o<s;++o)i.push((a[o]=r={_:a[o],parent:e,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}(i);if(yi(r,h),r.parent.m=-r.z,_i(r,d),x)_i(i,f);else{var a=i,o=i,s=i;_i(i,function(t){t.x<a.x&&(a=t),t.x>o.x&&(o=t),t.depth>s.depth&&(s=t)});var u=v(a,o)/2-a.x,c=p[0]/(o.x+v(o,a)/2+u),l=p[1]/(s.depth||1);_i(i,function(t){t.x=(t.x+u)*c,t.y=t.depth*l})}return n}function h(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,i=0,r=t.children,a=r.length;0<=--a;)(e=r[a]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var r=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+v(t._,i._),t.m=t.z-r):t.z=r}else i&&(t.z=i.z+v(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,r=t,a=t,o=e,s=r.parent.children[0],u=r.m,c=a.m,l=o.m,h=s.m;o=Yi(o),r=Bi(r),o&&r;)s=Bi(s),(a=Yi(a)).a=t,0<(i=o.z+l-r.z-u+v(o._,r._))&&(_=t,y=n,d=(x=o).a.parent===_.parent?x.a:y,void 0,p=(g=i)/((f=t).i-d.i),f.c-=p,f.s+=g,d.c+=p,f.z+=g,f.m+=g,u+=i,c+=i),l+=o.m,u+=r.m,h+=s.m,c+=a.m;o&&!Yi(a)&&(a.t=o,a.m+=l-c),r&&!Bi(s)&&(s.t=r,s.m+=u-h,n=t)}var d,f,g,p;var x,_,y;return n}(t,i,t.parent.A||n[0])}function d(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function f(t){t.x*=p[0],t.y=t.depth*p[1]}var g=Br.layout.hierarchy().sort(null).value(null),v=Hi,p=[1,1],x=null;return e.separation=function(t){return arguments.length?(v=t,e):v},e.size=function(t){return arguments.length?(x=null==(p=t)?f:null,e):x?null:p},e.nodeSize=function(t){return arguments.length?(x=null==(p=t)?null:f,e):x?p:null},xi(e,g)},Br.layout.cluster=function(){function e(t,e){var n,i=l.call(this,t,e),r=i[0],a=0;yi(r,function(t){var e=t.children;e&&e.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(e),t.y=function(t){return 1+Br.max(t,function(t){return t.y})}(e)):(t.x=n?a+=h(t,n):0,t.y=0,n=t)});var o=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(r),s=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(r),u=o.x-h(o,s)/2,c=s.x+h(s,o)/2;return yi(r,f?function(t){t.x=(t.x-r.x)*d[0],t.y=(r.y-t.y)*d[1]}:function(t){t.x=(t.x-u)/(c-u)*d[0],t.y=(1-(r.y?t.y/r.y:1))*d[1]}),i}var l=Br.layout.hierarchy().sort(null).value(null),h=Hi,d=[1,1],f=!1;return e.separation=function(t){return arguments.length?(h=t,e):h},e.size=function(t){return arguments.length?(f=null==(d=t),e):f?null:d},e.nodeSize=function(t){return arguments.length?(f=null!=(d=t),e):f?d:null},xi(e,l)},Br.layout.treemap=function(){function l(t,e){for(var n,i,r=-1,a=t.length;++r<a;)i=(n=t[r]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function h(t){var e=t.children;if(e&&e.length){var n,i,r,a=p(t),o=[],s=e.slice(),u=1/0,c="slice"===x?a.dx:"dice"===x?a.dy:"slice-dice"===x?1&t.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(l(s,a.dx*a.dy/t.value),o.area=0;0<(r=s.length);)o.push(n=s[r-1]),o.area+=n.area,u="squarify"!==x||(i=d(o,c))<=u?(s.pop(),i):(o.area-=o.pop().area,f(o,c,a,!1),c=Math.min(a.dx,a.dy),o.length=o.area=0,1/0);o.length&&(f(o,c,a,!0),o.length=o.area=0),e.forEach(h)}}function o(t){var e=t.children;if(e&&e.length){var n,i=p(t),r=e.slice(),a=[];for(l(r,i.dx*i.dy/t.value),a.area=0;n=r.pop();)a.push(n),a.area+=n.area,null!=n.z&&(f(a,n.z?i.dx:i.dy,i,!r.length),a.length=a.area=0);e.forEach(o)}}function d(t,e){for(var n,i=t.area,r=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(n<a&&(a=n),r<n&&(r=n));return e*=e,(i*=i)?Math.max(e*r*_/i,i/(e*a*_)):1/0}function f(t,e,n,i){var r,a=-1,o=t.length,s=n.x,u=n.y,c=e?g(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++a<o;)(r=t[a]).x=s,r.y=u,r.dy=c,s+=r.dx=Math.min(n.x+n.dx-s,c?g(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++a<o;)(r=t[a]).x=s,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?g(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function i(t){var e=r||a(t),n=e[0];return n.x=0,n.y=0,n.dx=s[0],n.dy=s[1],r&&a.revalue(n),l([n],n.dx*n.dy/n.value),(r?o:h)(n),c&&(r=e),e}var r,a=Br.layout.hierarchy(),g=Math.round,s=[1,1],u=null,p=ji,c=!1,x="squarify",_=.5*(1+Math.sqrt(5));return i.size=function(t){return arguments.length?(s=t,i):s},i.padding=function(n){function t(t){return Ui(t,n)}return arguments.length?(p=null==(u=n)?ji:"function"==(e=typeof n)?function(t){var e=n.call(i,t,t.depth);return null==e?ji(t):Ui(t,"number"==typeof e?[e,e,e,e]:e)}:("number"==e&&(n=[n,n,n,n]),t),i):u;var e},i.round=function(t){return arguments.length?(g=t?Math.round:Number,i):g!=Number},i.sticky=function(t){return arguments.length?(c=t,r=null,i):c},i.ratio=function(t){return arguments.length?(_=t,i):_},i.mode=function(t){return arguments.length?(x=t+"",i):x},xi(i,a)},Br.random={normal:function(i,r){var t=arguments.length;return t<2&&(r=1),t<1&&(i=0),function(){for(var t,e,n;!(n=(t=2*Math.random()-1)*t+(e=2*Math.random()-1)*e)||1<n;);return i+r*t*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var t=Br.random.normal.apply(Br,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Br.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},Br.scale={};var Ls={floor:bt,ceil:bt};Br.scale.linear=function(){return function t(n,i,r,a){function e(){var t=2<Math.min(n.length,i.length)?Ki:Qi,e=a?ci:ui;return s=t(n,i,e,r),u=t(i,n,e,Un),o}function o(t){return s(t)}var s,u;return o.invert=function(t){return u(t)},o.domain=function(t){return arguments.length?(n=t.map(Number),e()):n},o.range=function(t){return arguments.length?(i=t,e()):i},o.rangeRound=function(t){return o.range(t).interpolate(ii)},o.clamp=function(t){return arguments.length?(a=t,e()):a},o.interpolate=function(t){return arguments.length?(r=t,e()):r},o.ticks=function(t){return er(n,t)},o.tickFormat=function(t,e){return nr(n,t,e)},o.nice=function(t){return Ji(n,t),e()},o.copy=function(){return t(n,i,r,a)},e()}([0,1],[0,1],Un,!1)};var Ms={s:1,g:1,p:1,r:1,e:1};Br.scale.log=function(){return function t(e,u,c,l){function h(t){return(c?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(u)}function d(t){return c?Math.pow(u,t):-Math.pow(u,-t)}function a(t){return e(h(t))}return a.invert=function(t){return d(e.invert(t))},a.domain=function(t){return arguments.length?(c=0<=t[0],e.domain((l=t.map(Number)).map(h)),a):l},a.base=function(t){return arguments.length?(u=+t,e.domain(l.map(h)),a):u},a.nice=function(){var t=Zi(l.map(h),c?Math:Vs);return e.domain(t),l=t.map(d),a},a.ticks=function(){var t=qi(l),e=[],n=t[0],i=t[1],r=Math.floor(h(n)),a=Math.ceil(h(i)),o=u%1?2:u;if(isFinite(a-r)){if(c){for(;r<a;r++)for(var s=1;s<o;s++)e.push(d(r)*s);e.push(d(r))}else for(e.push(d(r));r++<a;)for(s=o-1;0<s;s--)e.push(d(r)*s);for(r=0;e[r]<n;r++);for(a=e.length;e[a-1]>i;a--);e=e.slice(r,a)}return e},a.tickFormat=function(t,e){if(!arguments.length)return Es;arguments.length<2?e=Es:"function"!=typeof e&&(e=Br.format(e));var n,i=Math.max(.1,t/a.ticks().length),r=c?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/d(r(h(t)+n))<=i?e(t):""}},a.copy=function(){return t(e.copy(),u,c,l)},$i(a,e)}(Br.scale.linear().domain([0,1]),10,!0,[1,10])};var Es=Br.format(".0e"),Vs={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Br.scale.pow=function(){return function t(e,n,i){function r(t){return e(a(t))}var a=rr(n),o=rr(1/n);return r.invert=function(t){return o(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(a)),r):i},r.ticks=function(t){return er(i,t)},r.tickFormat=function(t,e){return nr(i,t,e)},r.nice=function(t){return r.domain(Ji(i,t))},r.exponent=function(t){return arguments.length?(a=rr(n=t),o=rr(1/n),e.domain(i.map(a)),r):n},r.copy=function(){return t(e.copy(),n,i)},$i(r,e)}(Br.scale.linear(),1,[0,1])},Br.scale.sqrt=function(){return Br.scale.pow().exponent(.5)},Br.scale.ordinal=function(){return function t(s,u){function c(t){return h[((r.get(t)||("range"===u.t?r.set(t,s.push(t)):NaN))-1)%h.length]}function l(e,n){return Br.range(s.length).map(function(t){return e+n*t})}var r,h,d;return c.domain=function(t){if(!arguments.length)return s;s=[],r=new y;for(var e,n=-1,i=t.length;++n<i;)r.has(e=t[n])||r.set(e,s.push(e));return c[u.t].apply(c,u.a)},c.range=function(t){return arguments.length?(h=t,d=0,u={t:"range",a:arguments},c):h},c.rangePoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],r=s.length<2?(n=(n+i)/2,0):(i-n)/(s.length-1+e);return h=l(n+r*e/2,r),d=0,u={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],r=s.length<2?(n=i=Math.round((n+i)/2),0):0|(i-n)/(s.length-1+e);return h=l(n+Math.round(r*e/2+(i-n-(s.length-1+e)*r)/2),r),d=0,u={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[i-0],a=(t[1-i]-r)/(s.length-e+2*n);return h=l(r+a*n,a),i&&h.reverse(),d=a*(1-e),u={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[i-0],a=t[1-i],o=Math.floor((a-r)/(s.length-e+2*n));return h=l(r+Math.round((a-r-(s.length-e)*o)/2),o),i&&h.reverse(),d=Math.round(o*(1-e)),u={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return d},c.rangeExtent=function(){return qi(u.a[0])},c.copy=function(){return t(s,u)},c.domain(s)}([],{t:"range",a:[[]]})},Br.scale.category10=function(){return Br.scale.ordinal().range(Gs)},Br.scale.category20=function(){return Br.scale.ordinal().range(Rs)},Br.scale.category20b=function(){return Br.scale.ordinal().range(ks)},Br.scale.category20c=function(){return Br.scale.ordinal().range(Is)};var Gs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(gt),Rs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(gt),ks=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(gt),Is=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(gt);Br.scale.quantile=function(){return function t(n,i){function e(){var t=0,e=i.length;for(a=[];++t<e;)a[t-1]=Br.quantile(n,t/e);return r}function r(t){return isNaN(t=+t)?void 0:i[Br.bisect(a,t)]}var a;return r.domain=function(t){return arguments.length?(n=t.map(s).filter(u).sort(o),e()):n},r.range=function(t){return arguments.length?(i=t,e()):i},r.quantiles=function(){return a},r.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[0<t?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},r.copy=function(){return t(n,i)},e()}([],[])},Br.scale.quantize=function(){return function t(e,n,i){function r(t){return i[Math.max(0,Math.min(s,Math.floor(o*(t-e))))]}function a(){return o=i.length/(n-e),s=i.length-1,r}var o,s;return r.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],a()):[e,n]},r.range=function(t){return arguments.length?(i=t,a()):i},r.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/o+e,t+1/o]},r.copy=function(){return t(e,n,i)},a()}(0,1,[0,1])},Br.scale.threshold=function(){return function t(e,n){function i(t){return t<=t?n[Br.bisect(e,t)]:void 0}return i.domain=function(t){return arguments.length?(e=t,i):e},i.range=function(t){return arguments.length?(n=t,i):n},i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},i.copy=function(){return t(e,n)},i}([.5],[0,1])},Br.scale.identity=function(){return function t(n){function e(t){return+t}return(e.invert=e).domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n},e.ticks=function(t){return er(n,t)},e.tickFormat=function(t,e){return nr(n,t,e)},e.copy=function(){return t(n)},e}([0,1])},Br.svg={},Br.svg.arc=function(){function e(){var t=Math.max(0,+F.apply(this,arguments)),e=Math.max(0,+z.apply(this,arguments)),n=B.apply(this,arguments)-Ta,i=Y.apply(this,arguments)-Ta,r=Math.abs(i-n),a=i<n?0:1;if(e<t&&(o=e,e=t,t=o),Aa<=r)return N(e,a)+(t?N(t,1-a):"")+"Z";var o,s,u,c,l,h,d,f,g,p,x,_,y=0,v=0,m=[];if((c=(+j.apply(this,arguments)||0)/2)&&(u=H===Os?Math.sqrt(t*t+e*e):+H.apply(this,arguments),a||(v*=-1),e&&(v=$(u/e*Math.sin(c))),t&&(y=$(u/t*Math.sin(c)))),e){l=e*Math.cos(n+v),h=e*Math.sin(n+v),d=e*Math.cos(i-v),f=e*Math.sin(i-v);var S=Math.abs(i-n-2*v)<=Sa?0:1;if(v&&hr(l,h,d,f)===a^S){var b=(n+i)/2;l=e*Math.cos(b),h=e*Math.sin(b),d=f=null}}else l=h=0;if(t){g=t*Math.cos(i-y),p=t*Math.sin(i-y),x=t*Math.cos(n+y),_=t*Math.sin(n+y);var A=Math.abs(n-i+2*y)<=Sa?0:1;if(y&&hr(g,p,x,_)===1-a^A){var T=(n+i)/2;g=t*Math.cos(T),p=t*Math.sin(T),x=_=null}}else g=p=0;if(.001<(o=Math.min(Math.abs(e-t)/2,+X.apply(this,arguments)))){s=t<e^a?0:1;var w=null==x?[g,p]:null==d?[l,h]:gn([l,h],[x,_],[d,f],[g,p]),P=l-w[0],C=h-w[1],L=d-w[0],M=f-w[1],E=1/Math.sin(Math.acos((P*L+C*M)/(Math.sqrt(P*P+C*C)*Math.sqrt(L*L+M*M)))/2),V=Math.sqrt(w[0]*w[0]+w[1]*w[1]);if(null!=d){var G=Math.min(o,(e-V)/(1+E)),R=dr(null==x?[g,p]:[x,_],[l,h],e,G,a),k=dr([d,f],[g,p],e,G,a);o===G?m.push("M",R[0],"A",G,",",G," 0 0,",s," ",R[1],"A",e,",",e," 0 ",1-a^hr(R[1][0],R[1][1],k[1][0],k[1][1]),",",a," ",k[1],"A",G,",",G," 0 0,",s," ",k[0]):m.push("M",R[0],"A",G,",",G," 0 1,",s," ",k[0])}else m.push("M",l,",",h);if(null!=x){var I=Math.min(o,(t-V)/(E-1)),O=dr([l,h],[x,_],t,-I,a),D=dr([g,p],null==d?[l,h]:[d,f],t,-I,a);o===I?m.push("L",D[0],"A",I,",",I," 0 0,",s," ",D[1],"A",t,",",t," 0 ",a^hr(D[1][0],D[1][1],O[1][0],O[1][1]),",",1-a," ",O[1],"A",I,",",I," 0 0,",s," ",O[0]):m.push("L",D[0],"A",I,",",I," 0 0,",s," ",O[0])}else m.push("L",g,",",p)}else m.push("M",l,",",h),null!=d&&m.push("A",e,",",e," 0 ",S,",",a," ",d,",",f),m.push("L",g,",",p),null!=x&&m.push("A",t,",",t," 0 ",A,",",1-a," ",x,",",_);return m.push("Z"),m.join("")}function N(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var F=or,z=sr,X=ar,H=Os,B=ur,Y=cr,j=lr;return e.innerRadius=function(t){return arguments.length?(F=St(t),e):F},e.outerRadius=function(t){return arguments.length?(z=St(t),e):z},e.cornerRadius=function(t){return arguments.length?(X=St(t),e):X},e.padRadius=function(t){return arguments.length?(H=t==Os?Os:St(t),e):H},e.startAngle=function(t){return arguments.length?(B=St(t),e):B},e.endAngle=function(t){return arguments.length?(Y=St(t),e):Y},e.padAngle=function(t){return arguments.length?(j=St(t),e):j},e.centroid=function(){var t=(+F.apply(this,arguments)+ +z.apply(this,arguments))/2,e=(+B.apply(this,arguments)+ +Y.apply(this,arguments))/2-Ta;return[Math.cos(e)*t,Math.sin(e)*t]},e};var Os="auto";Br.svg.line=function(){return fr(bt)};var Ds=Br.map({linear:gr,"linear-closed":function(t){return gr(t)+"Z"},step:function(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return 1<n&&r.push("H",i[0]),r.join("")},"step-before":pr,"step-after":xr,basis:vr,"basis-open":function(t){if(t.length<4)return gr(t);for(var e,n=[],i=-1,r=t.length,a=[0],o=[0];++i<3;)e=t[i],a.push(e[0]),o.push(e[1]);for(n.push(mr(zs,a)+","+mr(zs,o)),--i;++i<r;)e=t[i],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Sr(n,a,o);return n.join("")},"basis-closed":function(t){for(var e,n,i=-1,r=t.length,a=r+4,o=[],s=[];++i<4;)n=t[i%r],o.push(n[0]),s.push(n[1]);for(e=[mr(zs,o),",",mr(zs,s)],--i;++i<a;)n=t[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Sr(e,o,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,r,a=t[0][0],o=t[0][1],s=t[n][0]-a,u=t[n][1]-o,c=-1;++c<=n;)r=c/n,(i=t[c])[0]=e*i[0]+(1-e)*(a+r*s),i[1]=e*i[1]+(1-e)*(o+r*u);return vr(t)},cardinal:function(t,e){return t.length<3?gr(t):t[0]+_r(t,yr(t,e))},"cardinal-open":function(t,e){return t.length<4?gr(t):t[1]+_r(t.slice(1,-1),yr(t,e))},"cardinal-closed":function(t,e){return t.length<3?gr(t):t[0]+_r((t.push(t[0]),t),yr([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?gr(t):t[0]+_r(t,Ar(t))}});Ds.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Ns=[0,2/3,1/3,0],Fs=[0,1/3,2/3,0],zs=[0,1/6,2/3,1/6];Br.svg.line.radial=function(){var t=fr(Tr);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(pr.reverse=xr).reverse=pr,Br.svg.area=function(){return wr(bt)},Br.svg.area.radial=function(){var t=wr(Tr);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Br.svg.chord=function(){function e(t,e){var n=r(this,s,t,e),i=r(this,u,t,e);return"M"+n.p0+a(n.r,n.p1,n.a1-n.a0)+(function(t,e){return t.a0==e.a0&&t.a1==e.a1}(n,i)?o(n.r,n.p1,n.r,n.p0):o(n.r,n.p1,i.r,i.p0)+a(i.r,i.p1,i.a1-i.a0)+o(i.r,i.p1,n.r,n.p0))+"Z"}function r(t,e,n,i){var r=e.call(t,n,i),a=c.call(t,r,i),o=l.call(t,r,i)-Ta,s=h.call(t,r,i)-Ta;return{r:a,a0:o,a1:s,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(s),a*Math.sin(s)]}}function a(t,e,n){return"A"+t+","+t+" 0 "+ +(Sa<n)+",1 "+e}function o(t,e,n,i){return"Q 0,0 "+i}var s=tn,u=en,c=Pr,l=ur,h=cr;return e.radius=function(t){return arguments.length?(c=St(t),e):c},e.source=function(t){return arguments.length?(s=St(t),e):s},e.target=function(t){return arguments.length?(u=St(t),e):u},e.startAngle=function(t){return arguments.length?(l=St(t),e):l},e.endAngle=function(t){return arguments.length?(h=St(t),e):h},e},Br.svg.diagonal=function(){function e(t,e){var n=o.call(this,t,e),i=s.call(this,t,e),r=(n.y+i.y)/2,a=[n,{x:n.x,y:r},{x:i.x,y:r},i];return"M"+(a=a.map(u))[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var o=tn,s=en,u=Cr;return e.source=function(t){return arguments.length?(o=St(t),e):o},e.target=function(t){return arguments.length?(s=St(t),e):s},e.projection=function(t){return arguments.length?(u=t,e):u},e},Br.svg.diagonal.radial=function(){var t=Br.svg.diagonal(),e=Cr,n=t.projection;return t.projection=function(t){return arguments.length?n(function(i){return function(){var t=i.apply(this,arguments),e=t[0],n=t[1]-Ta;return[e*Math.cos(n),e*Math.sin(n)]}}(e=t)):e},t},Br.svg.symbol=function(){function e(t,e){return(Xs.get(n.call(this,t,e))||Er)(i.call(this,t,e))}var n=Mr,i=Lr;return e.type=function(t){return arguments.length?(n=St(t),e):n},e.size=function(t){return arguments.length?(i=St(t),e):i},e};var Xs=Br.map({circle:Er,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*js)),n=e*js;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ys),n=e*Ys/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ys),n=e*Ys/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Br.svg.symbolTypes=Xs.keys();var Hs,Bs,Ys=Math.sqrt(3),js=Math.tan(30*wa),Us=[],qs=0;Us.call=ha.call,Us.empty=ha.empty,Us.node=ha.node,Us.size=ha.size,Br.transition=function(t){return arguments.length?Hs?t.transition():t:ga.transition()},(Br.transition.prototype=Us).select=function(t){var e,n,i,r=this.id,a=this.namespace,o=[];t=b(t);for(var s=-1,u=this.length;++s<u;){o.push(e=[]);for(var c=this[s],l=-1,h=c.length;++l<h;)(i=c[l])&&(n=t.call(i,i.__data__,l,s))?("__data__"in i&&(n.__data__=i.__data__),Ir(n,l,a,r,i[a][r]),e.push(n)):e.push(null)}return Vr(o,a,r)},Us.selectAll=function(t){var e,n,i,r,a,o=this.id,s=this.namespace,u=[];t=A(t);for(var c=-1,l=this.length;++c<l;)for(var h=this[c],d=-1,f=h.length;++d<f;)if(i=h[d]){a=i[s][o],n=t.call(i,i.__data__,d,c),u.push(e=[]);for(var g=-1,p=n.length;++g<p;)(r=n[g])&&Ir(r,g,s,o,a),e.push(r)}return Vr(u,s,o)},Us.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=D(t));for(var r=0,a=this.length;r<a;r++){i.push(e=[]);for(var o,s=0,u=(o=this[r]).length;s<u;s++)(n=o[s])&&t.call(n,n.__data__,s,r)&&e.push(n)}return Vr(i,this.namespace,this.id)},Us.tween=function(e,n){var i=this.id,r=this.namespace;return arguments.length<2?this.node()[r][i].tween.get(e):N(this,null==n?function(t){t[r][i].tween.remove(e)}:function(t){t[r][i].tween.set(e,n)})},Us.attr=function(t,e){function i(){this.removeAttribute(o)}function r(){this.removeAttributeNS(o.space,o.local)}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?si:Un,o=Br.ns.qualify(t);return Gr(this,"attr."+t,e,o.local?function(n){return null==n?r:(n+="",function(){var e,t=this.getAttributeNS(o.space,o.local);return t!==n&&(e=a(t,n),function(t){this.setAttributeNS(o.space,o.local,e(t))})})}:function(n){return null==n?i:(n+="",function(){var e,t=this.getAttribute(o);return t!==n&&(e=a(t,n),function(t){this.setAttribute(o,e(t))})})})},Us.attrTween=function(t,i){var r=Br.ns.qualify(t);return this.tween("attr."+t,r.local?function(t,e){var n=i.call(this,t,e,this.getAttributeNS(r.space,r.local));return n&&function(t){this.setAttributeNS(r.space,r.local,n(t))}}:function(t,e){var n=i.call(this,t,e,this.getAttribute(r));return n&&function(t){this.setAttribute(r,n(t))}})},Us.style=function(i,t,r){function e(){this.style.removeProperty(i)}var n=arguments.length;if(n<3){if("string"!=typeof i){for(r in n<2&&(t=""),i)this.style(r,i[r],t);return this}r=""}return Gr(this,"style."+i,t,function(n){return null==n?e:(n+="",function(){var e,t=Wr.getComputedStyle(this,null).getPropertyValue(i);return t!==n&&(e=Un(t,n),function(t){this.style.setProperty(i,e(t),r)})})})},Us.styleTween=function(i,r,a){return arguments.length<3&&(a=""),this.tween("style."+i,function(t,e){var n=r.call(this,t,e,Wr.getComputedStyle(this,null).getPropertyValue(i));return n&&function(t){this.style.setProperty(i,n(t),a)}})},Us.text=function(t){return Gr(this,"text",t,Rr)},Us.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Us.ease=function(e){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:("function"!=typeof e&&(e=Br.ease.apply(Br,arguments)),N(this,function(t){t[i][n].ease=e}))},Us.delay=function(i){var r=this.id,a=this.namespace;return arguments.length<1?this.node()[a][r].delay:N(this,"function"==typeof i?function(t,e,n){t[a][r].delay=+i.call(t,t.__data__,e,n)}:(i=+i,function(t){t[a][r].delay=i}))},Us.duration=function(i){var r=this.id,a=this.namespace;return arguments.length<1?this.node()[a][r].duration:N(this,"function"==typeof i?function(t,e,n){t[a][r].duration=Math.max(1,i.call(t,t.__data__,e,n))}:(i=Math.max(1,i),function(t){t[a][r].duration=i}))},Us.each=function(i,n){var r=this.id,a=this.namespace;if(arguments.length<2){var t=Bs,e=Hs;Hs=r,N(this,function(t,e,n){Bs=t[a][r],i.call(t,t.__data__,e,n)}),Bs=t,Hs=e}else N(this,function(t){var e=t[a][r];(e.event||(e.event=Br.dispatch("start","end","interrupt"))).on(i,n)});return this},Us.transition=function(){for(var t,e,n,i=this.id,r=++qs,a=this.namespace,o=[],s=0,u=this.length;s<u;s++){o.push(t=[]);for(var c,l=0,h=(c=this[s]).length;l<h;l++)(e=c[l])&&Ir(e,l,a,r,{time:(n=e[a][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return Vr(o,a,r)},Br.svg.axis=function(){function n(t){t.each(function(){var t,e=Br.select(this),n=this.__chart__||C,i=this.__chart__=C.copy(),r=null==R?i.ticks?i.ticks.apply(i,G):i.domain():R,a=null==P?i.tickFormat?i.tickFormat.apply(i,G):bt:P,o=e.selectAll(".tick").data(r,i),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity",va),u=Br.transition(o.exit()).style("opacity",va).remove(),c=Br.transition(o.order()).style("opacity",1),l=Math.max(M,0)+V,h=Wi(i),d=e.selectAll(".domain").data([0]),f=(d.enter().append("path").attr("class","domain"),Br.transition(d));s.append("line"),s.append("text");var g,p,x,_,y=s.select("line"),v=c.select("line"),m=o.select("text").text(a),S=s.select("text"),b=c.select("text"),A="top"===L||"left"===L?-1:1;if("bottom"===L||"top"===L?(t=Or,g="x",x="y",p="x2",_="y2",m.attr("dy",A<0?"0em":".71em").style("text-anchor","middle"),f.attr("d","M"+h[0]+","+A*E+"V0H"+h[1]+"V"+A*E)):(t=Dr,g="y",x="x",p="y2",_="x2",m.attr("dy",".32em").style("text-anchor",A<0?"end":"start"),f.attr("d","M"+A*E+","+h[0]+"H0V"+h[1]+"H"+A*E)),y.attr(_,A*M),S.attr(x,A*l),v.attr(p,0).attr(_,A*M),b.attr(g,0).attr(x,A*l),i.rangeBand){var T=i,w=T.rangeBand()/2;n=i=function(t){return T(t)+w}}else n.rangeBand?n=i:u.call(t,i,n);s.call(t,n,i),c.call(t,i,i)})}var P,C=Br.scale.linear(),L=Ws,M=6,E=6,V=3,G=[10],R=null;return n.scale=function(t){return arguments.length?(C=t,n):C},n.orient=function(t){return arguments.length?(L=t in Qs?t+"":Ws,n):L},n.ticks=function(){return arguments.length?(G=arguments,n):G},n.tickValues=function(t){return arguments.length?(R=t,n):R},n.tickFormat=function(t){return arguments.length?(P=t,n):P},n.tickSize=function(t){var e=arguments.length;return e?(M=+t,E=+arguments[e-1],n):M},n.innerTickSize=function(t){return arguments.length?(M=+t,n):M},n.outerTickSize=function(t){return arguments.length?(E=+t,n):E},n.tickPadding=function(t){return arguments.length?(V=+t,n):V},n.tickSubdivide=function(){return arguments.length&&n},n};var Ws="bottom",Qs={top:1,right:1,bottom:1,left:1};Br.svg.brush=function(){function y(t){t.each(function(){var t=Br.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(s,bt);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Zs[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",y.empty()?"none":null);var i,r=Br.transition(t),a=Br.transition(e);w&&(i=Wi(w),a.attr("x",i[0]).attr("width",i[1]-i[0]),m(r)),P&&(i=Wi(P),a.attr("y",i[0]).attr("height",i[1]-i[0]),S(r)),v(r)})}function v(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+C[+/e$/.test(t)]+","+L[+/^s/.test(t)]+")"})}function m(t){t.select(".extent").attr("x",C[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",C[1]-C[0])}function S(t){t.select(".extent").attr("y",L[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",L[1]-L[0])}function o(){function t(){var t=Br.mouse(r),e=!1;i&&(t[0]+=i[0],t[1]+=i[1]),d||(Br.event.altKey?(h=h||[(C[0]+C[1])/2,(L[0]+L[1])/2],g[0]=C[+(t[0]<h[0])],g[1]=L[+(t[1]<h[1])]):h=null),c&&n(t,w,0)&&(m(s),e=!0),l&&n(t,P,1)&&(S(s),e=!0),e&&(v(s),o({type:"brush",mode:d?"move":"resize"}))}function n(t,e,n){var i,r,a=Wi(e),o=a[0],s=a[1],u=g[n],c=n?L:C,l=c[1]-c[0];return d&&(o-=u,s-=l+u),i=(n?E:M)?Math.max(o,Math.min(s,t[n])):t[n],d?r=(i+=u)+l:(h&&(u=Math.max(o,Math.min(s,2*h[n]-i))),u<i?(r=i,i=u):r=u),c[0]!=i||c[1]!=r?(n?A=null:b=null,c[0]=i,c[1]=r,!0):void 0}function e(){t(),s.style("pointer-events","all").selectAll(".resize").style("display",y.empty()?"none":null),Br.select("body").style("cursor",null),p.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),f(),o({type:"brushend"})}var h,i,r=this,a=Br.select(Br.event.target),o=T.of(r,arguments),s=Br.select(r),u=a.datum(),c=!/^(n|s)$/.test(u)&&w,l=!/^(e|w)$/.test(u)&&P,d=a.classed("extent"),f=Y(),g=Br.mouse(r),p=Br.select(Wr).on("keydown.brush",function(){32==Br.event.keyCode&&(d||(h=null,g[0]-=C[1],g[1]-=L[1],d=2),R())}).on("keyup.brush",function(){32==Br.event.keyCode&&2==d&&(g[0]+=C[1],g[1]+=L[1],d=0,R())});if(Br.event.changedTouches?p.on("touchmove.brush",t).on("touchend.brush",e):p.on("mousemove.brush",t).on("mouseup.brush",e),s.interrupt().selectAll("*").interrupt(),d)g[0]=C[0]-g[0],g[1]=L[0]-g[1];else if(u){var x=+/w$/.test(u),_=+/^n/.test(u);i=[C[1-x]-g[0],L[1-_]-g[1]],g[0]=C[x],g[1]=L[_]}else Br.event.altKey&&(h=g.slice());s.style("pointer-events","none").selectAll(".resize").style("display",null),Br.select("body").style("cursor",a.style("cursor")),o({type:"brushstart"}),t()}var b,A,T=k(y,"brushstart","brush","brushend"),w=null,P=null,C=[0,0],L=[0,0],M=!0,E=!0,s=Ks[0];return y.event=function(t){t.each(function(){var i=T.of(this,arguments),r={x:C,y:L,i:b,j:A},t=this.__chart__||r;this.__chart__=r,Hs?Br.select(this).transition().each("start.brush",function(){b=t.i,A=t.j,C=t.x,L=t.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=qn(C,r.x),n=qn(L,r.y);return b=A=null,function(t){C=r.x=e(t),L=r.y=n(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){b=r.i,A=r.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},y.x=function(t){return arguments.length?(s=Ks[!(w=t)<<1|!P],y):w},y.y=function(t){return arguments.length?(s=Ks[!w<<1|!(P=t)],y):P},y.clamp=function(t){return arguments.length?(w&&P?(M=!!t[0],E=!!t[1]):w?M=!!t:P&&(E=!!t),y):w&&P?[M,E]:w?M:P?E:null},y.extent=function(t){var e,n,i,r,a;return arguments.length?(w&&(e=t[0],n=t[1],P&&(e=e[0],n=n[0]),b=[e,n],w.invert&&(e=w(e),n=w(n)),n<e&&(a=e,e=n,n=a),e==C[0]&&n==C[1]||(C=[e,n])),P&&(i=t[0],r=t[1],w&&(i=i[1],r=r[1]),A=[i,r],P.invert&&(i=P(i),r=P(r)),r<i&&(a=i,i=r,r=a),i==L[0]&&r==L[1]||(L=[i,r])),y):(w&&(b?(e=b[0],n=b[1]):(e=C[0],n=C[1],w.invert&&(e=w.invert(e),n=w.invert(n)),n<e&&(a=e,e=n,n=a))),P&&(A?(i=A[0],r=A[1]):(i=L[0],r=L[1],P.invert&&(i=P.invert(i),r=P.invert(r)),r<i&&(a=i,i=r,r=a))),w&&P?[[e,i],[n,r]]:w?[e,n]:P&&[i,r])},y.clear=function(){return y.empty()||(C=[0,0],L=[0,0],b=A=null),y},y.empty=function(){return!!w&&C[0]==C[1]||!!P&&L[0]==L[1]},Br.rebind(y,T,"on")};var Zs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ks=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],$s=Qa.format=eo.timeFormat,Js=$s.utc,tu=Js("%Y-%m-%dT%H:%M:%S.%LZ");$s.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Nr:tu,Nr.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Nr.toString=tu.toString,Qa.second=Vt(function(t){return new Za(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Qa.seconds=Qa.second.range,Qa.seconds.utc=Qa.second.utc.range,Qa.minute=Vt(function(t){return new Za(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Qa.minutes=Qa.minute.range,Qa.minutes.utc=Qa.minute.utc.range,Qa.hour=Vt(function(t){var e=t.getTimezoneOffset()/60;return new Za(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Qa.hours=Qa.hour.range,Qa.hours.utc=Qa.hour.utc.range,Qa.month=Vt(function(t){return(t=Qa.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Qa.months=Qa.month.range,Qa.months.utc=Qa.month.utc.range;var eu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],nu=[[Qa.second,1],[Qa.second,5],[Qa.second,15],[Qa.second,30],[Qa.minute,1],[Qa.minute,5],[Qa.minute,15],[Qa.minute,30],[Qa.hour,1],[Qa.hour,3],[Qa.hour,6],[Qa.hour,12],[Qa.day,1],[Qa.day,2],[Qa.week,1],[Qa.month,1],[Qa.month,3],[Qa.year,1]],iu=$s.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",ye]]),ru={range:function(t,e,n){return Br.range(Math.ceil(t/n)*n,+e,n).map(zr)},floor:bt,ceil:bt};nu.year=Qa.year,Qa.scale=function(){return Fr(Br.scale.linear(),nu,iu)};var au=nu.map(function(t){return[t[0].utc,t[1]]}),ou=Js.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",ye]]);au.year=Qa.year.utc,Qa.scale.utc=function(){return Fr(Br.scale.linear(),au,ou)},Br.text=At(function(t){return t.responseText}),Br.json=function(t,e){return Tt(t,"application/json",Xr,e)},Br.html=function(t,e){return Tt(t,"text/html",Hr,e)},Br.xml=At(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(Br):"object"==typeof module&&module.exports&&(module.exports=Br),this.d3=Br}(),function(c){"use strict";function e(t){this.owner=t}function n(t){var e=this.internal=new i(this);e.loadConfig(t),e.beforeInit(t),e.init(),e.afterInit(t),function e(n,i,r){Object.keys(n).forEach(function(t){i[t]=n[t].bind(r),0<Object.keys(n[t]).length&&e(n[t],i[t],r)})}(r,this,this)}function i(t){this.d3=c.d3?c.d3:"undefined"!=typeof require?require("d3"):void 0,this.api=t,this.config=this.getDefaultConfig(),this.data={},this.cache={},this.axes={}}function s(t){e.call(this,t)}function h(G,R){function k(t,e){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+q)+", 0)"})}function I(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})}function O(t){var e=n?n(t):t;return void 0!==e?e:""}function D(t){return R.withoutTransition?t:G.transition(t)}function N(t){t.each(function(){function t(t,e){var n=S.h;return 0===e&&(n="left"===B||"right"===B?-((b[t.index]-1)*(S.h/2)-3):".71em"),n}var e,n,i,r=N.g=G.select(this),a=this.__chart__||H,u=this.__chart__=function(){var t,e=H.copy();return R.isCategory&&(t=H.domain(),e.domain([t[0],t[1]-1])),e}(),c=U||function(t){var e,n,i=[];if(t.ticks)return t.ticks.apply(t,z);for(n=t.domain(),e=Math.ceil(n[0]);e<n[1];e++)i.push(e);return 0<i.length&&0<i[0]&&i.unshift(i[0]-(i[1]-i[0])),i}(u),o=r.selectAll(".tick").data(c,u),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),l=o.exit().remove(),h=D(o).style("opacity",1),d=H.rangeExtent?H.rangeExtent():function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}(H.range()),f=r.selectAll(".domain").data([0]),g=(f.enter().append("path").attr("class","domain"),D(f));s.append("line"),s.append("text");var p=s.select("line"),x=h.select("line"),_=s.select("text"),y=h.select("text");R.isCategory?(q=Math.ceil((u(1)-u(0))/2),n=X?0:q,i=X?q:0):q=n=0;var v,m,S=function(t){if(W)return W;var a={h:11.5,w:5.5};return t.select("text").text(O).each(function(t){var e=this.getBoundingClientRect(),n=O(t),i=e.height,r=n?e.width/n.length:void 0;i&&r&&(a.h=i,a.w=r)}).text(""),W=a}(r.select(".tick")),b=[],A=Math.max(Y,0)+j,T="left"===B||"right"===B;(m=(v=o.select("text")).selectAll("tspan").data(function(t,e){var n=R.tickMultiline?function(t,r){var a,o,s,e=O(t);return"[object Array]"===Object.prototype.toString.call(e)?e:((!r||r<=0)&&(r=T?95:R.isCategory?Math.ceil(u(c[1])-u(c[0]))-12:110),function t(e,n){o=void 0;for(var i=1;i<n.length;i++)if(" "===n.charAt(i)&&(o=i),a=n.substr(0,i+1),s=S.w*a.length,r<s)return t(e.concat(n.substr(0,o||i)),n.slice(o?o+1:i));return e.concat(n)}([],e+""))}(t,R.tickWidth):[].concat(O(t));return b[e]=n.length,n.map(function(t){return{index:e,splitted:t}})})).enter().append("tspan"),m.exit().remove(),m.text(function(t){return t.splitted});var w,P,C,L,M=R.tickTextRotate;switch(B){case"bottom":e=k,p.attr("y2",Y),_.attr("y",A),x.attr("x1",n).attr("x2",n).attr("y2",function(t){var e=H(t)+(X?0:q);return d[0]<e&&e<d[1]?Y:0}),y.attr("x",0).attr("y",(L=M)?11.5-L/15*2.5*(0<L?1:-1):A).style("text-anchor",(C=M)?0<C?"start":"end":"middle").attr("transform",(P=M)?"rotate("+P+")":""),m.attr("x",0).attr("dy",t).attr("dx",(w=M)?8*Math.sin(Math.PI*(w/180)):0),g.attr("d","M"+d[0]+","+F+"V0H"+d[1]+"V"+F);break;case"top":e=k,p.attr("y2",-Y),_.attr("y",-A),x.attr("x2",0).attr("y2",-Y),y.attr("x",0).attr("y",-A),v.style("text-anchor","middle"),m.attr("x",0).attr("dy","0em"),g.attr("d","M"+d[0]+","+-F+"V0H"+d[1]+"V"+-F);break;case"left":e=I,p.attr("x2",-Y),_.attr("x",-A),x.attr("x2",-Y).attr("y1",i).attr("y2",i),y.attr("x",-A).attr("y",q),v.style("text-anchor","end"),m.attr("x",-A).attr("dy",t),g.attr("d","M"+-F+","+d[0]+"H0V"+d[1]+"H"+-F);break;case"right":e=I,p.attr("x2",Y),_.attr("x",A),x.attr("x2",Y).attr("y2",0),y.attr("x",A).attr("y",0),v.style("text-anchor","start"),m.attr("x",A).attr("dy",t),g.attr("d","M"+F+","+d[0]+"H0V"+d[1]+"H"+F)}if(u.rangeBand){var E=u,V=E.rangeBand()/2;a=u=function(t){return E(t)+V}}else a.rangeBand?a=u:l.call(e,u);s.call(e,a),h.call(e,u)})}var F,n,z,X,H=G.scale.linear(),B="bottom",Y=6,j=3,U=null,q=0,e=!0;return F=(R=R||{}).withOuterTick?6:0,N.scale=function(t){return arguments.length?(H=t,N):H},N.orient=function(t){return arguments.length?(B=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",N):B},N.tickFormat=function(t){return arguments.length?(n=t,N):n},N.tickCentered=function(t){return arguments.length?(X=t,N):X},N.tickOffset=function(){return q},N.tickInterval=function(){var t;return(t=R.isCategory?2*q:(N.g.select("path.domain").node().getTotalLength()-2*F)/N.g.selectAll("line").size())===1/0?0:t},N.ticks=function(){return arguments.length?(z=arguments,N):z},N.tickCulling=function(t){return arguments.length?(e=t,N):e},N.tickValues=function(t){if("function"==typeof t)U=function(){return t(H.domain())};else{if(!arguments.length)return U;U=t}return N},N}var r,l,t={version:"0.4.11",generate:function(t){return new n(t)}};t.chart={fn:n.prototype,internal:{fn:i.prototype,axis:{fn:s.prototype}}},r=t.chart.fn,l=t.chart.internal.fn,t.chart.internal.axis.fn,l.beforeInit=function(){},l.afterInit=function(){},l.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},l.initParams=function(){var t=this,e=t.d3,n=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeFormat=n.data_xLocaltime?e.time.format:e.time.format.utc,t.axisTimeFormat=n.axis_x_localtime?e.time.format:e.time.format.utc,t.defaultAxisTimeFormat=t.axisTimeFormat.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%-m/%-d",function(t){return t.getDay()&&1!==t.getDate()}],["%-m/%-d",function(t){return 1!==t.getDate()}],["%-m/%-d",function(t){return t.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=n.axis_rotated?"left":"bottom",t.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",t.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",t.subXOrient=n.axis_rotated?"left":"bottom",t.isLegendRight="right"===n.legend_position,t.isLegendInset="inset"===n.legend_position,t.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,t.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},l.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},l.initWithData=function(t){var e,n,i=this,r=i.d3,a=i.config,o=!0;i.axis=new s(i),i.initPie&&i.initPie(),i.initBrush&&i.initBrush(),i.initZoom&&i.initZoom(),a.bindto?"function"==typeof a.bindto.node?i.selectChart=a.bindto:i.selectChart=r.select(a.bindto):i.selectChart=r.selectAll([]),i.selectChart.empty()&&(i.selectChart=r.select(document.createElement("div")).style("opacity",0),i.observeInserted(i.selectChart),o=!1),i.selectChart.html("").classed("c3",!0),i.data.xs={},i.data.targets=i.convertDataToTargets(t),a.data_filter&&(i.data.targets=i.data.targets.filter(a.data_filter)),a.data_hide&&i.addHiddenTargetIds(!0===a.data_hide?i.mapToIds(i.data.targets):a.data_hide),a.legend_hide&&i.addHiddenLegendIds(!0===a.legend_hide?i.mapToIds(i.data.targets):a.legend_hide),i.hasType("gauge")&&(a.legend_show=!1),i.updateSizes(),i.updateScales(),i.x.domain(r.extent(i.getXDomain(i.data.targets))),i.y.domain(i.getYDomain(i.data.targets,"y")),i.y2.domain(i.getYDomain(i.data.targets,"y2")),i.subX.domain(i.x.domain()),i.subY.domain(i.y.domain()),i.subY2.domain(i.y2.domain()),i.orgXDomain=i.x.domain(),i.brush&&i.brush.scale(i.subX),a.zoom_enabled&&i.zoom.scale(i.x),i.svg=i.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return a.onmouseover.call(i)}).on("mouseleave",function(){return a.onmouseout.call(i)}),i.config.svg_classname&&i.svg.attr("class",i.config.svg_classname),e=i.svg.append("defs"),i.clipChart=i.appendClip(e,i.clipId),i.clipXAxis=i.appendClip(e,i.clipIdForXAxis),i.clipYAxis=i.appendClip(e,i.clipIdForYAxis),i.clipGrid=i.appendClip(e,i.clipIdForGrid),i.clipSubchart=i.appendClip(e,i.clipIdForSubchart),i.updateSvgSize(),n=i.main=i.svg.append("g").attr("transform",i.getTranslate("main")),i.initSubchart&&i.initSubchart(),i.initTooltip&&i.initTooltip(),i.initLegend&&i.initLegend(),i.initTitle&&i.initTitle(),n.append("text").attr("class",X.text+" "+X.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),i.initRegion(),i.initGrid(),n.append("g").attr("clip-path",i.clipPath).attr("class",X.chart),a.grid_lines_front&&i.initGridLines(),i.initEventRect(),i.initChartElements(),n.insert("rect",a.zoom_privileged?null:"g."+X.regions).attr("class",X.zoomRect).attr("width",i.width).attr("height",i.height).style("opacity",0).on("dblclick.zoom",null),a.axis_x_extent&&i.brush.extent(i.getDefaultExtent()),i.axis.init(),i.updateTargets(i.data.targets),o&&(i.updateDimension(),i.config.oninit.call(i),i.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),i.bindResize(),i.api.element=i.selectChart.node()},l.smoothLines=function(t,e){var a=this;"grid"===e&&t.each(function(){var t=a.d3.select(this),e=t.attr("x1"),n=t.attr("x2"),i=t.attr("y1"),r=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(n),y1:Math.ceil(i),y2:Math.ceil(r)})})},l.updateSizes=function(){var t=this,e=t.config,n=t.legend?t.getLegendHeight():0,i=t.legend?t.getLegendWidth():0,r=t.isLegendRight||t.isLegendInset?0:n,a=t.hasArcType(),o=e.axis_rotated||a?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&&!a?e.subchart_size_height+o:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+r+t.getCurrentPaddingBottom(),left:s+(a?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:o+s+r+t.getCurrentPaddingBottom(),left:a?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+r,left:t.rotated_padding_left}:{top:t.currentHeight-s-r,right:NaN,bottom:o+r,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(n,i),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?i+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&a&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},l.updateTargets=function(t){this.updateTargetsForText(t),this.updateTargetsForBar(t),this.updateTargetsForLine(t),this.hasArcType()&&this.updateTargetsForArc&&this.updateTargetsForArc(t),this.updateTargetsForSubchart&&this.updateTargetsForSubchart(t),this.showTargets()},l.showTargets=function(){var e=this;e.svg.selectAll("."+X.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},l.redraw=function(t,e){var n,i,r,a,o,s,u,c,l,h,d,f,g,p,x,_,y,v,m,S,b,A,T,w,P,C,L,M,E,V=this,G=V.main,R=V.d3,k=V.config,I=V.getShapeIndices(V.isAreaType),O=V.getShapeIndices(V.isBarType),D=V.getShapeIndices(V.isLineType),N=V.hasArcType(),F=V.filterTargetsToShow(V.data.targets),z=V.xv.bind(V);if(n=H(t=t||{},"withY",!0),i=H(t,"withSubchart",!0),r=H(t,"withTransition",!0),s=H(t,"withTransform",!1),u=H(t,"withUpdateXDomain",!1),c=H(t,"withUpdateOrgXDomain",!1),l=H(t,"withTrimXDomain",!0),g=H(t,"withUpdateXAxis",u),h=H(t,"withLegend",!1),d=H(t,"withEventRect",!0),f=H(t,"withDimension",!0),a=H(t,"withTransitionForExit",r),o=H(t,"withTransitionForAxis",r),m=r?k.transition_duration:0,S=a?m:0,b=o?m:0,e=e||V.axis.generateTransitions(b),h&&k.legend_show?V.updateLegend(V.mapToIds(V.data.targets),t,e):f&&V.updateDimension(!0),V.isCategorized()&&0===F.length&&V.x.domain([0,V.axes.x.selectAll(".tick").size()]),F.length?(V.updateXDomain(F,u,c,l),k.axis_x_tick_values||(w=V.axis.updateXAxisTickValues(F))):(V.xAxis.tickValues([]),V.subXAxis.tickValues([])),k.zoom_rescale&&!t.flow&&(L=V.x.orgDomain()),V.y.domain(V.getYDomain(F,"y",L)),V.y2.domain(V.getYDomain(F,"y2",L)),!k.axis_y_tick_values&&k.axis_y_tick_count&&V.yAxis.tickValues(V.axis.generateTickValues(V.y.domain(),k.axis_y_tick_count)),!k.axis_y2_tick_values&&k.axis_y2_tick_count&&V.y2Axis.tickValues(V.axis.generateTickValues(V.y2.domain(),k.axis_y2_tick_count)),V.axis.redraw(e,N),V.axis.updateLabels(r),(u||g)&&F.length)if(k.axis_x_tick_culling&&w){for(P=1;P<w.length;P++)if(w.length/P<k.axis_x_tick_culling_max){C=P;break}V.svg.selectAll("."+X.axisX+" .tick text").each(function(t){var e=w.indexOf(t);0<=e&&R.select(this).style("display",e%C?"none":"block")})}else V.svg.selectAll("."+X.axisX+" .tick text").style("display","block");p=V.generateDrawArea?V.generateDrawArea(I,!1):void 0,x=V.generateDrawBar?V.generateDrawBar(O):void 0,_=V.generateDrawLine?V.generateDrawLine(D,!1):void 0,y=V.generateXYForText(I,O,D,!0),v=V.generateXYForText(I,O,D,!1),n&&(V.subY.domain(V.getYDomain(F,"y")),V.subY2.domain(V.getYDomain(F,"y2"))),V.updateXgridFocus(),G.select("text."+X.text+"."+X.empty).attr("x",V.width/2).attr("y",V.height/2).text(k.data_empty_label_text).transition().style("opacity",F.length?0:1),V.updateGrid(m),V.updateRegion(m),V.updateBar(S),V.updateLine(S),V.updateArea(S),V.updateCircle(),V.hasDataLabel()&&V.updateText(S),V.redrawTitle&&V.redrawTitle(),V.redrawArc&&V.redrawArc(m,S,s),V.redrawSubchart&&V.redrawSubchart(i,e,m,S,I,O,D),G.selectAll("."+X.selectedCircles).filter(V.isBarType.bind(V)).selectAll("circle").remove(),k.interaction_enabled&&!t.flow&&d&&(V.redrawEventRect(),V.updateZoom&&V.updateZoom()),V.updateCircleY(),M=(V.config.axis_rotated?V.circleY:V.circleX).bind(V),E=(V.config.axis_rotated?V.circleX:V.circleY).bind(V),t.flow&&(T=V.generateFlow({targets:F,flow:t.flow,duration:t.flow.duration,drawBar:x,drawLine:_,drawArea:p,cx:M,cy:E,xv:z,xForText:y,yForText:v})),(m||T)&&V.isTabVisible()?R.transition().duration(m).each(function(){var e=[];[V.redrawBar(x,!0),V.redrawLine(_,!0),V.redrawArea(p,!0),V.redrawCircle(M,E,!0),V.redrawText(y,v,t.flow,!0),V.redrawRegion(!0),V.redrawGrid(!0)].forEach(function(t){t.forEach(function(t){e.push(t)})}),A=V.generateWait(),e.forEach(function(t){A.add(t)})}).call(A,function(){T&&T(),k.onrendered&&k.onrendered.call(V)}):(V.redrawBar(x),V.redrawLine(_),V.redrawArea(p),V.redrawCircle(M,E),V.redrawText(y,v,t.flow),V.redrawRegion(),V.redrawGrid(),k.onrendered&&k.onrendered.call(V)),V.mapToIds(V.data.targets).forEach(function(t){V.withoutFadeIn[t]=!0})},l.updateAndRedraw=function(t){var e,n=this.config;(t=t||{}).withTransition=H(t,"withTransition",!0),t.withTransform=H(t,"withTransform",!1),t.withLegend=H(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=H(t,"withTransitionForTransform",t.withTransition),this.updateSizes(),t.withLegend&&n.legend_show||(e=this.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0),this.updateScales(),this.updateSvgSize(),this.transformAll(t.withTransitionForTransform,e)),this.redraw(t,e)},l.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},l.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},l.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},l.isCustomX=function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||C(t.data_xs))},l.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},l.getTranslate=function(t){var e,n,i=this,r=i.config;return"main"===t?(e=u(i.margin.left),n=u(i.margin.top)):"context"===t?(e=u(i.margin2.left),n=u(i.margin2.top)):"legend"===t?(e=i.margin3.left,n=i.margin3.top):"x"===t?(e=0,n=r.axis_rotated?0:i.height):"y"===t?(e=0,n=r.axis_rotated?i.height:0):"y2"===t?(e=r.axis_rotated?0:i.width,n=r.axis_rotated?1:0):"subx"===t?(e=0,n=r.axis_rotated?0:i.height2):"arc"===t&&(e=i.arcWidth/2,n=i.arcHeight/2),"translate("+e+","+n+")"},l.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},l.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},l.opacityForCircle=function(t){var e=this.config.point_show?1:0;return P(t.value)?this.isScatterType(t)?.5:e:0},l.opacityForText=function(){return this.hasDataLabel()?1:0},l.xx=function(t){return t?this.x(t.x):null},l.xv=function(t){var e=t.value;return this.isTimeSeries()?e=this.parseDate(t.value):this.isCategorized()&&"string"==typeof t.value&&(e=this.config.axis_x_categories.indexOf(t.value)),Math.ceil(this.x(e))},l.yv=function(t){var e=t.axis&&"y2"===t.axis?this.y2:this.y;return Math.ceil(e(t.value))},l.subxx=function(t){return t?this.subX(t.x):null},l.transformMain=function(t,e){var n,i,r,a=this;e&&e.axisX?n=e.axisX:(n=a.main.select("."+X.axisX),t&&(n=n.transition())),e&&e.axisY?i=e.axisY:(i=a.main.select("."+X.axisY),t&&(i=i.transition())),e&&e.axisY2?r=e.axisY2:(r=a.main.select("."+X.axisY2),t&&(r=r.transition())),(t?a.main.transition():a.main).attr("transform",a.getTranslate("main")),n.attr("transform",a.getTranslate("x")),i.attr("transform",a.getTranslate("y")),r.attr("transform",a.getTranslate("y2")),a.main.select("."+X.chartArcs).attr("transform",a.getTranslate("arc"))},l.transformAll=function(t,e){this.transformMain(t,e),this.config.subchart_show&&this.transformContext(t,e),this.legend&&this.transformLegend(t)},l.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .background");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.svg.select("."+X.zoomRect).attr("width",t.width).attr("height",t.height),t.selectChart.style("max-height",t.currentHeight+"px")},l.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},l.observeInserted=function(e){var n,i=this;return"undefined"==typeof MutationObserver?void c.console.error("MutationObserver not defined."):void(n=new MutationObserver(function(t){t.forEach(function(t){"childList"===t.type&&t.previousSibling&&(n.disconnect(),i.intervalForObserveInserted=c.setInterval(function(){e.node().parentNode&&(c.clearInterval(i.intervalForObserveInserted),i.updateDimension(),i.brush&&i.brush.update(),i.config.oninit.call(i),i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})})).observe(e.node(),{attributes:!0,childList:!0,characterData:!0})},l.bindResize=function(){var t=this,e=t.config;if(t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){e.onresize.call(t)}),e.resize_auto&&t.resizeFunction.add(function(){void 0!==t.resizeTimeout&&c.clearTimeout(t.resizeTimeout),t.resizeTimeout=c.setTimeout(function(){delete t.resizeTimeout,t.api.flush()},100)}),t.resizeFunction.add(function(){e.onresized.call(t)}),c.attachEvent)c.attachEvent("onresize",t.resizeFunction);else if(c.addEventListener)c.addEventListener("resize",t.resizeFunction,!1);else{var n=c.onresize;n?n.add&&n.remove||(n=t.generateResize()).add(c.onresize):n=t.generateResize(),n.add(t.resizeFunction),c.onresize=n}},l.generateResize=function(){function t(){n.forEach(function(t){t()})}var n=[];return t.add=function(t){n.push(t)},t.remove=function(t){for(var e=0;e<n.length;e++)if(n[e]===t){n.splice(e,1);break}},t},l.endall=function(t,e){var n=0;t.each(function(){++n}).each("end",function(){--n||e.apply(this,arguments)})},l.generateWait=function(){function t(t,n){var i=setInterval(function(){var e=0;r.forEach(function(t){if(t.empty())e+=1;else try{t.transition()}catch(t){e+=1}}),e===r.length&&(clearInterval(i),n&&n())},10)}var r=[];return t.add=function(t){r.push(t)},t},l.parseDate=function(t){var e;return t instanceof Date?e=t:"string"==typeof t?e=this.dataTimeFormat(this.config.data_xFormat).parse(t):"number"!=typeof t||isNaN(t)||(e=new Date(+t)),e&&!isNaN(+e)||c.console.error("Failed to parse x '"+t+"' to Date object"),e},l.isTabVisible=function(){var t;return void 0!==document.hidden?t="hidden":void 0!==document.mozHidden?t="mozHidden":void 0!==document.msHidden?t="msHidden":void 0!==document.webkitHidden&&(t="webkitHidden"),!document[t]},l.getDefaultConfig=function(){var e={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,n,i){return this.getTooltipContent?this.getTooltipContent(t,e,n,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},l.additionalConfig={},l.loadConfig=function(e){var n,i,r,a=this.config;Object.keys(a).forEach(function(t){n=e,i=t.split("_"),r=function t(){var e=i.shift();return e&&n&&"object"==typeof n&&e in n?(n=n[e],t()):e?void 0:n}(),I(r)&&(a[t]=r)})},l.getScale=function(t,e,n){return(n?this.d3.time.scale():this.d3.scale.linear()).range([t,e])},l.getX=function(t,e,n,i){var r,a=this.getScale(t,e,this.isTimeSeries()),o=n?a.domain(n):a;for(r in a=this.isCategorized()?(i=i||function(){return 0},function(t,e){var n=o(t)+i(t);return e?n:Math.ceil(n)}):function(t,e){var n=o(t);return e?n:Math.ceil(n)},o)a[r]=o[r];return a.orgDomain=function(){return o.domain()},this.isCategorized()&&(a.domain=function(t){return arguments.length?(o.domain(t),a):[(t=this.orgDomain())[0],t[1]+1]}),a},l.getY=function(t,e,n){var i=this.getScale(t,e,this.isTimeSeriesY());return n&&i.domain(n),i},l.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},l.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},l.updateScales=function(){var e=this,t=e.config,n=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,n?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,n?t.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,n?t.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,n?t.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,n?t.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,t.axis_y_tick_format,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,t.axis_y2_tick_format,e.y2AxisTickValues,t.axis_y2_tick_outer),n||(e.brush&&e.brush.scale(e.subX),t.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},l.getYDomainMin=function(t){var e,n,i,r,a,o,s=this,u=s.config,c=s.mapToIds(t),l=s.getValuesAsIdKeyed(t);if(0<u.data_groups.length)for(o=s.hasNegativeValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(r=u.data_groups[e].filter(function(t){return 0<=c.indexOf(t)})).length)for(i=r[0],o&&l[i]&&l[i].forEach(function(t,e){l[i][e]=t<0?t:0}),n=1;n<r.length;n++)a=r[n],l[a]&&l[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(i)||!l[i]||o&&0<+t||(l[i][e]+=+t)});return s.d3.min(Object.keys(l).map(function(t){return s.d3.min(l[t])}))},l.getYDomainMax=function(t){var e,n,i,r,a,o,s=this,u=s.config,c=s.mapToIds(t),l=s.getValuesAsIdKeyed(t);if(0<u.data_groups.length)for(o=s.hasPositiveValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(r=u.data_groups[e].filter(function(t){return 0<=c.indexOf(t)})).length)for(i=r[0],o&&l[i]&&l[i].forEach(function(t,e){l[i][e]=0<t?t:0}),n=1;n<r.length;n++)a=r[n],l[a]&&l[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(i)||!l[i]||o&&+t<0||(l[i][e]+=+t)});return s.d3.max(Object.keys(l).map(function(t){return s.d3.max(l[t])}))},l.getYDomain=function(t,e,n){var i,r,a,o,s,u,c,l,h,d,f=this,g=f.config,p=t.filter(function(t){return f.axis.getId(t.id)===e}),x=n?f.filterByXDomain(p,n):p,_="y2"===e?g.axis_y2_min:g.axis_y_min,y="y2"===e?g.axis_y2_max:g.axis_y_max,v=f.getYDomainMin(x),m=f.getYDomainMax(x),S="y2"===e?g.axis_y2_center:g.axis_y_center,b=f.hasType("bar",x)&&g.bar_zerobased||f.hasType("area",x)&&g.area_zerobased,A="y2"===e?g.axis_y2_inverted:g.axis_y_inverted,T=f.hasDataLabel()&&g.axis_rotated,w=f.hasDataLabel()&&!g.axis_rotated;return v=P(_)?_:P(y)?v<y?v:y-10:v,m=P(y)?y:P(_)?_<m?m:_+10:m,0===x.length?"y2"===e?f.y2.domain():f.y.domain():(isNaN(v)&&(v=0),isNaN(m)&&(m=v),v===m&&(v<0?m=0:v=0),h=0<=v&&0<=m,d=v<=0&&m<=0,(P(_)&&h||P(y)&&d)&&(b=!1),b&&(h&&(v=0),d&&(m=0)),a=o=.1*(r=Math.abs(m-v)),void 0!==S&&(m=S+(s=Math.max(Math.abs(v),Math.abs(m))),v=S-s),T?(u=f.getDataLabelLength(v,m,"width"),c=O(f.y.range()),a+=r*((l=[u[0]/c,u[1]/c])[1]/(1-l[0]-l[1])),o+=r*(l[0]/(1-l[0]-l[1]))):w&&(u=f.getDataLabelLength(v,m,"height"),a+=f.axis.convertPixelsToAxisPadding(u[1],r),o+=f.axis.convertPixelsToAxisPadding(u[0],r)),"y"===e&&C(g.axis_y_padding)&&(a=f.axis.getPadding(g.axis_y_padding,"top",a,r),o=f.axis.getPadding(g.axis_y_padding,"bottom",o,r)),"y2"===e&&C(g.axis_y2_padding)&&(a=f.axis.getPadding(g.axis_y2_padding,"top",a,r),o=f.axis.getPadding(g.axis_y2_padding,"bottom",o,r)),b&&(h&&(o=v),d&&(a=-m)),i=[v-o,m+a],A?i.reverse():i)},l.getXDomainMin=function(t){var e=this,n=e.config;return I(n.axis_x_min)?e.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:e.d3.min(t,function(t){return e.d3.min(t.values,function(t){return t.x})})},l.getXDomainMax=function(t){var e=this,n=e.config;return I(n.axis_x_max)?e.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:e.d3.max(t,function(t){return e.d3.max(t.values,function(t){return t.x})})},l.getXDomainPadding=function(t){var e,n,i,r,a=this.config,o=t[1]-t[0];return n=this.isCategorized()?0:this.hasType("bar")?1<(e=this.getMaxDataCount())?o/(e-1)/2:.5:.01*o,"object"==typeof a.axis_x_padding&&C(a.axis_x_padding)?(i=P(a.axis_x_padding.left)?a.axis_x_padding.left:n,r=P(a.axis_x_padding.right)?a.axis_x_padding.right:n):i=r="number"==typeof a.axis_x_padding?a.axis_x_padding:n,{left:i,right:r}},l.getXDomain=function(t){var e=[this.getXDomainMin(t),this.getXDomainMax(t)],n=e[0],i=e[1],r=this.getXDomainPadding(e),a=0,o=0;return n-i!=0||this.isCategorized()||(i=this.isTimeSeries()?(n=new Date(.5*n.getTime()),new Date(1.5*i.getTime())):(n=0===n?1:.5*n,0===i?-1:1.5*i)),!n&&0!==n||(a=this.isTimeSeries()?new Date(n.getTime()-r.left):n-r.left),!i&&0!==i||(o=this.isTimeSeries()?new Date(i.getTime()+r.right):i+r.right),[a,o]},l.updateXDomain=function(t,e,n,i,r){var a=this,o=a.config;return n&&(a.x.domain(r||a.d3.extent(a.getXDomain(t))),a.orgXDomain=a.x.domain(),o.zoom_enabled&&a.zoom.scale(a.x).updateScaleExtent(),a.subX.domain(a.x.domain()),a.brush&&a.brush.scale(a.subX)),e&&(a.x.domain(r||(!a.brush||a.brush.empty()?a.orgXDomain:a.brush.extent())),o.zoom_enabled&&a.zoom.scale(a.x).updateScaleExtent()),i&&a.x.domain(a.trimXDomain(a.x.orgDomain())),a.x.domain()},l.trimXDomain=function(t){var e=this.getZoomDomain(),n=e[0],i=e[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),i<=t[1]&&(t[0]=+t[0]-(t[1]-i),t[1]=i),t},l.isX=function(t){var e=this.config;return e.data_x&&t===e.data_x||C(e.data_xs)&&g(e.data_xs,t)},l.isNotX=function(t){return!this.isX(t)},l.getXKey=function(t){var e=this.config;return e.data_x?e.data_x:C(e.data_xs)?e.data_xs[t]:null},l.getXValuesOfXKey=function(e,t){var n,i=this;return(t&&C(t)?i.mapToIds(t):[]).forEach(function(t){i.getXKey(t)===e&&(n=i.data.xs[t])}),n},l.getIndexByX=function(t){var e=this.filterByX(this.data.targets,t);return e.length?e[0].index:null},l.getXValue=function(t,e){return t in this.data.xs&&this.data.xs[t]&&P(this.data.xs[t][e])?this.data.xs[t][e]:e},l.getOtherTargetXs=function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},l.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},l.addXs=function(e){var n=this;Object.keys(e).forEach(function(t){n.config.data_xs[t]=e[t]})},l.hasMultipleX=function(e){return 1<this.d3.set(Object.keys(e).map(function(t){return e[t]})).size()},l.isMultipleX=function(){return C(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},l.addName=function(t){var e;return t&&(e=this.config.data_names[t.id],t.name=void 0!==e?e:t.id),t},l.getValueOnIndex=function(t,e){var n=t.filter(function(t){return t.index===e});return n.length?n[0]:null},l.updateTargetX=function(t,i){var r=this;t.forEach(function(n){n.values.forEach(function(t,e){t.x=r.generateTargetX(i[e],n.id,e)}),r.data.xs[n.id]=i})},l.updateTargetXs=function(t,e){var n=this;t.forEach(function(t){e[t.id]&&n.updateTargetX([t],e[t.id])})},l.generateTargetX=function(t,e,n){return this.isTimeSeries()?t?this.parseDate(t):this.parseDate(this.getXValue(e,n)):this.isCustomX()&&!this.isCategorized()?P(t)?+t:this.getXValue(e,n):n},l.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},l.updateXs=function(){var e=this;e.data.targets.length&&(e.xs=[],e.data.targets[0].values.forEach(function(t){e.xs[t.index]=t.x}))},l.getPrevX=function(t){var e=this.xs[t-1];return void 0!==e?e:null},l.getNextX=function(t){var e=this.xs[t+1];return void 0!==e?e:null},l.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(t){return t.values.length})},l.getMaxDataCountTarget=function(t){var e,n=t.length,i=0;return 1<n?t.forEach(function(t){t.values.length>i&&(i=(e=t).values.length)}):e=n?t[0]:null,e},l.getEdgeX=function(t){return t.length?[this.d3.min(t,function(t){return t.values[0].x}),this.d3.max(t,function(t){return t.values[t.values.length-1].x})]:[0,0]},l.mapToIds=function(t){return t.map(function(t){return t.id})},l.mapToTargetIds=function(t){return t?[].concat(t):this.mapToIds(this.data.targets)},l.hasTarget=function(t,e){var n,i=this.mapToIds(t);for(n=0;n<i.length;n++)if(i[n]===e)return!0;return!1},l.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},l.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},l.filterTargetsToShow=function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},l.mapTargetsToUniqueXs=function(t){var e=this.d3.set(this.d3.merge(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return(e=this.isTimeSeries()?e.map(function(t){return new Date(+t)}):e.map(function(t){return+t})).sort(function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN})},l.addHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.concat(t)},l.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},l.addHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.concat(t)},l.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},l.getValuesAsIdKeyed=function(t){var n={};return t.forEach(function(e){n[e.id]=[],e.values.forEach(function(t){n[e.id].push(t.value)})}),n},l.checkValueInTargets=function(t,e){var n,i,r,a=Object.keys(t);for(n=0;n<a.length;n++)for(r=t[a[n]].values,i=0;i<r.length;i++)if(e(r[i].value))return!0;return!1},l.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t<0})},l.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return 0<t})},l.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},l.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},l.orderTargets=function(t){var e=this.config,a=this.isOrderAsc(),n=this.isOrderDesc();return a||n?t.sort(function(t,e){function n(t,e){return t+Math.abs(e.value)}var i=t.values.reduce(n,0),r=e.values.reduce(n,0);return a?r-i:i-r}):d(e.data_order)&&t.sort(e.data_order),t},l.filterByX=function(t,e){return this.d3.merge(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},l.filterRemoveNull=function(t){return t.filter(function(t){return P(t.value)})},l.filterByXDomain=function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},l.hasDataLabel=function(){var t=this.config;return!("boolean"!=typeof t.data_labels||!t.data_labels)||!("object"!=typeof t.data_labels||!C(t.data_labels))},l.getDataLabelLength=function(t,e,n){var i=this,r=[0,0];return i.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i.dataLabelFormat(t.id)(t)}).each(function(t,e){r[e]=1.3*this.getBoundingClientRect()[n]}).remove(),r},l.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},l.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},l.findSameXOfValues=function(t,e){var n,i=t[e].x,r=[];for(n=e-1;0<=n&&i===t[n].x;n--)r.push(t[n]);for(n=e;n<t.length&&i===t[n].x;n++)r.push(t[n]);return r},l.findClosestFromTargets=function(t,e){var n,i=this;return n=t.map(function(t){return i.findClosest(t.values,e)}),i.findClosest(n,e)},l.findClosest=function(t,n){var i,r=this,a=r.config.point_sensitivity;return t.filter(function(t){return t&&r.isBarType(t.id)}).forEach(function(t){var e=r.main.select("."+X.bars+r.getTargetSelectorSuffix(t.id)+" ."+X.bar+"-"+t.index).node();!i&&r.isWithinBar(e)&&(i=t)}),t.filter(function(t){return t&&!r.isBarType(t.id)}).forEach(function(t){var e=r.dist(t,n);e<a&&(a=e,i=t)}),i},l.dist=function(t,e){var n=this.config,i=n.axis_rotated?1:0,r=n.axis_rotated?0:1,a=this.circleY(t,t.index),o=this.x(t.x);return Math.sqrt(Math.pow(o-e[i],2)+Math.pow(a-e[r],2))},l.convertValuesToStep=function(t){var e,n=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0<e;e--)n[e]=n[e-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[t.length+1]={x:n[t.length].x+1,value:n[t.length].value,id:n[t.length].id},n},l.updateDataAttributes=function(t,e){var n=this.config["data_"+t];return void 0===e||(Object.keys(e).forEach(function(t){n[t]=e[t]}),this.redraw({withLegend:!0})),n},l.convertUrlToData=function(t,e,n,i,r){var a=this,o=e||"csv",s=a.d3.xhr(t);n&&Object.keys(n).forEach(function(t){s.header(t,n[t])}),s.get(function(t,e){var n;if(!e)throw new Error(t.responseURL+" "+t.status+" ("+t.statusText+")");n="json"===o?a.convertJsonToData(JSON.parse(e.response),i):"tsv"===o?a.convertTsvToData(e.response):a.convertCsvToData(e.response),r.call(a,n)})},l.convertXsvToData=function(t,e){var n,i=e.parseRows(t);return 1===i.length?(n=[{}],i[0].forEach(function(t){n[0][t]=null})):n=e.parse(t),n},l.convertCsvToData=function(t){return this.convertXsvToData(t,this.d3.csv)},l.convertTsvToData=function(t){return this.convertXsvToData(t,this.d3.tsv)},l.convertJsonToData=function(e,t){var r,a=this,o=[];return t?(t.x?(r=t.value.concat(t.x),a.config.data_x=t.x):r=t.value,o.push(r),e.forEach(function(n){var i=[];r.forEach(function(t){var e=a.findValueInJson(n,t);b(e)&&(e=null),i.push(e)}),o.push(i)}),a.convertRowsToData(o)):(Object.keys(e).forEach(function(t){o.push([t].concat(e[t]))}),a.convertColumnsToData(o))},l.findValueInJson=function(t,e){for(var n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<n.length;++i){var r=n[i];if(!(r in t))return;t=t[r]}return t},l.convertRowsToData=function(t){var e,n,i=t[0],r={},a=[];for(e=1;e<t.length;e++){for(r={},n=0;n<t[e].length;n++){if(b(t[e][n]))throw new Error("Source data is missing a component at ("+e+","+n+")!");r[i[n]]=t[e][n]}a.push(r)}return a},l.convertColumnsToData=function(t){var e,n,i,r=[];for(e=0;e<t.length;e++)for(i=t[e][0],n=1;n<t[e].length;n++){if(b(r[n-1])&&(r[n-1]={}),b(t[e][n]))throw new Error("Source data is missing a component at ("+e+","+n+")!");r[n-1][i]=t[e][n]}return r},l.convertDataToTargets=function(t,i){var e,u=this,c=u.config,n=u.d3.keys(t[0]).filter(u.isNotX,u),r=u.d3.keys(t[0]).filter(u.isX,u);return n.forEach(function(n){var e=u.getXKey(n);u.isCustomX()||u.isTimeSeries()?0<=r.indexOf(e)?u.data.xs[n]=(i&&u.data.xs[n]?u.data.xs[n]:[]).concat(t.map(function(t){return t[e]}).filter(P).map(function(t,e){return u.generateTargetX(t,n,e)})):c.data_x?u.data.xs[n]=u.getOtherTargetXs():C(c.data_xs)&&(u.data.xs[n]=u.getXValuesOfXKey(e,u.data.targets)):u.data.xs[n]=t.map(function(t,e){return e})}),n.forEach(function(t){if(!u.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}),(e=n.map(function(a,o){var s=c.data_idConverter(a);return{id:s,id_org:a,values:t.map(function(t,e){var n,i=t[u.getXKey(a)],r=null===t[a]||isNaN(t[a])?null:+t[a];return u.isCustomX()&&u.isCategorized()&&0===o&&!b(i)?(0===o&&0===e&&(c.axis_x_categories=[]),-1===(n=c.axis_x_categories.indexOf(i))&&(n=c.axis_x_categories.length,c.axis_x_categories.push(i))):n=u.generateTargetX(i,a,e),(b(t[a])||u.data.xs[a].length<=e)&&(n=void 0),{x:n,value:r,id:s}}).filter(function(t){return I(t.x)})}})).forEach(function(t){var e;c.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),e=0,t.values.forEach(function(t){t.index=e++}),u.data.xs[t.id].sort(function(t,e){return t-e})}),u.hasNegativeValue=u.hasNegativeValueInTargets(e),u.hasPositiveValue=u.hasPositiveValueInTargets(e),c.data_type&&u.setTargetType(u.mapToIds(e).filter(function(t){return!(t in c.data_types)}),c.data_type),e.forEach(function(t){u.addCache(t.id_org,t)}),e},l.load=function(n,i){var r=this;n&&(i.filter&&(n=n.filter(i.filter)),(i.type||i.types)&&n.forEach(function(t){var e=i.types&&i.types[t.id]?i.types[t.id]:i.type;r.setTargetType(t.id,e)}),r.data.targets.forEach(function(t){for(var e=0;e<n.length;e++)if(t.id===n[e].id){t.values=n[e].values,n.splice(e,1);break}}),r.data.targets=r.data.targets.concat(n)),r.updateTargets(r.data.targets),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.done&&i.done()},l.loadFromArgs=function(e){var n=this;e.data?n.load(n.convertDataToTargets(e.data),e):e.url?n.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(t){n.load(n.convertDataToTargets(t),e)}):e.json?n.load(n.convertDataToTargets(n.convertJsonToData(e.json,e.keys)),e):e.rows?n.load(n.convertDataToTargets(n.convertRowsToData(e.rows)),e):e.columns?n.load(n.convertDataToTargets(n.convertColumnsToData(e.columns)),e):n.load(null,e)},l.unload=function(t,e){var n=this;return e=e||function(){},(t=t.filter(function(t){return n.hasTarget(n.data.targets,t)}))&&0!==t.length?(n.svg.selectAll(t.map(function(t){return n.selectorTarget(t)})).transition().style("opacity",0).remove().call(n.endall,e),void t.forEach(function(e){n.withoutFadeIn[e]=!1,n.legend&&n.legend.selectAll("."+X.legendItem+n.getTargetSelectorSuffix(e)).remove(),n.data.targets=n.data.targets.filter(function(t){return t.id!==e})})):void e()},l.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},l.initEventRect=function(){this.main.select("."+X.chart).append("g").attr("class",X.eventRects).style("fill-opacity",0)},l.redrawEventRect=function(){var t,e,n=this,i=n.config,r=n.isMultipleX(),a=n.main.select("."+X.eventRects).style("cursor",i.zoom_enabled?i.axis_rotated?"ns-resize":"ew-resize":null).classed(X.eventRectsMultiple,r).classed(X.eventRectsSingle,!r);a.selectAll("."+X.eventRect).remove(),n.eventRect=a.selectAll("."+X.eventRect),r?(t=n.eventRect.data([0]),n.generateEventRectsForMultipleXs(t.enter()),n.updateEventRect(t)):(e=n.getMaxDataCountTarget(n.data.targets),a.datum(e?e.values:[]),n.eventRect=a.selectAll("."+X.eventRect),t=n.eventRect.data(function(t){return t}),n.generateEventRectsForSingleX(t.enter()),n.updateEventRect(t),t.exit().remove())},l.updateEventRect=function(t){var e,n,i,r,a,o,s=this,u=s.config;t=t||s.eventRect.data(function(t){return t}),r=s.isMultipleX()?(n=e=0,i=s.width,s.height):(o=!s.isCustomX()&&!s.isTimeSeries()||s.isCategorized()?(a=s.getEventRectWidth(),function(t){return s.x(t.x)-a/2}):(s.updateXs(),a=function(t){var e=s.getPrevX(t.index),n=s.getNextX(t.index);return null===e&&null===n?u.axis_rotated?s.height:s.width:(null===e&&(e=s.x.domain()[0]),null===n&&(n=s.x.domain()[1]),Math.max(0,(s.x(n)-s.x(e))/2))},function(t){var e=s.getPrevX(t.index),n=s.getNextX(t.index),i=s.data.xs[t.id][t.index];return null===e&&null===n?0:(null===e&&(e=s.x.domain()[0]),(s.x(i)+s.x(e))/2)}),e=u.axis_rotated?0:o,n=u.axis_rotated?o:0,i=u.axis_rotated?s.width:a,u.axis_rotated?a:s.height),t.attr("class",s.classEvent.bind(s)).attr("x",e).attr("y",n).attr("width",i).attr("height",r)},l.generateEventRectsForSingleX=function(t){var r=this,a=r.d3,o=r.config;t.append("rect").attr("class",r.classEvent.bind(r)).style("cursor",o.data_selection_enabled&&o.data_selection_grouped?"pointer":null).on("mouseover",function(t){var e=t.index;r.dragging||r.flowing||r.hasArcType()||(o.point_focus_expand_enabled&&r.expandCircles(e,null,!0),r.expandBars(e,null,!0),r.main.selectAll("."+X.shape+"-"+e).each(function(t){o.data_onmouseover.call(r.api,t)}))}).on("mouseout",function(t){var e=t.index;r.config&&(r.hasArcType()||(r.hideXGridFocus(),r.hideTooltip(),r.unexpandCircles(),r.unexpandBars(),r.main.selectAll("."+X.shape+"-"+e).each(function(t){o.data_onmouseout.call(r.api,t)})))}).on("mousemove",function(t){var e,n=t.index,i=r.svg.select("."+X.eventRect+"-"+n);r.dragging||r.flowing||r.hasArcType()||(r.isStepType(t)&&"step-after"===r.config.line_step_type&&a.mouse(this)[0]<r.x(r.getXValue(t.id,n))&&(n-=1),e=r.filterTargetsToShow(r.data.targets).map(function(t){return r.addName(r.getValueOnIndex(t.values,n))}),o.tooltip_grouped&&(r.showTooltip(e,this),r.showXGridFocus(e)),o.tooltip_grouped&&(!o.data_selection_enabled||o.data_selection_grouped)||r.main.selectAll("."+X.shape+"-"+n).each(function(){a.select(this).classed(X.EXPANDED,!0),o.data_selection_enabled&&i.style("cursor",o.data_selection_grouped?"pointer":null),o.tooltip_grouped||(r.hideXGridFocus(),r.hideTooltip(),o.data_selection_grouped||(r.unexpandCircles(n),r.unexpandBars(n)))}).filter(function(t){return r.isWithinShape(this,t)}).each(function(t){o.data_selection_enabled&&(o.data_selection_grouped||o.data_selection_isselectable(t))&&i.style("cursor","pointer"),o.tooltip_grouped||(r.showTooltip([t],this),r.showXGridFocus([t]),o.point_focus_expand_enabled&&r.expandCircles(n,t.id,!0),r.expandBars(n,t.id,!0))}))}).on("click",function(t){var e=t.index;if(!r.hasArcType()&&r.toggleShape){if(r.cancelClick)return void(r.cancelClick=!1);r.isStepType(t)&&"step-after"===o.line_step_type&&a.mouse(this)[0]<r.x(r.getXValue(t.id,e))&&(e-=1),r.main.selectAll("."+X.shape+"-"+e).each(function(t){(o.data_selection_grouped||r.isWithinShape(this,t))&&(r.toggleShape(this,t,e),r.config.data_onclick.call(r.api,t,this))})}}).call(o.data_selection_draggable&&r.drag?a.behavior.drag().origin(Object).on("drag",function(){r.drag(a.mouse(this))}).on("dragstart",function(){r.dragstart(a.mouse(this))}).on("dragend",function(){r.dragend()}):function(){})},l.generateEventRectsForMultipleXs=function(t){function r(){a.svg.select("."+X.eventRect).style("cursor",null),a.hideXGridFocus(),a.hideTooltip(),a.unexpandCircles(),a.unexpandBars()}var a=this,o=a.d3,s=a.config;t.append("rect").attr("x",0).attr("y",0).attr("width",a.width).attr("height",a.height).attr("class",X.eventRect).on("mouseout",function(){a.config&&(a.hasArcType()||r())}).on("mousemove",function(){var t,e,n,i=a.filterTargetsToShow(a.data.targets);if(!a.dragging&&!a.hasArcType(i)){if(t=o.mouse(this),e=a.findClosestFromTargets(i,t),!a.mouseover||e&&e.id===a.mouseover.id||(s.data_onmouseout.call(a.api,a.mouseover),a.mouseover=void 0),!e)return void r();n=(a.isScatterType(e)||!s.tooltip_grouped?[e]:a.filterByX(i,e.x)).map(function(t){return a.addName(t)}),a.showTooltip(n,this),s.point_focus_expand_enabled&&a.expandCircles(e.index,e.id,!0),a.expandBars(e.index,e.id,!0),a.showXGridFocus(n),(a.isBarType(e.id)||a.dist(e,t)<s.point_sensitivity)&&(a.svg.select("."+X.eventRect).style("cursor","pointer"),a.mouseover||(s.data_onmouseover.call(a.api,e),a.mouseover=e))}}).on("click",function(){var t,e,n=a.filterTargetsToShow(a.data.targets);a.hasArcType(n)||(t=o.mouse(this),(e=a.findClosestFromTargets(n,t))&&(a.isBarType(e.id)||a.dist(e,t)<s.point_sensitivity)&&a.main.selectAll("."+X.shapes+a.getTargetSelectorSuffix(e.id)).selectAll("."+X.shape+"-"+e.index).each(function(){(s.data_selection_grouped||a.isWithinShape(this,e))&&(a.toggleShape(this,e,e.index),a.config.data_onclick.call(a.api,e,this))}))}).call(s.data_selection_draggable&&a.drag?o.behavior.drag().origin(Object).on("drag",function(){a.drag(o.mouse(this))}).on("dragstart",function(){a.dragstart(o.mouse(this))}).on("dragend",function(){a.dragend()}):function(){})},l.dispatchEvent=function(t,e,n){var i="."+X.eventRect+(this.isMultipleX()?"":"-"+e),r=this.main.select(i).node(),a=r.getBoundingClientRect(),o=a.left+(n?n[0]:0),s=a.top+(n?n[1]:0),u=document.createEvent("MouseEvents");u.initMouseEvent(t,!0,!0,c,0,o,s,o,s,!1,!1,!1,!1,0,null),r.dispatchEvent(u)},l.getCurrentWidth=function(){var t=this.config;return t.size_width?t.size_width:this.getParentWidth()},l.getCurrentHeight=function(){var t=this.config,e=t.size_height?t.size_height:this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},l.getCurrentPaddingTop=function(){var t=this.config,e=P(t.padding_top)?t.padding_top:0;return this.title&&this.title.node()&&(e+=this.getTitlePadding()),e},l.getCurrentPaddingBottom=function(){var t=this.config;return P(t.padding_bottom)?t.padding_bottom:0},l.getCurrentPaddingLeft=function(t){var e=this.config;return P(e.padding_left)?e.padding_left:e.axis_rotated?e.axis_x_show?Math.max(o(this.getAxisWidthByAxisId("x",t)),40):1:!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:o(this.getAxisWidthByAxisId("y",t))},l.getCurrentPaddingRight=function(){var t=this.config,e=this.isLegendRight?this.getLegendWidth()+20:0;return P(t.padding_right)?t.padding_right+1:t.axis_rotated?10+e:!t.axis_y2_show||t.axis_y2_inner?2+e+(this.axis.getY2AxisLabelPosition().isOuter?20:0):o(this.getAxisWidthByAxisId("y2"))+e},l.getParentRectValue=function(e){for(var n,i=this.selectChart.node();i&&"BODY"!==i.tagName;){try{n=i.getBoundingClientRect()[e]}catch(t){"width"===e&&(n=i.offsetWidth)}if(n)break;i=i.parentNode}return n},l.getParentWidth=function(){return this.getParentRectValue("width")},l.getParentHeight=function(){var t=this.selectChart.style("height");return 0<t.indexOf("px")?+t.replace("px",""):0},l.getSvgLeft=function(t){var e=this.config,n=e.axis_rotated||!e.axis_rotated&&!e.axis_y_inner,i=e.axis_rotated?X.axisX:X.axisY,r=this.main.select("."+i).node(),a=r&&n?r.getBoundingClientRect():{right:0},o=this.selectChart.node().getBoundingClientRect(),s=this.hasArcType(),u=a.right-o.left-(s?0:this.getCurrentPaddingLeft(t));return 0<u?u:0},l.getAxisWidthByAxisId=function(t,e){var n=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)},l.getHorizontalAxisHeight=function(t){var e=this.config,n=30;return"x"!==t||e.axis_x_show?"x"===t&&e.axis_x_height?e.axis_x_height:"y"!==t||e.axis_y_show?"y2"!==t||e.axis_y2_show?("x"===t&&!e.axis_rotated&&e.axis_x_tick_rotate&&(n=30+this.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-e.axis_x_tick_rotate)/180)),"y"===t&&e.axis_rotated&&e.axis_y_tick_rotate&&(n=30+this.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-e.axis_y_tick_rotate)/180)),n+(this.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):this.rotated_padding_top:!e.legend_show||this.isLegendRight||this.isLegendInset?1:10:8},l.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},l.getShapeIndices=function(t){var e,n,i=this.config,r={},a=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(e=0;e<i.data_groups.length;e++)if(!(i.data_groups[e].indexOf(t.id)<0))for(n=0;n<i.data_groups[e].length;n++)if(i.data_groups[e][n]in r){r[t.id]=r[i.data_groups[e][n]];break}b(r[t.id])&&(r[t.id]=a++)}),r.__max__=a-1,r},l.getShapeX=function(n,i,r,t){var a=t?this.subX:this.x;return function(t){var e=t.id in r?r[t.id]:0;return t.x||0===t.x?a(t.x)-n*(i/2-e):0}},l.getShapeY=function(e){var n=this;return function(t){return(e?n.getSubYScale(t.id):n.getYScale(t.id))(t.value)}},l.getShapeOffset=function(t,s,e){var u=this,c=u.orderTargets(u.filterTargetsToShow(u.data.targets.filter(t,u))),l=c.map(function(t){return t.id});return function(n,i){var r=e?u.getSubYScale(n.id):u.getYScale(n.id),a=r(0),o=a;return c.forEach(function(t){var e=u.isStepType(n)?u.convertValuesToStep(t.values):t.values;t.id!==n.id&&s[t.id]===s[n.id]&&l.indexOf(t.id)<l.indexOf(n.id)&&(void 0!==e[i]&&+e[i].x==+n.x||(i=-1,e.forEach(function(t,e){t.x===n.x&&(i=e)})),i in e&&0<=e[i].value*n.value&&(o+=r(e[i].value)-a))}),o}},l.isWithinShape=function(t,e){var n,i=this.d3.select(t);return this.isTargetToShow(e.id)?"circle"===t.nodeName?n=this.isStepType(e)?this.isWithinStep(t,this.getYScale(e.id)(e.value)):this.isWithinCircle(t,1.5*this.pointSelectR(e)):"path"===t.nodeName&&(n=!i.classed(X.bar)||this.isWithinBar(t)):n=!1,n},l.getInterpolate=function(t){var e=this.isInterpolationType(this.config.spline_interpolation_type)?this.config.spline_interpolation_type:"cardinal";return this.isSplineType(t)?e:this.isStepType(t)?this.config.line_step_type:"linear"},l.initLine=function(){this.main.select("."+X.chart).append("g").attr("class",X.chartLines)},l.updateTargetsForLine=function(t){var e,n=this,i=n.config,r=n.classChartLine.bind(n),a=n.classLines.bind(n),o=n.classAreas.bind(n),s=n.classCircles.bind(n),u=n.classFocus.bind(n);(e=n.main.select("."+X.chartLines).selectAll("."+X.chartLine).data(t).attr("class",function(t){return r(t)+u(t)}).enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none")).append("g").attr("class",a),e.append("g").attr("class",o),e.append("g").attr("class",function(t){return n.generateClass(X.selectedCircles,t.id)}),e.append("g").attr("class",s).style("cursor",function(t){return i.data_selection_isselectable(t)?"pointer":null}),t.forEach(function(e){n.main.selectAll("."+X.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+X.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},l.updateLine=function(t){var e=this;e.mainLine=e.main.selectAll("."+X.lines).selectAll("."+X.line).data(e.lineData.bind(e)),e.mainLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.mainLine.style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null),e.mainLine.exit().transition().duration(t).style("opacity",0).remove()},l.redrawLine=function(t,e){return[(e?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},l.generateDrawLine=function(t,o){function e(t){return(o?s.subxx:s.xx).call(s,t)}function n(t,e){return 0<u.data_groups.length?i(t,e)[0][1]:l.call(s,t.id)(t.value)}var s=this,u=s.config,c=s.d3.svg.line(),i=s.generateGetLinePoints(t,o),l=o?s.getSubYScale:s.getYScale;return c=u.axis_rotated?c.x(n).y(e):c.x(e).y(n),u.line_connectNull||(c=c.defined(function(t){return null!=t.value})),function(t){var e=u.line_connectNull?s.filterRemoveNull(t.values):t.values,n=o?s.x:s.subX,i=l.call(s,t.id),r=0,a=0;return(s.isLineType(t)?u.data_regions[t.id]?s.lineWithRegions(e,n,i,u.data_regions[t.id]):(s.isStepType(t)&&(e=s.convertValuesToStep(e)),c.interpolate(s.getInterpolate(t))(e)):(e[0]&&(r=n(e[0].x),a=i(e[0].value)),u.axis_rotated?"M "+a+" "+r:"M "+r+" "+a))||"M 0 0"}},l.generateGetLinePoints=function(t,e){var o=this,s=o.config,n=t.__max__+1,u=o.getShapeX(0,n,t,!!e),c=o.getShapeY(!!e),l=o.getShapeOffset(o.isLineType,t,!!e),h=e?o.getSubYScale:o.getYScale;return function(t,e){var n=h.call(o,t.id)(0),i=l(t,e)||n,r=u(t),a=c(t);return s.axis_rotated&&(0<t.value&&a<n||t.value<0&&n<a)&&(a=n),[[r,a-(n-i)],[r,a-(n-i)],[r,a-(n-i)],[r,a-(n-i)]]}},l.lineWithRegions=function(t,u,c,e){function n(t,e){var n;for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return!0;return!1}function l(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}var i,r,a,o,h,s,d,f,g,p,x,_=this,y=_.config,v="M",m=_.isCategorized()?.5:0,S=[];if(I(e))for(i=0;i<e.length;i++)S[i]={},b(e[i].start)?S[i].start=t[0].x:S[i].start=_.isTimeSeries()?_.parseDate(e[i].start):e[i].start,b(e[i].end)?S[i].end=t[t.length-1].x:S[i].end=_.isTimeSeries()?_.parseDate(e[i].end):e[i].end;for(p=y.axis_rotated?function(t){return c(t.value)}:function(t){return u(t.x)},x=y.axis_rotated?function(t){return u(t.x)}:function(t){return c(t.value)},a=_.isTimeSeries()?function(t,e,n,i){var r=t.x.getTime(),a=e.x-t.x,o=new Date(r+a*n),s=new Date(r+a*(n+i));return l(y.axis_rotated?[[c(h(n)),u(o)],[c(h(n+i)),u(s)]]:[[u(o),c(h(n))],[u(s),c(h(n+i))]])}:function(t,e,n,i){return l(y.axis_rotated?[[c(h(n),!0),u(o(n))],[c(h(n+i),!0),u(o(n+i))]]:[[u(o(n),!0),c(h(n))],[u(o(n+i),!0),c(h(n+i))]])},i=0;i<t.length;i++){if(b(S)||!n(t[i].x,S))v+=" "+p(t[i])+" "+x(t[i]);else for(o=_.getScale(t[i-1].x+m,t[i].x+m,_.isTimeSeries()),h=_.getScale(t[i-1].value,t[i].value),s=u(t[i].x)-u(t[i-1].x),d=c(t[i].value)-c(t[i-1].value),g=2*(f=2/Math.sqrt(Math.pow(s,2)+Math.pow(d,2))),r=f;r<=1;r+=g)v+=a(t[i-1],t[i],r,f);t[i].x}return v},l.updateArea=function(t){var e=this,n=e.d3;e.mainArea=e.main.selectAll("."+X.areas).selectAll("."+X.area).data(e.lineData.bind(e)),e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.mainArea.style("opacity",e.orgAreaOpacity),e.mainArea.exit().transition().duration(t).style("opacity",0).remove()},l.redrawArea=function(t,e){return[(e?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},l.generateDrawArea=function(t,e){function n(t){return(e?a.subxx:a.xx).call(a,t)}function i(t,e){return 0<o.data_groups.length?u(t,e)[0][1]:c.call(a,t.id)(a.getAreaBaseValue(t.id))}function r(t,e){return 0<o.data_groups.length?u(t,e)[1][1]:c.call(a,t.id)(t.value)}var a=this,o=a.config,s=a.d3.svg.area(),u=a.generateGetAreaPoints(t,e),c=e?a.getSubYScale:a.getYScale;return s=o.axis_rotated?s.x0(i).x1(r).y(n):s.x(n).y0(o.area_above?0:i).y1(r),o.line_connectNull||(s=s.defined(function(t){return null!==t.value})),function(t){var e=o.line_connectNull?a.filterRemoveNull(t.values):t.values,n=0,i=0;return(a.isAreaType(t)?(a.isStepType(t)&&(e=a.convertValuesToStep(e)),s.interpolate(a.getInterpolate(t))(e)):(e[0]&&(n=a.x(e[0].x),i=a.getYScale(t.id)(e[0].value)),o.axis_rotated?"M "+i+" "+n:"M "+n+" "+i))||"M 0 0"}},l.getAreaBaseValue=function(){return 0},l.generateGetAreaPoints=function(t,e){var o=this,s=o.config,n=t.__max__+1,u=o.getShapeX(0,n,t,!!e),c=o.getShapeY(!!e),l=o.getShapeOffset(o.isAreaType,t,!!e),h=e?o.getSubYScale:o.getYScale;return function(t,e){var n=h.call(o,t.id)(0),i=l(t,e)||n,r=u(t),a=c(t);return s.axis_rotated&&(0<t.value&&a<n||t.value<0&&n<a)&&(a=n),[[r,i],[r,a-(n-i)],[r,a-(n-i)],[r,i]]}},l.updateCircle=function(){var t=this;t.mainCircle=t.main.selectAll("."+X.circles).selectAll("."+X.circle).data(t.lineOrScatterData.bind(t)),t.mainCircle.enter().append("circle").attr("class",t.classCircle.bind(t)).attr("r",t.pointR.bind(t)).style("fill",t.color),t.mainCircle.style("opacity",t.initialOpacityForCircle.bind(t)),t.mainCircle.exit().remove()},l.redrawCircle=function(t,e,n){var i=this.main.selectAll("."+X.selectedCircle);return[(n?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",t).attr("cy",e),(n?i.transition(Math.random().toString()):i).attr("cx",t).attr("cy",e)]},l.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},l.updateCircleY=function(){var t,n,e=this;0<e.config.data_groups.length?(t=e.getShapeIndices(e.isLineType),n=e.generateGetLinePoints(t),e.circleY=function(t,e){return n(t,e)[0][1]}):e.circleY=function(t){return e.getYScale(t.id)(t.value)}},l.getCircles=function(t,e){return(e?this.main.selectAll("."+X.circles+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+X.circle+(P(t)?"-"+t:""))},l.expandCircles=function(t,e,n){var i=this.pointExpandedR.bind(this);n&&this.unexpandCircles(),this.getCircles(t,e).classed(X.EXPANDED,!0).attr("r",i)},l.unexpandCircles=function(t){var e=this,n=e.pointR.bind(e);e.getCircles(t).filter(function(){return e.d3.select(this).classed(X.EXPANDED)}).classed(X.EXPANDED,!1).attr("r",n)},l.pointR=function(t){var e=this.config;return this.isStepType(t)?0:d(e.point_r)?e.point_r(t):e.point_r},l.pointExpandedR=function(t){var e=this.config;return e.point_focus_expand_enabled?e.point_focus_expand_r?e.point_focus_expand_r:1.75*this.pointR(t):this.pointR(t)},l.pointSelectR=function(t){var e=this.config;return d(e.point_select_r)?e.point_select_r(t):e.point_select_r?e.point_select_r:4*this.pointR(t)},l.isWithinCircle=function(t,e){var n=this.d3,i=n.mouse(t),r=n.select(t),a=+r.attr("cx"),o=+r.attr("cy");return Math.sqrt(Math.pow(a-i[0],2)+Math.pow(o-i[1],2))<e},l.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},l.initBar=function(){this.main.select("."+X.chart).append("g").attr("class",X.chartBars)},l.updateTargetsForBar=function(t){var e=this.config,n=this.classChartBar.bind(this),i=this.classBars.bind(this),r=this.classFocus.bind(this);this.main.select("."+X.chartBars).selectAll("."+X.chartBar).data(t).attr("class",function(t){return n(t)+r(t)}).enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none").append("g").attr("class",i).style("cursor",function(t){return e.data_selection_isselectable(t)?"pointer":null})},l.updateBar=function(t){function e(t){return n.color(t.id)}var n=this,i=n.barData.bind(n),r=n.classBar.bind(n),a=n.initialOpacity.bind(n);n.mainBar=n.main.selectAll("."+X.bars).selectAll("."+X.bar).data(i),n.mainBar.enter().append("path").attr("class",r).style("stroke",e).style("fill",e),n.mainBar.style("opacity",a),n.mainBar.exit().transition().duration(t).style("opacity",0).remove()},l.redrawBar=function(t,e){return[(e?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",t).style("fill",this.color).style("opacity",1)]},l.getBarW=function(t,e){var n=this.config,i="number"==typeof n.bar_width?n.bar_width:e?t.tickInterval()*n.bar_width_ratio/e:0;return n.bar_width_max&&i>n.bar_width_max?n.bar_width_max:i},l.getBars=function(t,e){return(e?this.main.selectAll("."+X.bars+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+X.bar+(P(t)?"-"+t:""))},l.expandBars=function(t,e,n){n&&this.unexpandBars(),this.getBars(t,e).classed(X.EXPANDED,!0)},l.unexpandBars=function(t){this.getBars(t).classed(X.EXPANDED,!1)},l.generateDrawBar=function(t,e){var a=this.config,o=this.generateGetBarPoints(t,e);return function(t,e){var n=o(t,e),i=a.axis_rotated?1:0,r=a.axis_rotated?0:1;return"M "+n[0][i]+","+n[0][r]+" L"+n[1][i]+","+n[1][r]+" L"+n[2][i]+","+n[2][r]+" L"+n[3][i]+","+n[3][r]+" z"}},l.generateGetBarPoints=function(t,e){var o=this,n=e?o.subXAxis:o.xAxis,i=t.__max__+1,s=o.getBarW(n,i),u=o.getShapeX(s,i,t,!!e),c=o.getShapeY(!!e),l=o.getShapeOffset(o.isBarType,t,!!e),h=e?o.getSubYScale:o.getYScale;return function(t,e){var n=h.call(o,t.id)(0),i=l(t,e)||n,r=u(t),a=c(t);return o.config.axis_rotated&&(0<t.value&&a<n||t.value<0&&n<a)&&(a=n),[[r,i],[r,a-(n-i)],[r+s,a-(n-i)],[r+s,i]]}},l.isWithinBar=function(t){var e=this.d3.mouse(t),n=t.getBoundingClientRect(),i=t.pathSegList.getItem(0),r=t.pathSegList.getItem(1),a=Math.min(i.x,r.x),o=Math.min(i.y,r.y),s=a+n.width+2,u=o+n.height+2,c=o-2;return a-2<e[0]&&e[0]<s&&c<e[1]&&e[1]<u},l.initText=function(){this.main.select("."+X.chart).append("g").attr("class",X.chartTexts),this.mainText=this.d3.selectAll([])},l.updateTargetsForText=function(t){var e=this.classChartText.bind(this),n=this.classTexts.bind(this),i=this.classFocus.bind(this);this.main.select("."+X.chartTexts).selectAll("."+X.chartText).data(t).attr("class",function(t){return e(t)+i(t)}).enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none").append("g").attr("class",n)},l.updateText=function(t){var i=this,e=i.config,n=i.barOrLineData.bind(i),r=i.classText.bind(i);i.mainText=i.main.selectAll("."+X.texts).selectAll("."+X.text).data(n),i.mainText.enter().append("text").attr("class",r).attr("text-anchor",function(t){return e.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(t){return i.color(t)}).style("fill-opacity",0),i.mainText.text(function(t,e,n){return i.dataLabelFormat(t.id)(t.value,t.id,e,n)}),i.mainText.exit().transition().duration(t).style("fill-opacity",0).remove()},l.redrawText=function(t,e,n,i){return[(i?this.mainText.transition():this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},l.getTextRect=function(t,e,n){var i,r=this.d3.select("body").append("div").classed("c3",!0),a=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),o=this.d3.select(n).style("font");return a.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",o).text(t).each(function(){i=this.getBoundingClientRect()}),r.remove(),i},l.generateXYForText=function(t,e,n,i){var r=this,a=r.generateGetAreaPoints(t,!1),o=r.generateGetBarPoints(e,!1),s=r.generateGetLinePoints(n,!1),u=i?r.getXForText:r.getYForText;return function(t,e){var n=r.isAreaType(t)?a:r.isBarType(t)?o:s;return u.call(r,n(t,e),t,this)}},l.getXForText=function(t,e,n){var i,r,a=n.getBoundingClientRect();return i=this.config.axis_rotated?(r=this.isBarType(e)?4:6,t[2][1]+r*(e.value<0?-1:1)):this.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(i>this.width?i=this.width-a.width:i<0&&(i=4)),i},l.getYForText=function(t,e,n){var i,r=n.getBoundingClientRect();return this.config.axis_rotated?i=(t[0][0]+t[2][0]+.6*r.height)/2:(i=t[2][1],e.value<0||0===e.value&&!this.hasPositiveValue?(i+=r.height,this.isBarType(e)&&this.isSafari()?i-=3:!this.isBarType(e)&&this.isChrome()&&(i+=3)):i+=this.isBarType(e)?-3:-6),null!==e.value||this.config.axis_rotated||(i<r.height?i=r.height:i>this.height&&(i=this.height-4)),i},l.setTargetType=function(t,e){var n=this,i=n.config;n.mapToTargetIds(t).forEach(function(t){n.withoutFadeIn[t]=e===i.data_types[t],i.data_types[t]=e}),t||(i.data_type=e)},l.hasType=function(n,t){var i=this.config.data_types,r=!1;return(t=t||this.data.targets)&&t.length?t.forEach(function(t){var e=i[t.id];(e&&0<=e.indexOf(n)||!e&&"line"===n)&&(r=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===n&&(r=!0)}):r=this.config.data_type===n,r},l.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},l.isLineType=function(t){var e=this.config,n=a(t)?t:t.id;return!e.data_types[n]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[n])},l.isStepType=function(t){var e=a(t)?t:t.id;return 0<=["step","area-step"].indexOf(this.config.data_types[e])},l.isSplineType=function(t){var e=a(t)?t:t.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[e])},l.isAreaType=function(t){var e=a(t)?t:t.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[e])},l.isBarType=function(t){var e=a(t)?t:t.id;return"bar"===this.config.data_types[e]},l.isScatterType=function(t){var e=a(t)?t:t.id;return"scatter"===this.config.data_types[e]},l.isPieType=function(t){var e=a(t)?t:t.id;return"pie"===this.config.data_types[e]},l.isGaugeType=function(t){var e=a(t)?t:t.id;return"gauge"===this.config.data_types[e]},l.isDonutType=function(t){var e=a(t)?t:t.id;return"donut"===this.config.data_types[e]},l.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},l.lineData=function(t){return this.isLineType(t)?[t]:[]},l.arcData=function(t){return this.isArcType(t.data)?[t]:[]},l.barData=function(t){return this.isBarType(t)?t.values:[]},l.lineOrScatterData=function(t){return this.isLineType(t)||this.isScatterType(t)?t.values:[]},l.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},l.isInterpolationType=function(t){return 0<=["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(t)},l.initGrid=function(){var t=this,e=t.config,n=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",X.grid),e.grid_x_show&&t.grid.append("g").attr("class",X.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",X.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",X.xgridFocus).append("line").attr("class",X.xgridFocus),t.xgrid=n.selectAll([]),e.grid_lines_front||t.initGridLines()},l.initGridLines=function(){var t=this.d3;this.gridLines=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",X.grid+" "+X.gridLines),this.gridLines.append("g").attr("class",X.xgridLines),this.gridLines.append("g").attr("class",X.ygridLines),this.xgridLines=t.selectAll([])},l.updateXGrid=function(t){var e=this,n=e.config,i=e.d3,r=e.generateGridData(n.grid_x_type,e.x),a=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=n.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-a},y2:function(t){return e.x(t)-a}}:{x1:function(t){return e.x(t)+a},x2:function(t){return e.x(t)+a},y1:0,y2:e.height},e.xgrid=e.main.select("."+X.xgrids).selectAll("."+X.xgrid).data(r),e.xgrid.enter().append("line").attr("class",X.xgrid),t||e.xgrid.attr(e.xgridAttr).style("opacity",function(){return+i.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?e.height:0)?0:1}),e.xgrid.exit().remove()},l.updateYGrid=function(){var t=this,e=t.config,n=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks);t.ygrid=t.main.select("."+X.ygrids).selectAll("."+X.ygrid).data(n),t.ygrid.enter().append("line").attr("class",X.ygrid),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),t.ygrid.exit().remove(),t.smoothLines(t.ygrid,"grid")},l.gridTextAnchor=function(t){return t.position?t.position:"end"},l.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},l.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},l.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},l.updateGrid=function(t){var e,n,i,r=this,a=r.main,o=r.config;r.grid.style("visibility",r.hasArcType()?"hidden":"visible"),a.select("line."+X.xgridFocus).style("visibility","hidden"),o.grid_x_show&&r.updateXGrid(),r.xgridLines=a.select("."+X.xgridLines).selectAll("."+X.xgridLine).data(o.grid_x_lines),(e=r.xgridLines.enter().append("g").attr("class",function(t){return X.xgridLine+(t.class?" "+t.class:"")})).append("line").style("opacity",0),e.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",o.axis_rotated?"":"rotate(-90)").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),r.xgridLines.exit().transition().duration(t).style("opacity",0).remove(),o.grid_y_show&&r.updateYGrid(),r.ygridLines=a.select("."+X.ygridLines).selectAll("."+X.ygridLine).data(o.grid_y_lines),(n=r.ygridLines.enter().append("g").attr("class",function(t){return X.ygridLine+(t.class?" "+t.class:"")})).append("line").style("opacity",0),n.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",o.axis_rotated?"rotate(-90)":"").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),i=r.yv.bind(r),r.ygridLines.select("line").transition().duration(t).attr("x1",o.axis_rotated?i:0).attr("x2",o.axis_rotated?i:r.width).attr("y1",o.axis_rotated?0:i).attr("y2",o.axis_rotated?r.height:i).style("opacity",1),r.ygridLines.select("text").transition().duration(t).attr("x",o.axis_rotated?r.xGridTextX.bind(r):r.yGridTextX.bind(r)).attr("y",i).text(function(t){return t.text}).style("opacity",1),r.ygridLines.exit().transition().duration(t).style("opacity",0).remove()},l.redrawGrid=function(t){var e=this,n=e.config,i=e.xv.bind(e),r=e.xgridLines.select("line"),a=e.xgridLines.select("text");return[(t?r.transition():r).attr("x1",n.axis_rotated?0:i).attr("x2",n.axis_rotated?e.width:i).attr("y1",n.axis_rotated?i:0).attr("y2",n.axis_rotated?i:e.height).style("opacity",1),(t?a.transition():a).attr("x",n.axis_rotated?e.yGridTextX.bind(e):e.xGridTextX.bind(e)).attr("y",i).text(function(t){return t.text}).style("opacity",1)]},l.showXGridFocus=function(t){var e=this.config,n=t.filter(function(t){return t&&P(t.value)}),i=this.main.selectAll("line."+X.xgridFocus),r=this.xx.bind(this);e.tooltip_show&&(this.hasType("scatter")||this.hasArcType()||(i.style("visibility","visible").data([n[0]]).attr(e.axis_rotated?"y1":"x1",r).attr(e.axis_rotated?"y2":"x2",r),this.smoothLines(i,"grid")))},l.hideXGridFocus=function(){this.main.select("line."+X.xgridFocus).style("visibility","hidden")},l.updateXgridFocus=function(){var t=this.config;this.main.select("line."+X.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?this.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:this.height)},l.generateGridData=function(t,e){var n,i,r,a,o=[],s=this.main.select("."+X.axisX).selectAll(".tick").size();if("year"===t)for(i=(n=this.getXDomain())[0].getFullYear(),r=n[1].getFullYear(),a=i;a<=r;a++)o.push(new Date(a+"-01-01 00:00:00"));else(o=e.ticks(10)).length>s&&(o=o.filter(function(t){return(""+t).indexOf(".")<0}));return o},l.getGridFilterToRemove=function(t){return t?function(e){var n=!1;return[].concat(t).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)}),n}:function(){return!0}},l.removeGridLines=function(t,e){function n(t){return!r(t)}var i=this.config,r=this.getGridFilterToRemove(t),a=e?X.xgridLines:X.ygridLines,o=e?X.xgridLine:X.ygridLine;this.main.select("."+a).selectAll("."+o).filter(r).transition().duration(i.transition_duration).style("opacity",0).remove(),e?i.grid_x_lines=i.grid_x_lines.filter(n):i.grid_y_lines=i.grid_y_lines.filter(n)},l.initTooltip=function(){var t,e=this,n=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",X.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(e.isTimeSeries()&&a(n.tooltip_init_x)){for(n.tooltip_init_x=e.parseDate(n.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-n.tooltip_init_x!=0;t++);n.tooltip_init_x=t}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[n.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},l.getTooltipContent=function(t,e,n,i){var r,a,o,s,u,c,l=this.config,h=l.tooltip_format_title||e,d=l.tooltip_format_name||function(t){return t},f=l.tooltip_format_value||n,g=this.isOrderAsc();if(0===l.data_groups.length)t.sort(function(t,e){var n=t?t.value:null,i=e?e.value:null;return g?n-i:i-n});else{var p=this.orderTargets(this.data.targets).map(function(t){return t.id});t.sort(function(t,e){var n=t?t.value:null,i=e?e.value:null;return 0<n&&0<i&&(n=t?p.indexOf(t.id):null,i=e?p.indexOf(e.id):null),g?n-i:i-n})}for(a=0;a<t.length;a++)if(t[a]&&(t[a].value||0===t[a].value)&&(r||(o=x(h?h(t[a].x):t[a].x),r="<table class='"+this.CLASS.tooltip+"'>"+(o||0===o?"<tr><th colspan='2'>"+o+"</th></tr>":"")),void 0!==(s=x(f(t[a].value,t[a].ratio,t[a].id,t[a].index,t))))){if(null===t[a].name)continue;u=x(d(t[a].name,t[a].ratio,t[a].id,t[a].index)),c=this.levelColor?this.levelColor(t[a].value):i(t[a].id),r+="<tr class='"+this.CLASS.tooltipName+"-"+this.getTargetSelectorSuffix(t[a].id)+"'>",r+="<td class='name'><span style='background-color:"+c+"'></span>"+u+"</td>",r+="<td class='value'>"+s+"</td>",r+="</tr>"}return r+"</table>"},l.tooltipPosition=function(t,e,n,i){var r,a,o,s,u,c=this,l=c.config,h=c.d3,d=c.hasArcType(),f=h.mouse(i);return d?(a=(c.width-(c.isLegendRight?c.getLegendWidth():0))/2+f[0],s=c.height/2+f[1]+20):(r=c.getSvgLeft(!0),s=l.axis_rotated?(o=(a=r+f[0]+100)+e,u=c.currentWidth-c.getCurrentPaddingRight(),c.x(t[0].x)+20):(o=(a=r+c.getCurrentPaddingLeft(!0)+c.x(t[0].x)+20)+e,u=r+c.currentWidth-c.getCurrentPaddingRight(),f[1]+15),u<o&&(a-=o-u+20),s+n>c.currentHeight&&(s-=n+30)),s<0&&(s=0),{top:s,left:a}},l.showTooltip=function(t,e){var n,i,r,a=this,o=a.config,s=a.hasArcType(),u=t.filter(function(t){return t&&P(t.value)}),c=o.tooltip_position||l.tooltipPosition;0!==u.length&&o.tooltip_show&&(a.tooltip.html(o.tooltip_contents.call(a,t,a.axis.getXAxisTickFormat(),a.getYFormat(s),a.color)).style("display","block"),n=a.tooltip.property("offsetWidth"),i=a.tooltip.property("offsetHeight"),r=c.call(this,u,n,i,e),a.tooltip.style("top",r.top+"px").style("left",r.left+"px"))},l.hideTooltip=function(){this.tooltip.style("display","none")},l.initLegend=function(){var t=this;return t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),t.config.legend_show?void t.updateLegendWithDefaults():(t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets)))},l.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},l.updateSizeForLegend=function(t,e){var n=this,i=n.config,r={top:n.isLegendTop?n.getCurrentPaddingTop()+i.legend_inset_y+5.5:n.currentHeight-t-n.getCurrentPaddingBottom()-i.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+i.legend_inset_x+.5:n.currentWidth-e-n.getCurrentPaddingRight()-i.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?r.top:n.currentHeight-t,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-e:n.isLegendInset?r.left:0}},l.transformLegend=function(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},l.updateLegendStep=function(t){this.legendStep=t},l.updateLegendItemWidth=function(t){this.legendItemWidth=t},l.updateLegendItemHeight=function(t){this.legendItemHeight=t},l.getLegendWidth=function(){return this.config.legend_show?this.isLegendRight||this.isLegendInset?this.legendItemWidth*(this.legendStep+1):this.currentWidth:0},l.getLegendHeight=function(){var t=0;return this.config.legend_show&&(t=this.isLegendRight?this.currentHeight:Math.max(20,this.legendItemHeight)*(this.legendStep+1)),t},l.opacityForLegend=function(t){return t.classed(X.legendItemHidden)?null:1},l.opacityForUnfocusedLegend=function(t){return t.classed(X.legendItemHidden)?null:.3},l.toggleFocusLegend=function(e,t){var n=this;e=n.mapToTargetIds(e),n.legend.selectAll("."+X.legendItem).filter(function(t){return 0<=e.indexOf(t)}).classed(X.legendItemFocused,t).transition().duration(100).style("opacity",function(){return(t?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,n.d3.select(this))})},l.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+X.legendItem).classed(X.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(e.select(this))})},l.showLegend=function(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})},l.hideLegend=function(t){var e=this.config;e.legend_show&&f(t)&&(e.legend_show=!1,this.legend.style("visibility","hidden")),this.addHiddenLegendIds(t),this.legend.selectAll(this.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},l.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},l.updateLegend=function(f,t,e){function n(t,e,n){function i(t,e){e||(r=(d-L-h)/2)<P&&(r=(d-h)/2,L=0,k++),R[t]=k,G[k]=m.isLegendInset?10:r,M[t]=L,L+=h}var r,a,o=0===n,s=n===f.length-1,u=function(t,e){return m.legendItemTextBox[e]||(m.legendItemTextBox[e]=m.getTextRect(t.textContent,X.legendItem,t)),m.legendItemTextBox[e]}(t,e),c=u.width+C+(!s||m.isLegendRight||m.isLegendInset?A:0)+S.legend_padding,l=u.height+b,h=m.isLegendRight||m.isLegendInset?l:c,d=m.isLegendRight||m.isLegendInset?m.getLegendHeight():m.getLegendWidth();return o&&(w=T=k=L=0),S.legend_show&&!m.isLegendToShow(e)?void(E[e]=V[e]=R[e]=M[e]=0):(E[e]=c,V[e]=l,(!T||T<=c)&&(T=c),(!w||w<=l)&&(w=l),a=m.isLegendRight||m.isLegendInset?w:T,void(S.legend_equally?(Object.keys(E).forEach(function(t){E[t]=T}),Object.keys(V).forEach(function(t){V[t]=w}),(r=(d-a*f.length)/2)<P?(k=L=0,f.forEach(function(t){i(t)})):i(e,!0)):i(e)))}var i,r,a,o,s,u,c,l,h,d,g,p,x,_,y,v,m=this,S=m.config,b=4,A=10,T=0,w=0,P=10,C=S.legend_item_tile_width+5,L=0,M={},E={},V={},G=[0],R={},k=0;f=f.filter(function(t){return!I(S.data_names[t])||null!==S.data_names[t]}),g=H(t=t||{},"withTransition",!0),p=H(t,"withTransitionForTransform",!0),m.isLegendInset&&(k=S.legend_inset_step?S.legend_inset_step:f.length,m.updateLegendStep(k)),o=m.isLegendRight?(i=function(t){return T*R[t]},function(t){return G[R[t]]+M[t]}):m.isLegendInset?(i=function(t){return T*R[t]+10},function(t){return G[R[t]]+M[t]}):(i=function(t){return G[R[t]]+M[t]},function(t){return w*R[t]}),r=function(t,e){return i(t,e)+4+S.legend_item_tile_width},s=function(t,e){return o(t,e)+9},a=function(t,e){return i(t,e)},u=function(t,e){return o(t,e)-5},c=function(t,e){return i(t,e)-2},l=function(t,e){return i(t,e)-2+S.legend_item_tile_width},h=function(t,e){return o(t,e)+4},(d=m.legend.selectAll("."+X.legendItem).data(f).enter().append("g").attr("class",function(t){return m.generateClass(X.legendItem,t)}).style("visibility",function(t){return m.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){S.legend_item_onclick?S.legend_item_onclick.call(m,t):m.d3.event.altKey?(m.api.hide(),m.api.show(t)):(m.api.toggle(t),m.isTargetToShow(t)?m.api.focus(t):m.api.revert())}).on("mouseover",function(t){S.legend_item_onmouseover?S.legend_item_onmouseover.call(m,t):(m.d3.select(this).classed(X.legendItemFocused,!0),!m.transiting&&m.isTargetToShow(t)&&m.api.focus(t))}).on("mouseout",function(t){S.legend_item_onmouseout?S.legend_item_onmouseout.call(m,t):(m.d3.select(this).classed(X.legendItemFocused,!1),m.api.revert())})).append("text").text(function(t){return I(S.data_names[t])?S.data_names[t]:t}).each(function(t,e){n(this,t,e)}).style("pointer-events","none").attr("x",m.isLegendRight||m.isLegendInset?r:-200).attr("y",m.isLegendRight||m.isLegendInset?-200:s),d.append("rect").attr("class",X.legendItemEvent).style("fill-opacity",0).attr("x",m.isLegendRight||m.isLegendInset?a:-200).attr("y",m.isLegendRight||m.isLegendInset?-200:u),d.append("line").attr("class",X.legendItemTile).style("stroke",m.color).style("pointer-events","none").attr("x1",m.isLegendRight||m.isLegendInset?c:-200).attr("y1",m.isLegendRight||m.isLegendInset?-200:h).attr("x2",m.isLegendRight||m.isLegendInset?l:-200).attr("y2",m.isLegendRight||m.isLegendInset?-200:h).attr("stroke-width",S.legend_item_tile_height),v=m.legend.select("."+X.legendBackground+" rect"),m.isLegendInset&&0<T&&0===v.size()&&(v=m.legend.insert("g","."+X.legendItem).attr("class",X.legendBackground).append("rect")),x=m.legend.selectAll("text").data(f).text(function(t){return I(S.data_names[t])?S.data_names[t]:t}).each(function(t,e){n(this,t,e)}),(g?x.transition():x).attr("x",r).attr("y",s),_=m.legend.selectAll("rect."+X.legendItemEvent).data(f),(g?_.transition():_).attr("width",function(t){return E[t]}).attr("height",function(t){return V[t]}).attr("x",a).attr("y",u),y=m.legend.selectAll("line."+X.legendItemTile).data(f),(g?y.transition():y).style("stroke",m.color).attr("x1",c).attr("y1",h).attr("x2",l).attr("y2",h),v&&(g?v.transition():v).attr("height",m.getLegendHeight()-12).attr("width",T*(k+1)+10),m.legend.selectAll("."+X.legendItem).classed(X.legendItemHidden,function(t){return!m.isTargetToShow(t)}),m.updateLegendItemWidth(T),m.updateLegendItemHeight(w),m.updateLegendStep(k),m.updateSizes(),m.updateScales(),m.updateSvgSize(),m.transformAll(p,e),m.legendHasRendered=!0},l.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},l.redrawTitle=function(){this.title.attr("x",this.xForTitle.bind(this)).attr("y",this.yForTitle.bind(this))},l.xForTitle=function(){var t=this,e=t.config,n=e.title_position||"left";return 0<=n.indexOf("right")?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right:0<=n.indexOf("center")?(t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2:e.title_padding.left},l.yForTitle=function(){return this.config.title_padding.top+this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).height},l.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},function(t,e){if(Object.create)e.prototype=Object.create(t.prototype);else{var n=function(){};n.prototype=t.prototype,e.prototype=new n}e.prototype.constructor=e}(e,s),s.prototype.init=function(){var t=this.owner,e=t.config,n=t.main;t.axes.x=n.append("g").attr("class",X.axis+" "+X.axisX).attr("clip-path",t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",X.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=n.append("g").attr("class",X.axis+" "+X.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",X.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=n.append("g").attr("class",X.axis+" "+X.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",X.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},s.prototype.getXAxis=function(t,e,n,i,r,a,o){var s=this.owner,u=s.config,c={isCategory:s.isCategorized(),withOuterTick:r,tickMultiline:u.axis_x_tick_multiline,tickWidth:u.axis_x_tick_width,tickTextRotate:o?0:u.axis_x_tick_rotate,withoutTransition:a},l=h(s.d3,c).scale(t).orient(e);return s.isTimeSeries()&&i&&"function"!=typeof i&&(i=i.map(function(t){return s.parseDate(t)})),l.tickFormat(n).tickValues(i),s.isCategorized()&&(l.tickCentered(u.axis_x_tick_centered),f(u.axis_x_tick_culling)&&(u.axis_x_tick_culling=!1)),l},s.prototype.updateXAxisTickValues=function(t,e){var n,i=this.owner,r=i.config;return(r.axis_x_tick_fit||r.axis_x_tick_count)&&(n=this.generateTickValues(i.mapTargetsToUniqueXs(t),r.axis_x_tick_count,i.isTimeSeries())),e?e.tickValues(n):(i.xAxis.tickValues(n),i.subXAxis.tickValues(n)),n},s.prototype.getYAxis=function(t,e,n,i,r,a,o){var s=this.owner,u=s.config,c={withOuterTick:r,withoutTransition:a,tickTextRotate:o?0:u.axis_y_tick_rotate},l=h(s.d3,c).scale(t).orient(e).tickFormat(n);return s.isTimeSeriesY()?l.ticks(s.d3.time[u.axis_y_tick_time_value],u.axis_y_tick_time_interval):l.tickValues(i),l},s.prototype.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},s.prototype.getXAxisTickFormat=function(){var e=this.owner,n=e.config,i=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(t){return t<0?t.toFixed(0):t};return n.axis_x_tick_format&&(d(n.axis_x_tick_format)?i=n.axis_x_tick_format:e.isTimeSeries()&&(i=function(t){return t?e.axisTimeFormat(n.axis_x_tick_format)(t):""})),d(i)?function(t){return i.call(e,t)}:i},s.prototype.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},s.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},s.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},s.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},s.prototype.getLabelOptionByAxisId=function(t){var e,n=this.owner.config;return"y"===t?e=n.axis_y_label:"y2"===t?e=n.axis_y2_label:"x"===t&&(e=n.axis_x_label),e},s.prototype.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return a(e)?e:e?e.text:null},s.prototype.setLabelText=function(t,e){var n=this.owner.config,i=this.getLabelOptionByAxisId(t);a(i)?"y"===t?n.axis_y_label=e:"y2"===t?n.axis_y2_label=e:"x"===t&&(n.axis_x_label=e):i&&(i.text=e)},s.prototype.getLabelPosition=function(t,e){var n=this.getLabelOptionByAxisId(t),i=n&&"object"==typeof n&&n.position?n.position:e;return{isInner:0<=i.indexOf("inner"),isOuter:0<=i.indexOf("outer"),isLeft:0<=i.indexOf("left"),isCenter:0<=i.indexOf("center"),isRight:0<=i.indexOf("right"),isTop:0<=i.indexOf("top"),isMiddle:0<=i.indexOf("middle"),isBottom:0<=i.indexOf("bottom")}},s.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},s.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},s.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},s.prototype.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},s.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},s.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},s.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},s.prototype.xForAxisLabel=function(t,e){var n=this.owner;return t?e.isLeft?0:e.isCenter?n.width/2:n.width:e.isBottom?-n.height:e.isMiddle?-n.height/2:0},s.prototype.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},s.prototype.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},s.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},s.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},s.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},s.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},s.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},s.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},s.prototype.dyForXAxisLabel=function(){var t=this.owner.config,e=this.getXAxisLabelPosition();return t.axis_rotated?e.isInner?"1.2em":-25-this.getMaxTickWidth("x"):e.isInner?"-0.5em":t.axis_x_height?t.axis_x_height-10:"3em"},s.prototype.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},s.prototype.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},s.prototype.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},s.prototype.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},s.prototype.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},s.prototype.getMaxTickWidth=function(t,e){var n,i,r,a,o=this.owner,s=o.config,u=0;return e&&o.currentMaxTickWidths[t]||(o.svg&&(n=o.filterTargetsToShow(o.data.targets),"y"===t?(i=o.y.copy().domain(o.getYDomain(n,"y")),r=this.getYAxis(i,o.yOrient,s.axis_y_tick_format,o.yAxisTickValues,!1,!0,!0)):"y2"===t?(i=o.y2.copy().domain(o.getYDomain(n,"y2")),r=this.getYAxis(i,o.y2Orient,s.axis_y2_tick_format,o.y2AxisTickValues,!1,!0,!0)):(i=o.x.copy().domain(o.getXDomain(n)),r=this.getXAxis(i,o.xOrient,o.xAxisTickFormat,o.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,r)),(a=o.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(r).each(function(){o.d3.select(this).selectAll("text").each(function(){var t=this.getBoundingClientRect();u<t.width&&(u=t.width)}),a.remove()})),o.currentMaxTickWidths[t]=u<=0?o.currentMaxTickWidths[t]:u),o.currentMaxTickWidths[t]},s.prototype.updateLabels=function(t){var e=this.owner,n=e.main.select("."+X.axisX+" ."+X.axisXLabel),i=e.main.select("."+X.axisY+" ."+X.axisYLabel),r=e.main.select("."+X.axisY2+" ."+X.axisY2Label);(t?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?i.transition():i).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?r.transition():r).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},s.prototype.getPadding=function(t,e,n,i){var r="number"==typeof t?t:t[e];return P(r)?"ratio"===t.unit?t[e]*i:this.convertPixelsToAxisPadding(r,i):n},s.prototype.convertPixelsToAxisPadding=function(t,e){var n=this.owner;return e*(t/(n.config.axis_rotated?n.width:n.height))},s.prototype.generateTickValues=function(t,e,n){var i,r,a,o,s,u,c,l=t;if(e)if(1===(i=d(e)?e():e))l=[t[0]];else if(2===i)l=[t[0],t[t.length-1]];else if(2<i){for(o=i-2,r=t[0],s=((a=t[t.length-1])-r)/(1+o),l=[r],u=0;u<o;u++)c=+r+s*(u+1),l.push(n?new Date(c):c);l.push(a)}return n||(l=l.sort(function(t,e){return t-e})),l},s.prototype.generateTransitions=function(t){var e=this.owner.axes;return{axisX:t?e.x.transition().duration(t):e.x,axisY:t?e.y.transition().duration(t):e.y,axisY2:t?e.y2.transition().duration(t):e.y2,axisSubX:t?e.subx.transition().duration(t):e.subx}},s.prototype.redraw=function(t,e){var n=this.owner;n.axes.x.style("opacity",e?0:1),n.axes.y.style("opacity",e?0:1),n.axes.y2.style("opacity",e?0:1),n.axes.subx.style("opacity",e?0:1),t.axisX.call(n.xAxis),t.axisY.call(n.yAxis),t.axisY2.call(n.y2Axis),t.axisSubX.call(n.subXAxis)},l.getClipPath=function(t){return"url("+(0<=c.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+t+")"},l.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},l.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},l.getAxisClipY=function(t){return t?-20:-this.margin.top},l.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},l.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},l.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},l.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},l.getAxisClipWidth=function(t){var e=Math.max(30,this.margin.left),n=Math.max(30,this.margin.right);return t?this.width+2+e+n:this.margin.left+20},l.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},l.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},l.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},l.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},l.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},l.initPie=function(){var t=this.d3,e=this.config;this.pie=t.layout.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}),e.data_order||this.pie.sort(null)},l.updateRadius=function(){var t=this,e=t.config,n=e.gauge_width||e.donut_width;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2,t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=n?(t.radius-n)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0},l.updateArc=function(){this.svgArc=this.getSvgArc(),this.svgArcExpanded=this.getSvgArcExpanded(),this.svgArcExpandedSub=this.getSvgArcExpanded(.98)},l.updateAngle=function(e){var t,n,i,r,a=this.config,o=!1,s=0;return a?(this.pie(this.filterTargetsToShow(this.data.targets)).forEach(function(t){o||t.data.id!==e.data.id||(o=!0,(e=t).index=s),s++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),this.isGaugeType(e.data)&&(t=a.gauge_min,n=a.gauge_max,i=Math.PI*(a.gauge_fullCircle?2:1)/(n-t),r=e.value<t?0:e.value<n?e.value-t:n-t,e.startAngle=a.gauge_startingAngle,e.endAngle=e.startAngle+i*r),o?e:null):null},l.getSvgArc=function(){function t(t,e){var n;return e?r(t):(n=i.updateAngle(t))?r(n):"M 0 0"}var i=this,r=i.d3.svg.arc().outerRadius(i.radius).innerRadius(i.innerRadius);return t.centroid=r.centroid,t},l.getSvgArcExpanded=function(t){var n=this,i=n.d3.svg.arc().outerRadius(n.radiusExpanded*(t||1)).innerRadius(n.innerRadius);return function(t){var e=n.updateAngle(t);return e?i(e):"M 0 0"}},l.getArc=function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},l.transformForArcLabel=function(t){var e,n,i,r,a,o=this,s=o.config,u=o.updateAngle(t),c="";return u&&!o.hasType("gauge")&&(e=this.svgArc.centroid(u),n=isNaN(e[0])?0:e[0],i=isNaN(e[1])?0:e[1],r=Math.sqrt(n*n+i*i),c="translate("+n*(a=o.hasType("donut")&&s.donut_label_ratio?d(s.donut_label_ratio)?s.donut_label_ratio(t,o.radius,r):s.donut_label_ratio:o.hasType("pie")&&s.pie_label_ratio?d(s.pie_label_ratio)?s.pie_label_ratio(t,o.radius,r):s.pie_label_ratio:o.radius&&r?(.375<36/o.radius?1.175-36/o.radius:.8)*o.radius/r:0)+","+i*a+")"),c},l.getArcRatio=function(t){var e=this.config,n=Math.PI*(this.hasType("gauge")&&!e.gauge_fullCircle?1:2);return t?(t.endAngle-t.startAngle)/n:null},l.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},l.textForArcLabel=function(t){var e,n,i,r,a;return this.shouldShowArcLabel()?(n=(e=this.updateAngle(t))?e.value:null,i=this.getArcRatio(e),r=t.data.id,this.hasType("gauge")||this.meetsArcLabelThreshold(i)?(a=this.getArcLabelFormat())?a(n,i,r):this.defaultArcValueFormat(n,i):""):""},l.expandArc=function(t){var e,n=this;return n.transiting?void(e=c.setInterval(function(){n.transiting||(c.clearInterval(e),0<n.legend.selectAll(".c3-legend-item-focused").size()&&n.expandArc(t))},10)):(t=n.mapToTargetIds(t),void n.svg.selectAll(n.selectorTargets(t,"."+X.chartArc)).each(function(t){n.shouldExpand(t.data.id)&&n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(t.data.id)).attr("d",n.svgArcExpanded).transition().duration(2*n.expandDuration(t.data.id)).attr("d",n.svgArcExpandedSub).each(function(t){n.isDonutType(t.data)})}))},l.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+X.chartArc)).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("."+X.arc).style("opacity",1))},l.expandDuration=function(t){var e=this.config;return this.isDonutType(t)?e.donut_expand_duration:this.isGaugeType(t)?e.gauge_expand_duration:this.isPieType(t)?e.pie_expand_duration:50},l.shouldExpand=function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},l.shouldShowArcLabel=function(){var t=this.config,e=!0;return this.hasType("donut")?e=t.donut_label_show:this.hasType("pie")&&(e=t.pie_label_show),e},l.meetsArcLabelThreshold=function(t){var e=this.config;return(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)<=t},l.getArcLabelFormat=function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},l.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},l.updateTargetsForArc=function(t){var e,n=this.main,i=this.classChartArc.bind(this),r=this.classArcs.bind(this),a=this.classFocus.bind(this);(e=n.select("."+X.chartArcs).selectAll("."+X.chartArc).data(this.pie(t)).attr("class",function(t){return i(t)+a(t.data)}).enter().append("g").attr("class",i)).append("g").attr("class",r),e.append("text").attr("dy",this.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},l.initArc=function(){this.arcs=this.main.select("."+X.chart).append("g").attr("class",X.chartArcs).attr("transform",this.getTranslate("arc")),this.arcs.append("text").attr("class",X.chartArcsTitle).style("text-anchor","middle").text(this.getArcTitle())},l.redrawArc=function(t,e,n){var i,r=this,a=r.d3,o=r.config,s=r.main;(i=s.selectAll("."+X.arcs).selectAll("."+X.arc).data(r.arcData.bind(r))).enter().append("path").attr("class",r.classArc.bind(r)).style("fill",function(t){return r.color(t.data)}).style("cursor",function(t){return o.interaction_enabled&&o.data_selection_isselectable(t)?"pointer":null}).style("opacity",0).each(function(t){r.isGaugeType(t.data)&&(t.startAngle=t.endAngle=o.gauge_startingAngle),this._current=t}),i.attr("transform",function(t){return!r.isGaugeType(t.data)&&n?"scale(0)":""}).style("opacity",function(t){return t===this._current?0:1}).on("mouseover",o.interaction_enabled?function(t){var e,n;r.transiting||(e=r.updateAngle(t))&&(n=r.convertToArcData(e),r.expandArc(e.data.id),r.api.focus(e.data.id),r.toggleFocusLegend(e.data.id,!0),r.config.data_onmouseover(n,this))}:null).on("mousemove",o.interaction_enabled?function(t){var e,n=r.updateAngle(t);n&&(e=[r.convertToArcData(n)],r.showTooltip(e,this))}:null).on("mouseout",o.interaction_enabled?function(t){var e,n;r.transiting||(e=r.updateAngle(t))&&(n=r.convertToArcData(e),r.unexpandArc(e.data.id),r.api.revert(),r.revertLegend(),r.hideTooltip(),r.config.data_onmouseout(n,this))}:null).on("click",o.interaction_enabled?function(t,e){var n,i=r.updateAngle(t);i&&(n=r.convertToArcData(i),r.toggleShape&&r.toggleShape(this,n,e),r.config.data_onclick.call(r.api,n,this))}:null).each(function(){r.transiting=!0}).transition().duration(t).attrTween("d",function(n){var i,t=r.updateAngle(n);return t?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),i=a.interpolate(this._current,t),this._current=i(0),function(t){var e=i(t);return e.data=n.data,r.getArc(e,!0)}):function(){return"M 0 0"}}).attr("transform",n?"scale(1)":"").style("fill",function(t){return r.levelColor?r.levelColor(t.data.values[0].value):r.color(t.data.id)}).style("opacity",1).call(r.endall,function(){r.transiting=!1}),i.exit().transition().duration(e).style("opacity",0).remove(),s.selectAll("."+X.chartArc).select("text").style("opacity",0).attr("class",function(t){return r.isGaugeType(t.data)?X.gaugeValue:""}).text(r.textForArcLabel.bind(r)).attr("transform",r.transformForArcLabel.bind(r)).style("font-size",function(t){return r.isGaugeType(t.data)?Math.round(r.radius/5)+"px":""}).transition().duration(t).style("opacity",function(t){return r.isTargetToShow(t.data.id)&&r.isArcType(t.data)?1:0}),s.select("."+X.chartArcsTitle).style("opacity",r.hasType("donut")||r.hasType("gauge")?1:0),r.hasType("gauge")&&(r.arcs.select("."+X.chartArcsBackground).attr("d",function(){var t={data:[{value:o.gauge_max}],startAngle:o.gauge_startingAngle,endAngle:-1*o.gauge_startingAngle};return r.getArc(t,!0,!0)}),r.arcs.select("."+X.chartArcsGaugeUnit).attr("dy",".75em").text(o.gauge_label_show?o.gauge_units:""),r.arcs.select("."+X.chartArcsGaugeMin).attr("dx",-1*(r.innerRadius+(r.radius-r.innerRadius)/(o.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(o.gauge_label_show?o.gauge_min:""),r.arcs.select("."+X.chartArcsGaugeMax).attr("dx",r.innerRadius+(r.radius-r.innerRadius)/(o.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(o.gauge_label_show?o.gauge_max:""))},l.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("path").attr("class",X.chartArcsBackground),t.append("text").attr("class",X.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",X.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",X.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},l.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},l.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",X.regions)},l.updateRegion=function(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select("."+X.regions).selectAll("."+X.region).data(n.regions),e.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),e.mainRegion.attr("class",e.classRegion.bind(e)),e.mainRegion.exit().transition().duration(t).style("opacity",0).remove()},l.redrawRegion=function(t){var e=this,n=e.mainRegion.selectAll("rect").each(function(){var t=e.d3.select(this.parentNode).datum();e.d3.select(this).datum(t)}),i=e.regionX.bind(e),r=e.regionY.bind(e),a=e.regionWidth.bind(e),o=e.regionHeight.bind(e);return[(t?n.transition():n).attr("x",i).attr("y",r).attr("width",a).attr("height",o).style("fill-opacity",function(t){return P(t.opacity)?t.opacity:.1})]},l.regionX=function(t){var e=this.config,n="y"===t.axis?this.y:this.y2;return"y"===t.axis||"y2"===t.axis?e.axis_rotated&&"start"in t?n(t.start):0:e.axis_rotated?0:"start"in t?this.x(this.isTimeSeries()?this.parseDate(t.start):t.start):0},l.regionY=function(t){var e=this.config,n="y"===t.axis?this.y:this.y2;return"y"===t.axis||"y2"===t.axis?e.axis_rotated?0:"end"in t?n(t.end):0:e.axis_rotated&&"start"in t?this.x(this.isTimeSeries()?this.parseDate(t.start):t.start):0},l.regionWidth=function(t){var e,n=this,i=n.config,r=n.regionX(t),a="y"===t.axis?n.y:n.y2;return(e="y"===t.axis||"y2"===t.axis?i.axis_rotated&&"end"in t?a(t.end):n.width:i.axis_rotated?n.width:"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.width)<r?0:e-r},l.regionHeight=function(t){var e,n=this.config,i=this.regionY(t),r="y"===t.axis?this.y:this.y2;return(e="y"===t.axis||"y2"===t.axis?n.axis_rotated?this.height:"start"in t?r(t.start):this.height:n.axis_rotated&&"end"in t?this.x(this.isTimeSeries()?this.parseDate(t.end):t.end):this.height)<i?0:e-i},l.isRegionOnX=function(t){return!t.axis||"x"===t.axis},l.drag=function(t){var e,n,i,r,d,f,g,p,x=this,a=x.config,o=x.main,_=x.d3;x.hasArcType()||a.data_selection_enabled&&(a.zoom_enabled&&!x.zoom.altDomain||a.data_selection_multiple&&(e=x.dragStart[0],n=x.dragStart[1],i=t[0],r=t[1],d=Math.min(e,i),f=Math.max(e,i),g=a.data_selection_grouped?x.margin.top:Math.min(n,r),p=a.data_selection_grouped?x.height:Math.max(n,r),o.select("."+X.dragarea).attr("x",d).attr("y",g).attr("width",f-d).attr("height",p-g),o.selectAll("."+X.shapes).selectAll("."+X.shape).filter(function(t){return a.data_selection_isselectable(t)}).each(function(t,e){var n,i,r,a,o,s,u=_.select(this),c=u.classed(X.SELECTED),l=u.classed(X.INCLUDED),h=!1;if(u.classed(X.circle))n=1*u.attr("cx"),i=1*u.attr("cy"),o=x.togglePoint,h=d<n&&n<f&&g<i&&i<p;else{if(!u.classed(X.bar))return;n=(s=y(this)).x,i=s.y,r=s.width,a=s.height,o=x.togglePath,h=!(f<n||n+r<d||p<i||i+a<g)}h^l&&(u.classed(X.INCLUDED,!l),u.classed(X.SELECTED,!c),o.call(x,!c,u,t,e))})))},l.dragstart=function(t){var e=this.config;this.hasArcType()||e.data_selection_enabled&&(this.dragStart=t,this.main.select("."+X.chart).append("rect").attr("class",X.dragarea).style("opacity",.1),this.dragging=!0)},l.dragend=function(){var t=this.config;this.hasArcType()||t.data_selection_enabled&&(this.main.select("."+X.dragarea).transition().duration(100).style("opacity",0).remove(),this.main.selectAll("."+X.shape).classed(X.INCLUDED,!1),this.dragging=!1)},l.selectPoint=function(t,e,n){var i=this,r=i.config,a=(r.axis_rotated?i.circleY:i.circleX).bind(i),o=(r.axis_rotated?i.circleX:i.circleY).bind(i),s=i.pointSelectR.bind(i);r.data_onselected.call(i.api,e,t.node()),i.main.select("."+X.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+X.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return i.generateClass(X.selectedCircle,n)}).attr("cx",a).attr("cy",o).attr("stroke",function(){return i.color(e)}).attr("r",function(t){return 1.4*i.pointSelectR(t)}).transition().duration(100).attr("r",s)},l.unselectPoint=function(t,e,n){this.config.data_onunselected.call(this.api,e,t.node()),this.main.select("."+X.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+X.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},l.togglePoint=function(t,e,n,i){t?this.selectPoint(e,n,i):this.unselectPoint(e,n,i)},l.selectPath=function(t,e){var n=this;n.config.data_onselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.d3.rgb(n.color(e)).brighter(.75)})},l.unselectPath=function(t,e){var n=this;n.config.data_onunselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.color(e)})},l.togglePath=function(t,e,n,i){t?this.selectPath(e,n,i):this.unselectPath(e,n,i)},l.getToggle=function(t,e){var n;return"circle"===t.nodeName?n=this.isStepType(e)?function(){}:this.togglePoint:"path"===t.nodeName&&(n=this.togglePath),n},l.toggleShape=function(t,e,n){var i=this.d3,r=this.config,a=i.select(t),o=a.classed(X.SELECTED),s=this.getToggle(t,e).bind(this);r.data_selection_enabled&&r.data_selection_isselectable(e)&&(r.data_selection_multiple||this.main.selectAll("."+X.shapes+(r.data_selection_grouped?this.getTargetSelectorSuffix(e.id):"")).selectAll("."+X.shape).each(function(t,e){var n=i.select(this);n.classed(X.SELECTED)&&s(!1,n.classed(X.SELECTED,!1),t,e)}),a.classed(X.SELECTED,!o),s(!o,a,e,n))},l.initBrush=function(){var e=this,t=e.d3;e.brush=t.svg.brush().on("brush",function(){e.redrawForBrush()}),e.brush.update=function(){return e.context&&e.context.select("."+X.brush).call(this),this},e.brush.scale=function(t){return e.config.axis_rotated?this.y(t):this.x(t)}},l.initSubchart=function(){var t=this,e=t.config,n=t.context=t.svg.append("g").attr("transform",t.getTranslate("context")),i=e.subchart_show?"visible":"hidden";n.style("visibility",i),n.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",X.chart),n.select("."+X.chart).append("g").attr("class",X.chartBars),n.select("."+X.chart).append("g").attr("class",X.chartLines),n.append("g").attr("clip-path",t.clipPath).attr("class",X.brush).call(t.brush),t.axes.subx=n.append("g").attr("class",X.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?i:"hidden")},l.updateTargetsForSubchart=function(t){var e,n=this,i=n.context,r=n.config,a=n.classChartBar.bind(n),o=n.classBars.bind(n),s=n.classChartLine.bind(n),u=n.classLines.bind(n),c=n.classAreas.bind(n);r.subchart_show&&(i.select("."+X.chartBars).selectAll("."+X.chartBar).data(t).attr("class",a).enter().append("g").style("opacity",0).attr("class",a).append("g").attr("class",o),(e=i.select("."+X.chartLines).selectAll("."+X.chartLine).data(t).attr("class",s).enter().append("g").style("opacity",0).attr("class",s)).append("g").attr("class",u),e.append("g").attr("class",c),i.selectAll("."+X.brush+" rect").attr(r.axis_rotated?"width":"height",r.axis_rotated?n.width2:n.height2))},l.updateBarForSubchart=function(t){var e=this;e.contextBar=e.context.selectAll("."+X.bars).selectAll("."+X.bar).data(e.barData.bind(e)),e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color),e.contextBar.style("opacity",e.initialOpacity.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity",0).remove()},l.redrawBarForSubchart=function(t,e,n){(e?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",t).style("opacity",1)},l.updateLineForSubchart=function(t){var e=this;e.contextLine=e.context.selectAll("."+X.lines).selectAll("."+X.line).data(e.lineData.bind(e)),e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.contextLine.style("opacity",e.initialOpacity.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity",0).remove()},l.redrawLineForSubchart=function(t,e,n){(e?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",t).style("opacity",1)},l.updateAreaForSubchart=function(t){var e=this,n=e.d3;e.contextArea=e.context.selectAll("."+X.areas).selectAll("."+X.area).data(e.lineData.bind(e)),e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.contextArea.style("opacity",0),e.contextArea.exit().transition().duration(t).style("opacity",0).remove()},l.redrawAreaForSubchart=function(t,e,n){(e?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},l.redrawSubchart=function(t,e,n,i,r,a,o){var s,u,c,l=this,h=l.d3,d=l.config;l.context.style("visibility",d.subchart_show?"visible":"hidden"),d.subchart_show&&(h.event&&"zoom"===h.event.type&&l.brush.extent(l.x.orgDomain()).update(),t&&(l.brush.empty()||l.brush.extent(l.x.orgDomain()).update(),s=l.generateDrawArea(r,!0),u=l.generateDrawBar(a,!0),c=l.generateDrawLine(o,!0),l.updateBarForSubchart(n),l.updateLineForSubchart(n),l.updateAreaForSubchart(n),l.redrawBarForSubchart(u,n,n),l.redrawLineForSubchart(c,n,n),l.redrawAreaForSubchart(s,n,n)))},l.redrawForBrush=function(){var t=this.x;this.redraw({withTransition:!1,withY:this.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),this.config.subchart_onbrush.call(this.api,t.orgDomain())},l.transformContext=function(t,e){var n;e&&e.axisSubX?n=e.axisSubX:(n=this.context.select("."+X.axisX),t&&(n=n.transition())),this.context.attr("transform",this.getTranslate("context")),n.attr("transform",this.getTranslate("subx"))},l.getDefaultExtent=function(){var t=this.config,e=d(t.axis_x_extent)?t.axis_x_extent(this.getXDomain(this.data.targets)):t.axis_x_extent;return this.isTimeSeries()&&(e=[this.parseDate(e[0]),this.parseDate(e[1])]),e},l.initZoom=function(){var e,n=this,i=n.d3,r=n.config;n.zoom=i.behavior.zoom().on("zoomstart",function(){e=i.event.sourceEvent,n.zoom.altDomain=i.event.sourceEvent.altKey?n.x.orgDomain():null,r.zoom_onzoomstart.call(n.api,i.event.sourceEvent)}).on("zoom",function(){n.redrawForZoom.call(n)}).on("zoomend",function(){var t=i.event.sourceEvent;t&&e.clientX===t.clientX&&e.clientY===t.clientY||(n.redrawEventRect(),n.updateZoom(),r.zoom_onzoomend.call(n.api,n.x.orgDomain()))}),n.zoom.scale=function(t){return r.axis_rotated?this.y(t):this.x(t)},n.zoom.orgScaleExtent=function(){var t=r.zoom_extent?r.zoom_extent:[1,10];return[t[0],Math.max(n.getMaxDataCount()/t[1],t[1])]},n.zoom.updateScaleExtent=function(){var t=O(n.x.orgDomain())/O(n.getZoomDomain()),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this}},l.getZoomDomain=function(){var t=this.config,e=this.d3;return[e.min([this.orgXDomain[0],t.zoom_x_min]),e.max([this.orgXDomain[1],t.zoom_x_max])]},l.updateZoom=function(){var t=this.config.zoom_enabled?this.zoom:function(){};this.main.select("."+X.zoomRect).call(t).on("dblclick.zoom",null),this.main.selectAll("."+X.eventRect).call(t).on("dblclick.zoom",null)},l.redrawForZoom=function(){var t=this,e=t.d3,n=t.config,i=t.zoom,r=t.x;if(n.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length){if("mousemove"===e.event.sourceEvent.type&&i.altDomain)return r.domain(i.altDomain),void i.scale(r).updateScaleExtent();t.isCategorized()&&r.orgDomain()[0]===t.orgXDomain[0]&&r.domain([t.orgXDomain[0]-1e-10,r.orgDomain()[1]]),t.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0),n.zoom_onzoom.call(t.api,r.orgDomain())}},l.generateColor=function(){var t=this.config,e=this.d3,i=t.data_colors,r=C(t.color_pattern)?t.color_pattern:e.scale.category10().range(),a=t.data_color,o=[];return function(t){var e,n=t.id||t.data&&t.data.id||t;return i[n]instanceof Function?e=i[n](t):i[n]?e=i[n]:(o.indexOf(n)<0&&o.push(n),e=r[o.indexOf(n)%r.length],i[n]=e),a instanceof Function?a(e,t):e}},l.generateLevelColor=function(){var t=this.config,i=t.color_pattern,e=t.color_threshold,r="value"===e.unit,a=e.values&&e.values.length?e.values:[],o=e.max||100;return C(t.color_threshold)?function(t){var e,n=i[i.length-1];for(e=0;e<a.length;e++)if((r?t:100*t/o)<a[e]){n=i[e];break}return n}:null},l.getYFormat=function(t){var i=this,r=t&&!i.hasType("gauge")?i.defaultArcValueFormat:i.yFormat,a=t&&!i.hasType("gauge")?i.defaultArcValueFormat:i.y2Format;return function(t,e,n){return("y2"===i.axis.getId(n)?a:r).call(i,t,e)}},l.yFormat=function(t){var e=this.config;return(e.axis_y_tick_format?e.axis_y_tick_format:this.defaultValueFormat)(t)},l.y2Format=function(t){var e=this.config;return(e.axis_y2_tick_format?e.axis_y2_tick_format:this.defaultValueFormat)(t)},l.defaultValueFormat=function(t){return P(t)?+t:""},l.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},l.dataLabelFormat=function(t){function e(t){return P(t)?+t:""}var n=this.config.data_labels;return"function"==typeof n.format?n.format:"object"==typeof n.format?n.format[t]?!0===n.format[t]?e:n.format[t]:function(){return""}:e},l.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},l.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},l.getCaches=function(t){var e,n=[];for(e=0;e<t.length;e++)t[e]in this.cache&&n.push(this.cloneTarget(this.cache[t[e]]));return n};var X=l.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};l.generateClass=function(t,e){return" "+t+" "+t+this.getTargetSelectorSuffix(e)},l.classText=function(t){return this.generateClass(X.text,t.index)},l.classTexts=function(t){return this.generateClass(X.texts,t.id)},l.classShape=function(t){return this.generateClass(X.shape,t.index)},l.classShapes=function(t){return this.generateClass(X.shapes,t.id)},l.classLine=function(t){return this.classShape(t)+this.generateClass(X.line,t.id)},l.classLines=function(t){return this.classShapes(t)+this.generateClass(X.lines,t.id)},l.classCircle=function(t){return this.classShape(t)+this.generateClass(X.circle,t.index)},l.classCircles=function(t){return this.classShapes(t)+this.generateClass(X.circles,t.id)},l.classBar=function(t){return this.classShape(t)+this.generateClass(X.bar,t.index)},l.classBars=function(t){return this.classShapes(t)+this.generateClass(X.bars,t.id)},l.classArc=function(t){return this.classShape(t.data)+this.generateClass(X.arc,t.data.id)},l.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(X.arcs,t.data.id)},l.classArea=function(t){return this.classShape(t)+this.generateClass(X.area,t.id)},l.classAreas=function(t){return this.classShapes(t)+this.generateClass(X.areas,t.id)},l.classRegion=function(t,e){return this.generateClass(X.region,e)+" "+("class"in t?t.class:"")},l.classEvent=function(t){return this.generateClass(X.eventRect,t.index)},l.classTarget=function(t){var e=this.config.data_classes[t],n="";return e&&(n=" "+X.target+"-"+e),this.generateClass(X.target,t)+n},l.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},l.classFocused=function(t){return" "+(0<=this.focusedTargetIds.indexOf(t.id)?X.focused:"")},l.classDefocused=function(t){return" "+(0<=this.defocusedTargetIds.indexOf(t.id)?X.defocused:"")},l.classChartText=function(t){return X.chartText+this.classTarget(t.id)},l.classChartLine=function(t){return X.chartLine+this.classTarget(t.id)},l.classChartBar=function(t){return X.chartBar+this.classTarget(t.id)},l.classChartArc=function(t){return X.chartArc+this.classTarget(t.data.id)},l.getTargetSelectorSuffix=function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},l.selectorTarget=function(t,e){return(e||"")+"."+X.target+this.getTargetSelectorSuffix(t)},l.selectorTargets=function(t,e){var n=this;return(t=t||[]).length?t.map(function(t){return n.selectorTarget(t,e)}):null},l.selectorLegend=function(t){return"."+X.legendItem+this.getTargetSelectorSuffix(t)},l.selectorLegends=function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null};var W,P=l.isValue=function(t){return t||0===t},d=l.isFunction=function(t){return"function"==typeof t},a=l.isString=function(t){return"string"==typeof t},b=l.isUndefined=function(t){return void 0===t},I=l.isDefined=function(t){return void 0!==t},o=l.ceil10=function(t){return 10*Math.ceil(t/10)},u=l.asHalfPixel=function(t){return Math.ceil(t)+.5},O=l.diffDomain=function(t){return t[1]-t[0]},f=l.isEmpty=function(t){return null==t||a(t)&&0===t.length||"object"==typeof t&&0===Object.keys(t).length},C=l.notEmpty=function(t){return!l.isEmpty(t)},H=l.getOption=function(t,e,n){return I(t[e])?t[e]:n},g=l.hasValue=function(e,n){var i=!1;return Object.keys(e).forEach(function(t){e[t]===n&&(i=!0)}),i},x=l.sanitise=function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},y=l.getPathBox=function(t){var e=t.getBoundingClientRect(),n=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)];return{x:n[0].x,y:Math.min(n[0].y,n[1].y),width:e.width,height:e.height}};r.focus=function(e){var t,n=this.internal;e=n.mapToTargetIds(e),t=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),t.classed(X.focused,!0).classed(X.defocused,!1),n.hasArcType()&&n.expandArc(e),n.toggleFocusLegend(e,!0),n.focusedTargetIds=e,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return e.indexOf(t)<0})},r.defocus=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))).classed(X.focused,!1).classed(X.defocused,!0),t.hasArcType()&&t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return e.indexOf(t)<0}),t.defocusedTargetIds=e},r.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(X.focused,!1).classed(X.defocused,!1),e.hasArcType()&&e.unexpandArc(t),e.config.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter(function(){return e.d3.select(this).classed(X.legendItemFocused)}).classed(X.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},r.show=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.removeHiddenTargetIds(t),(n=i.svg.selectAll(i.selectorTargets(t))).transition().style("opacity",1,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",1)}),e.withLegend&&i.showLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},r.hide=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.addHiddenTargetIds(t),(n=i.svg.selectAll(i.selectorTargets(t))).transition().style("opacity",0,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",0)}),e.withLegend&&i.hideLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},r.toggle=function(t,e){var n=this,i=this.internal;i.mapToTargetIds(t).forEach(function(t){i.isTargetToShow(t)?n.hide(t,e):n.show(t,e)})},r.zoom=function(t){var e=this.internal;return t&&(e.isTimeSeries()&&(t=t.map(function(t){return e.parseDate(t)})),e.brush.extent(t),e.redraw({withUpdateXDomain:!0,withY:e.config.zoom_rescale}),e.config.zoom_onzoom.call(this,e.x.orgDomain())),e.brush.extent()},r.zoom.enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},r.unzoom=function(){var t=this.internal;t.brush.clear().update(),t.redraw({withUpdateXDomain:!0})},r.zoom.max=function(t){var e=this.internal,n=e.config,i=e.d3;return 0===t||t?void(n.zoom_x_max=i.max([e.orgXDomain[1],t])):n.zoom_x_max},r.zoom.min=function(t){var e=this.internal,n=e.config,i=e.d3;return 0===t||t?void(n.zoom_x_min=i.min([e.orgXDomain[0],t])):n.zoom_x_min},r.zoom.range=function(t){return arguments.length?(I(t.max)&&this.domain.max(t.max),void(I(t.min)&&this.domain.min(t.min))):{max:this.domain.max(),min:this.domain.min()}},r.load=function(e){var t=this.internal,n=t.config;return e.xs&&t.addXs(e.xs),"names"in e&&r.data.names.bind(this)(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){n.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(n.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){n.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){n.data_colors[t]=e.colors[t]}),"cacheIds"in e&&t.hasCaches(e.cacheIds)?void t.load(t.getCaches(e.cacheIds),e.done):void("unload"in e?t.unload(t.mapToTargetIds("boolean"==typeof e.unload&&e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e))},r.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()})},r.flow=function(t){var r,e,n,i,a,o,s,u=this.internal,c=[],l=u.getMaxDataCount(),h=0,d=0;if(t.json)e=u.convertJsonToData(t.json,t.keys);else if(t.rows)e=u.convertRowsToData(t.rows);else{if(!t.columns)return;e=u.convertColumnsToData(t.columns)}r=u.convertDataToTargets(e,!0),u.data.targets.forEach(function(t){var e,n,i=!1;for(e=0;e<r.length;e++)if(t.id===r[e].id){for(i=!0,t.values[t.values.length-1]&&(d=t.values[t.values.length-1].index+1),h=r[e].values.length,n=0;n<h;n++)r[e].values[n].index=d+n,u.isTimeSeries()||(r[e].values[n].x=d+n);t.values=t.values.concat(r[e].values),r.splice(e,1);break}i||c.push(t.id)}),u.data.targets.forEach(function(t){var e,n;for(e=0;e<c.length;e++)if(t.id===c[e])for(d=t.values[t.values.length-1].index+1,n=0;n<h;n++)t.values.push({id:t.id,index:d+n,x:u.isTimeSeries()?u.getOtherTargetX(d+n):d+n,value:null})}),u.data.targets.length&&r.forEach(function(t){var e,n=[];for(e=u.data.targets[0].values[0].index;e<d;e++)n.push({id:t.id,index:e,x:u.isTimeSeries()?u.getOtherTargetX(e):e,value:null});t.values.forEach(function(t){t.index+=d,u.isTimeSeries()||(t.x+=d)}),t.values=n.concat(t.values)}),u.data.targets=u.data.targets.concat(r),u.getMaxDataCount(),a=(i=u.data.targets[0]).values[0],I(t.to)?(h=0,s=u.isTimeSeries()?u.parseDate(t.to):t.to,i.values.forEach(function(t){t.x<s&&h++})):I(t.length)&&(h=t.length),l?1===l&&u.isTimeSeries()&&(o=(i.values[i.values.length-1].x-a.x)/2,n=[new Date(+a.x-o),new Date(+a.x+o)],u.updateXDomain(null,!0,!0,!1,n)):(o=u.isTimeSeries()?1<i.values.length?i.values[i.values.length-1].x-a.x:a.x-u.getXDomain(u.data.targets)[0]:1,n=[a.x-o,a.x],u.updateXDomain(null,!0,!0,!1,n)),u.updateTargets(u.data.targets),u.redraw({flow:{index:a.index,length:h,duration:P(t.duration)?t.duration:u.config.transition_duration,done:t.done,orgDataCount:l},withLegend:!0,withTransition:1<l,withTrimXDomain:!1,withUpdateXAxis:!0})},l.generateFlow=function(V){var G=this,R=G.config,k=G.d3;return function(){var t,e,n,i,r=V.targets,a=V.flow,o=V.drawBar,s=V.drawLine,u=V.drawArea,c=V.cx,l=V.cy,h=V.xv,d=V.xForText,f=V.yForText,g=V.duration,p=a.index,x=a.length,_=G.getValueOnIndex(G.data.targets[0].values,p),y=G.getValueOnIndex(G.data.targets[0].values,p+x),v=G.x.domain(),m=a.duration||g,S=a.done||function(){},b=G.generateWait(),A=G.xgrid||k.selectAll([]),T=G.xgridLines||k.selectAll([]),w=G.mainRegion||k.selectAll([]),P=G.mainText||k.selectAll([]),C=G.mainBar||k.selectAll([]),L=G.mainLine||k.selectAll([]),M=G.mainArea||k.selectAll([]),E=G.mainCircle||k.selectAll([]);G.flowing=!0,G.data.targets.forEach(function(t){t.values.splice(0,x)}),n=G.updateXDomain(r,!0,!0),G.updateXGrid&&G.updateXGrid(!0),t=a.orgDataCount?1===a.orgDataCount||(_&&_.x)===(y&&y.x)?G.x(v[0])-G.x(n[0]):G.isTimeSeries()?G.x(v[0])-G.x(n[0]):G.x(_.x)-G.x(y.x):1!==G.data.targets[0].values.length?G.x(v[0])-G.x(n[0]):G.isTimeSeries()?(_=G.getValueOnIndex(G.data.targets[0].values,0),y=G.getValueOnIndex(G.data.targets[0].values,G.data.targets[0].values.length-1),G.x(_.x)-G.x(y.x)):O(n)/2,i=O(v)/O(n),e="translate("+t+",0) scale("+i+",1)",G.hideXGridFocus(),k.transition().ease("linear").duration(m).each(function(){b.add(G.axes.x.transition().call(G.xAxis)),b.add(C.transition().attr("transform",e)),b.add(L.transition().attr("transform",e)),b.add(M.transition().attr("transform",e)),b.add(E.transition().attr("transform",e)),b.add(P.transition().attr("transform",e)),b.add(w.filter(G.isRegionOnX).transition().attr("transform",e)),b.add(A.transition().attr("transform",e)),b.add(T.transition().attr("transform",e))}).call(b,function(){var t,e=[],n=[],i=[];if(x){for(t=0;t<x;t++)e.push("."+X.shape+"-"+(p+t)),n.push("."+X.text+"-"+(p+t)),i.push("."+X.eventRect+"-"+(p+t));G.svg.selectAll("."+X.shapes).selectAll(e).remove(),G.svg.selectAll("."+X.texts).selectAll(n).remove(),G.svg.selectAll("."+X.eventRects).selectAll(i).remove(),G.svg.select("."+X.xgrid).remove()}A.attr("transform",null).attr(G.xgridAttr),T.attr("transform",null),T.select("line").attr("x1",R.axis_rotated?0:h).attr("x2",R.axis_rotated?G.width:h),T.select("text").attr("x",R.axis_rotated?G.width:0).attr("y",h),C.attr("transform",null).attr("d",o),L.attr("transform",null).attr("d",s),M.attr("transform",null).attr("d",u),E.attr("transform",null).attr("cx",c).attr("cy",l),P.attr("transform",null).attr("x",d).attr("y",f).style("fill-opacity",G.opacityForText.bind(G)),w.attr("transform",null),w.select("rect").filter(G.isRegionOnX).attr("x",G.regionX.bind(G)).attr("width",G.regionWidth.bind(G)),R.interaction_enabled&&G.redrawEventRect(),S(),G.flowing=!1})}},r.selected=function(t){var e=this.internal,n=e.d3;return n.merge(e.main.selectAll("."+X.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+X.shape).filter(function(){return n.select(this).classed(X.SELECTED)}).map(function(t){return t.map(function(t){var e=t.__data__;return e.data?e.data:e})}))},r.select=function(u,c,l){var h=this.internal,d=h.d3,f=h.config;f.data_selection_enabled&&h.main.selectAll("."+X.shapes).selectAll("."+X.shape).each(function(t,e){var n=d.select(this),i=t.data?t.data.id:t.id,r=h.getToggle(this,t).bind(h),a=f.data_selection_grouped||!u||0<=u.indexOf(i),o=!c||0<=c.indexOf(e),s=n.classed(X.SELECTED);n.classed(X.line)||n.classed(X.area)||(a&&o?f.data_selection_isselectable(t)&&!s&&r(!0,n.classed(X.SELECTED,!0),t,e):I(l)&&l&&s&&r(!1,n.classed(X.SELECTED,!1),t,e))})},r.unselect=function(u,c){var l=this.internal,h=l.d3,d=l.config;d.data_selection_enabled&&l.main.selectAll("."+X.shapes).selectAll("."+X.shape).each(function(t,e){var n=h.select(this),i=t.data?t.data.id:t.id,r=l.getToggle(this,t).bind(l),a=d.data_selection_grouped||!u||0<=u.indexOf(i),o=!c||0<=c.indexOf(e),s=n.classed(X.SELECTED);n.classed(X.line)||n.classed(X.area)||a&&o&&d.data_selection_isselectable(t)&&s&&r(!1,n.classed(X.SELECTED,!1),t,e)})},r.transform=function(t,e){var n=this.internal,i=0<=["pie","donut"].indexOf(t)?{withTransform:!0}:null;n.transformTo(e,t,i)},l.transformTo=function(t,e,n){var i=!this.hasArcType(),r=n||{withTransitionForAxis:i};r.withTransitionForTransform=!1,this.transiting=!1,this.setTargetType(t,e),this.updateTargets(this.data.targets),this.updateAndRedraw(r)},r.groups=function(t){var e=this.internal,n=e.config;return b(t)||(n.data_groups=t,e.redraw()),n.data_groups},r.xgrids=function(t){var e=this.internal,n=e.config;return t&&(n.grid_x_lines=t,e.redrawWithoutRescale()),n.grid_x_lines},r.xgrids.add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t||[]))},r.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},r.ygrids=function(t){var e=this.internal,n=e.config;return t&&(n.grid_y_lines=t,e.redrawWithoutRescale()),n.grid_y_lines},r.ygrids.add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t||[]))},r.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},r.regions=function(t){var e=this.internal,n=e.config;return t&&(n.regions=t,e.redrawWithoutRescale()),n.regions},r.regions.add=function(t){var e=this.internal,n=e.config;return t&&(n.regions=n.regions.concat(t),e.redrawWithoutRescale()),n.regions},r.regions.remove=function(t){var e,n,i,r=this.internal,a=r.config;return t=t||{},e=r.getOption(t,"duration",a.transition_duration),n=r.getOption(t,"classes",[X.region]),i=r.main.select("."+X.regions).selectAll(n.map(function(t){return"."+t})),(e?i.transition().duration(e):i).style("opacity",0).remove(),a.regions=a.regions.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){0<=n.indexOf(t)&&(e=!0)}),!e)}),a.regions},r.data=function(e){var t=this.internal.data.targets;return void 0===e?t:t.filter(function(t){return 0<=[].concat(e).indexOf(t.id)})},r.data.shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},r.data.values=function(t){var e,n=null;return t&&(n=(e=this.data(t))[0]?e[0].values.map(function(t){return t.value}):null),n},r.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},r.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},r.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},r.category=function(t,e){var n=this.internal,i=n.config;return 1<arguments.length&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},r.categories=function(t){var e=this.internal,n=e.config;return arguments.length&&(n.axis_x_categories=t,e.redraw()),n.axis_x_categories},r.color=function(t){return this.internal.color(t)},r.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},r.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},r.axis=function(){},r.axis.labels=function(e){var n=this.internal;arguments.length&&(Object.keys(e).forEach(function(t){n.axis.setLabelText(t,e[t])}),n.axis.updateLabels())},r.axis.max=function(t){var e=this.internal,n=e.config;return arguments.length?("object"==typeof t?(P(t.x)&&(n.axis_x_max=t.x),P(t.y)&&(n.axis_y_max=t.y),P(t.y2)&&(n.axis_y2_max=t.y2)):n.axis_y_max=n.axis_y2_max=t,void e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:n.axis_x_max,y:n.axis_y_max,y2:n.axis_y2_max}},r.axis.min=function(t){var e=this.internal,n=e.config;return arguments.length?("object"==typeof t?(P(t.x)&&(n.axis_x_min=t.x),P(t.y)&&(n.axis_y_min=t.y),P(t.y2)&&(n.axis_y2_min=t.y2)):n.axis_y_min=n.axis_y2_min=t,void e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:n.axis_x_min,y:n.axis_y_min,y2:n.axis_y2_min}},r.axis.range=function(t){return arguments.length?(I(t.max)&&this.axis.max(t.max),void(I(t.min)&&this.axis.min(t.min))):{max:this.axis.max(),min:this.axis.min()}},r.legend=function(){},r.legend.show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},r.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},r.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},r.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},r.destroy=function(){var e=this.internal;if(c.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&&c.clearTimeout(e.resizeTimeout),c.detachEvent)c.detachEvent("onresize",e.resizeFunction);else if(c.removeEventListener)c.removeEventListener("resize",e.resizeFunction);else{var t=c.onresize;t&&t.add&&t.remove&&t.remove(e.resizeFunction)}return e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},r.tooltip=function(){},r.tooltip.show=function(t){var e,n,i=this.internal;t.mouse&&(n=t.mouse),t.data?e=i.isMultipleX()?(n=[i.x(t.data.x),i.getYScale(t.data.id)(t.data.value)],null):P(t.data.index)?t.data.index:i.getIndexByX(t.data.x):void 0!==t.x?e=i.getIndexByX(t.x):void 0!==t.index&&(e=t.index),i.dispatchEvent("mouseover",e,n),i.dispatchEvent("mousemove",e,n),i.config.tooltip_onshow.call(i,t.data)},r.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},l.isSafari=function(){var t=c.navigator.userAgent;return 0<=t.indexOf("Safari")&&t.indexOf("Chrome")<0},l.isChrome=function(){return 0<=c.navigator.userAgent.indexOf("Chrome")},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){}function n(){return r.apply(this instanceof e?this:t,i.concat(Array.prototype.slice.call(arguments)))}var i=Array.prototype.slice.call(arguments,1),r=this;return e.prototype=this.prototype,n.prototype=new e,n}),"SVGPathSeg"in c||(c.SVGPathSeg=function(t,e,n){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=n},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},c.SVGPathSegClosePath=function(t){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(void 0)},c.SVGPathSegMovetoAbs=function(t,e,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=n},SVGPathSegMovetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegMovetoRel=function(t,e,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=n},SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=function(){return new SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegLinetoAbs=function(t,e,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=n},SVGPathSegLinetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegLinetoRel=function(t,e,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=n},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=function(){return new SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegCurvetoCubicAbs=function(t,e,n,i,r,a,o){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=n,this._x1=i,this._y1=r,this._x2=a,this._y2=o},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegCurvetoCubicRel=function(t,e,n,i,r,a,o){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=n,this._x1=i,this._y1=r,this._x2=a,this._y2=o},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegCurvetoQuadraticAbs=function(t,e,n,i,r){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=n,this._x1=i,this._y1=r},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegCurvetoQuadraticRel=function(t,e,n,i,r){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=n,this._x1=i,this._y1=r},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegArcAbs=function(t,e,n,i,r,a,o,s){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=n,this._r1=i,this._r2=r,this._angle=a,this._largeArcFlag=o,this._sweepFlag=s},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){return new SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegArcRel=function(t,e,n,i,r,a,o,s){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=n,this._r1=i,this._r2=r,this._angle=a,this._largeArcFlag=o,this._sweepFlag=s},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegLinetoHorizontalAbs=function(t,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegLinetoHorizontalRel=function(t,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegLinetoVerticalAbs=function(t,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegLinetoVerticalRel=function(t,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,i,r){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=n,this._x2=i,this._y2=r},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegCurvetoCubicSmoothRel=function(t,e,n,i,r){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=n,this._x2=i,this._y2=r},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=n},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),c.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=n},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new SVGPathSegMovetoAbs(void 0,t,e)},SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new SVGPathSegMovetoRel(void 0,t,e)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new SVGPathSegLinetoAbs(void 0,t,e)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new SVGPathSegLinetoRel(void 0,t,e)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,n,i,r,a){return new SVGPathSegCurvetoCubicAbs(void 0,t,e,n,i,r,a)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,n,i,r,a){return new SVGPathSegCurvetoCubicRel(void 0,t,e,n,i,r,a)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,n,i){return new SVGPathSegCurvetoQuadraticAbs(void 0,t,e,n,i)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,n,i){return new SVGPathSegCurvetoQuadraticRel(void 0,t,e,n,i)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,n,i,r,a,o){return new SVGPathSegArcAbs(void 0,t,e,n,i,r,a,o)},SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,n,i,r,a,o){return new SVGPathSegArcRel(void 0,t,e,n,i,r,a,o)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new SVGPathSegLinetoHorizontalAbs(void 0,t)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new SVGPathSegLinetoHorizontalRel(void 0,t)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new SVGPathSegLinetoVerticalAbs(void 0,t)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new SVGPathSegLinetoVerticalRel(void 0,t)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,i){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,n,i)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,n,i){return new SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,n,i)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)}),"SVGPathSegList"in c||(c.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(t){if(this._pathElement){var e=!1;t.forEach(function(t){"d"==t.attributeName&&(e=!0)}),e&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(t){t._owningPathSegList=null}),this._list=[],this._writeListToPath()},SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],(t._owningPathSegList=this)._writeListToPath(),t},SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),(t._owningPathSegList=this)._writeListToPath(),t},SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),((this._list[e]=t)._owningPathSegList=this)._writeListToPath(),t},SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),(t._owningPathSegList=this)._writeListToPath(),t},SVGPathSegList._pathSegArrayAsString=function(t){var e="",n=!0;return t.forEach(function(t){n?(n=!1,e+=t._asPathString()):e+=" "+t._asPathString()}),e},SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];function e(){this.pathSegList=[]}var i=this;function n(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()}e.prototype.appendSegment=function(t){this.pathSegList.push(t)},n.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},n.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},n.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},n.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},n.prototype.peekSegmentType=function(){var t=this._string[this._currentIndex];return this._pathSegTypeFromChar(t)},n.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return SVGPathSeg.PATHSEG_LINETO_REL;case"C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return SVGPathSeg.PATHSEG_ARC_ABS;case"a":return SVGPathSeg.PATHSEG_ARC_REL;case"H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}},n.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||"0"<=t&&t<="9")&&e!=SVGPathSeg.PATHSEG_CLOSEPATH?e==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:e==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:e:SVGPathSeg.PATHSEG_UNKNOWN},n.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return t==SVGPathSeg.PATHSEG_MOVETO_ABS||t==SVGPathSeg.PATHSEG_MOVETO_REL},n.prototype._parseNumber=function(){var t=0,e=0,n=1,i=0,r=1,a=1,o=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=s)for(var u=this._currentIndex-1,c=1;s<=u;)e+=c*(this._string.charAt(u--)-"0"),c*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)i+=(this._string.charAt(this._currentIndex++)-"0")*(n*=.1)}if(this._currentIndex!=o&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,a=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)t*=10,t+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var l=e+i;if(l*=r,t&&(l*=Math.pow(10,a*t)),o!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),l}},n.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},n.prototype.parseSegment=function(){var t=this._string[this._currentIndex],e=this._pathSegTypeFromChar(t);if(e==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN)return null;if((e=this._nextCommandHelper(t,this._previousCommand))==SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=e){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(i,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(i,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(i,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(i,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(i,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(i,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(i,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(i,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new SVGPathSegClosePath(i);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var n={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicRel(i,n.x,n.y,n.x1,n.y1,n.x2,n.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return n={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegCurvetoCubicAbs(i,n.x,n.y,n.x1,n.y1,n.x2,n.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return n={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegCurvetoCubicSmoothRel(i,n.x,n.y,n.x2,n.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return n={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegCurvetoCubicSmoothAbs(i,n.x,n.y,n.x2,n.y2);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return n={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegCurvetoQuadraticRel(i,n.x,n.y,n.x1,n.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return n={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegCurvetoQuadraticAbs(i,n.x,n.y,n.x1,n.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(i,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(i,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:return n={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegArcRel(i,n.x,n.y,n.x1,n.y1,n.arcAngle,n.arcLarge,n.arcSweep);case SVGPathSeg.PATHSEG_ARC_ABS:return n={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegArcAbs(i,n.x,n.y,n.x1,n.y1,n.arcAngle,n.arcLarge,n.arcSweep);default:throw"Unknown path seg type."}};var r=new e,a=new n(t);if(!a.initialCommandIsMoveTo())return[];for(;a.hasMoreData();){var o=a.parseSegment();if(!o)return[];r.appendSegment(o)}return r.pathSegList}),"function"==typeof define&&define.amd?define("c3",["d3"],function(){return t}):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=t:c.c3=t}(window);